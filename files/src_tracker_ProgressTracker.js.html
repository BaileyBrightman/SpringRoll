<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://yui-s.yahooapis.com/3.8.0/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.ico">
    <link href='//fonts.googleapis.com/css?family=Titillium+Web:300' rel='stylesheet' type='text/css'>
    <script src="https://yui-s.yahooapis.com/3.10.1/build/yui/yui-min.js"></script>
	<title>SpringRoll v0.2.0 API Documentation : src/tracker/ProgressTracker.js</title>  
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><a href="https://github.com/SpringRoll/SpringRoll"><img src="../assets/css/logo.png" title="SpringRoll">SpringRoll</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Documentation for: 0.2.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                		<ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                			<li><a href="#api-modules">Modules</a></li>
                        </ul>
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/createjs.Container.html">createjs.Container</a></li>
                                <li><a href="../classes/createjs.MovieClip.html">createjs.MovieClip</a></li>
                                <li><a href="../classes/createjs.Point.html">createjs.Point</a></li>
                                <li><a href="../classes/springroll.AbstractDisplay.html">springroll.AbstractDisplay</a></li>
                                <li><a href="../classes/springroll.AbstractHint.html">springroll.AbstractHint</a></li>
                                <li><a href="../classes/springroll.AnimatorHint.html">springroll.AnimatorHint</a></li>
                                <li><a href="../classes/springroll.Application.html">springroll.Application</a></li>
                                <li><a href="../classes/springroll.BaseState.html">springroll.BaseState</a></li>
                                <li><a href="../classes/springroll.CacheManager.html">springroll.CacheManager</a></li>
                                <li><a href="../classes/springroll.Captions.html">springroll.Captions</a></li>
                                <li><a href="../classes/springroll.CombinedCallback.html">springroll.CombinedCallback</a></li>
                                <li><a href="../classes/springroll.Debug.html">springroll.Debug</a></li>
                                <li><a href="../classes/springroll.DebugOptions.html">springroll.DebugOptions</a></li>
                                <li><a href="../classes/springroll.DelayedCall.html">springroll.DelayedCall</a></li>
                                <li><a href="../classes/springroll.easeljs.Animator.html">springroll.easeljs.Animator</a></li>
                                <li><a href="../classes/springroll.easeljs.AnimatorTimeline.html">springroll.easeljs.AnimatorTimeline</a></li>
                                <li><a href="../classes/springroll.easeljs.AssetManager.html">springroll.easeljs.AssetManager</a></li>
                                <li><a href="../classes/springroll.easeljs.BasePanel.html">springroll.easeljs.BasePanel</a></li>
                                <li><a href="../classes/springroll.easeljs.BaseState.html">springroll.easeljs.BaseState</a></li>
                                <li><a href="../classes/springroll.easeljs.BitmapMovieClip.html">springroll.easeljs.BitmapMovieClip</a></li>
                                <li><a href="../classes/springroll.easeljs.BitmapUtils.html">springroll.easeljs.BitmapUtils</a></li>
                                <li><a href="../classes/springroll.easeljs.Button.html">springroll.easeljs.Button</a></li>
                                <li><a href="../classes/springroll.easeljs.Cutscene.html">springroll.easeljs.Cutscene</a></li>
                                <li><a href="../classes/springroll.easeljs.DisplayAdapter.html">springroll.easeljs.DisplayAdapter</a></li>
                                <li><a href="../classes/springroll.easeljs.DragManager.html">springroll.easeljs.DragManager</a></li>
                                <li><a href="../classes/springroll.easeljs.DwellTimer.html">springroll.easeljs.DwellTimer</a></li>
                                <li><a href="../classes/springroll.easeljs.EaselJSDisplay.html">springroll.easeljs.EaselJSDisplay</a></li>
                                <li><a href="../classes/springroll.easeljs.ReversePlayback.html">springroll.easeljs.ReversePlayback</a></li>
                                <li><a href="../classes/springroll.easeljs.SoundButton.html">springroll.easeljs.SoundButton</a></li>
                                <li><a href="../classes/springroll.easeljs.Texture.html">springroll.easeljs.Texture</a></li>
                                <li><a href="../classes/springroll.easeljs.TextureAtlas.html">springroll.easeljs.TextureAtlas</a></li>
                                <li><a href="../classes/springroll.easeljs.TrackingGame.html">springroll.easeljs.TrackingGame</a></li>
                                <li><a href="../classes/springroll.Enum.html">springroll.Enum</a></li>
                                <li><a href="../classes/springroll.EnumValue.html">springroll.EnumValue</a></li>
                                <li><a href="../classes/springroll.EventCatalog.html">springroll.EventCatalog</a></li>
                                <li><a href="../classes/springroll.EventDispatcher.html">springroll.EventDispatcher</a></li>
                                <li><a href="../classes/springroll.EventError.html">springroll.EventError</a></li>
                                <li><a href="../classes/springroll.EventSignature.html">springroll.EventSignature</a></li>
                                <li><a href="../classes/springroll.EventUtils.html">springroll.EventUtils</a></li>
                                <li><a href="../classes/springroll.Features.html">springroll.Features</a></li>
                                <li><a href="../classes/springroll.FunctionHint.html">springroll.FunctionHint</a></li>
                                <li><a href="../classes/springroll.FunctionTask.html">springroll.FunctionTask</a></li>
                                <li><a href="../classes/springroll.Game.html">springroll.Game</a></li>
                                <li><a href="../classes/springroll.GameContainer.html">springroll.GameContainer</a></li>
                                <li><a href="../classes/springroll.GroupHint.html">springroll.GroupHint</a></li>
                                <li><a href="../classes/springroll.HintPlayer.html">springroll.HintPlayer</a></li>
                                <li><a href="../classes/springroll.Language.html">springroll.Language</a></li>
                                <li><a href="../classes/springroll.ListTask.html">springroll.ListTask</a></li>
                                <li><a href="../classes/springroll.Loader.html">springroll.Loader</a></li>
                                <li><a href="../classes/springroll.LoaderQueueItem.html">springroll.LoaderQueueItem</a></li>
                                <li><a href="../classes/springroll.LoaderResult.html">springroll.LoaderResult</a></li>
                                <li><a href="../classes/springroll.LoadTask.html">springroll.LoadTask</a></li>
                                <li><a href="../classes/springroll.native.Circle.html">springroll.native.Circle</a></li>
                                <li><a href="../classes/springroll.native.DisplayAdapter.html">springroll.native.DisplayAdapter</a></li>
                                <li><a href="../classes/springroll.native.Ellipse.html">springroll.native.Ellipse</a></li>
                                <li><a href="../classes/springroll.native.NativeDisplay.html">springroll.native.NativeDisplay</a></li>
                                <li><a href="../classes/springroll.native.Point.html">springroll.native.Point</a></li>
                                <li><a href="../classes/springroll.native.Polygon.html">springroll.native.Polygon</a></li>
                                <li><a href="../classes/springroll.native.Rectangle.html">springroll.native.Rectangle</a></li>
                                <li><a href="../classes/springroll.PageVisibility.html">springroll.PageVisibility</a></li>
                                <li><a href="../classes/springroll.pixi.Animator.html">springroll.pixi.Animator</a></li>
                                <li><a href="../classes/springroll.pixi.AnimatorTimeline.html">springroll.pixi.AnimatorTimeline</a></li>
                                <li><a href="../classes/springroll.pixi.AssetManager.html">springroll.pixi.AssetManager</a></li>
                                <li><a href="../classes/springroll.pixi.Button.html">springroll.pixi.Button</a></li>
                                <li><a href="../classes/springroll.pixi.DisplayAdapter.html">springroll.pixi.DisplayAdapter</a></li>
                                <li><a href="../classes/springroll.pixi.DragManager.html">springroll.pixi.DragManager</a></li>
                                <li><a href="../classes/springroll.pixi.ParallelSpineData.html">springroll.pixi.ParallelSpineData</a></li>
                                <li><a href="../classes/springroll.pixi.PixiDisplay.html">springroll.pixi.PixiDisplay</a></li>
                                <li><a href="../classes/springroll.PixiTask.html">springroll.PixiTask</a></li>
                                <li><a href="../classes/springroll.Positioner.html">springroll.Positioner</a></li>
                                <li><a href="../classes/springroll.ProgressTracker.html">springroll.ProgressTracker</a></li>
                                <li><a href="../classes/springroll.ProgressTrackerError.html">springroll.ProgressTrackerError</a></li>
                                <li><a href="../classes/springroll.PropertyDispatcher.html">springroll.PropertyDispatcher</a></li>
                                <li><a href="../classes/springroll.SavedData.html">springroll.SavedData</a></li>
                                <li><a href="../classes/springroll.Sound.html">springroll.Sound</a></li>
                                <li><a href="../classes/springroll.SoundContext.html">springroll.SoundContext</a></li>
                                <li><a href="../classes/springroll.SoundInstance.html">springroll.SoundInstance</a></li>
                                <li><a href="../classes/springroll.SoundListTask.html">springroll.SoundListTask</a></li>
                                <li><a href="../classes/springroll.StateEvent.html">springroll.StateEvent</a></li>
                                <li><a href="../classes/springroll.StateManager.html">springroll.StateManager</a></li>
                                <li><a href="../classes/springroll.StringFilters.html">springroll.StringFilters</a></li>
                                <li><a href="../classes/springroll.Task.html">springroll.Task</a></li>
                                <li><a href="../classes/springroll.TaskEvent.html">springroll.TaskEvent</a></li>
                                <li><a href="../classes/springroll.TaskManager.html">springroll.TaskManager</a></li>
                                <li><a href="../classes/springroll.TimeUtils.html">springroll.TimeUtils</a></li>
                                <li><a href="../classes/springroll.TrackingGame.html">springroll.TrackingGame</a></li>
                                <li><a href="../classes/springroll.TrackingGameMedia.html">springroll.TrackingGameMedia</a></li>
                                <li><a href="../classes/springroll.UIElement.html">springroll.UIElement</a></li>
                                <li><a href="../classes/springroll.UIElementSettings.html">springroll.UIElementSettings</a></li>
                                <li><a href="../classes/springroll.UIScaler.html">springroll.UIScaler</a></li>
                                <li><a href="../classes/springroll.ValidationError.html">springroll.ValidationError</a></li>
                                <li><a href="../classes/springroll.VOHint.html">springroll.VOHint</a></li>
                                <li><a href="../classes/springroll.VOPlayer.html">springroll.VOPlayer</a></li>
                                <li><a href="../classes/window.Array.html">window.Array</a></li>
                                <li><a href="../classes/window.extend.html">window.extend</a></li>
                                <li><a href="../classes/window.include.html">window.include</a></li>
                                <li><a href="../classes/window.Math.html">window.Math</a></li>
                                <li><a href="../classes/window.namespace.html">window.namespace</a></li>
                                <li><a href="../classes/window.Object.html">window.Object</a></li>
                                <li><a href="../classes/window.String.html">window.String</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/Captions.html">Captions</a></li>
                                <li><a href="../modules/Container.html">Container</a></li>
                                <li><a href="../modules/Core.html">Core</a></li>
                                <li><a href="../modules/Debug.html">Debug</a></li>
                                <li><a href="../modules/EaselJS Animation.html">EaselJS Animation</a></li>
                                <li><a href="../modules/EaselJS Cutscene.html">EaselJS Cutscene</a></li>
                                <li><a href="../modules/EaselJS Display.html">EaselJS Display</a></li>
                                <li><a href="../modules/EaselJS Interface.html">EaselJS Interface</a></li>
                                <li><a href="../modules/EaselJS Tracking Game.html">EaselJS Tracking Game</a></li>
                                <li><a href="../modules/EaselJS Utilities.html">EaselJS Utilities</a></li>
                                <li><a href="../modules/Game.html">Game</a></li>
                                <li><a href="../modules/Hinting.html">Hinting</a></li>
                                <li><a href="../modules/Interface.html">Interface</a></li>
                                <li><a href="../modules/Native Display.html">Native Display</a></li>
                                <li><a href="../modules/PIXI Animation.html">PIXI Animation</a></li>
                                <li><a href="../modules/PIXI Display.html">PIXI Display</a></li>
                                <li><a href="../modules/PIXI Interface.html">PIXI Interface</a></li>
                                <li><a href="../modules/Progress Tracker.html">Progress Tracker</a></li>
                                <li><a href="../modules/Sound.html">Sound</a></li>
                                <li><a href="../modules/Tasks.html">Tasks</a></li>
                                <li><a href="../modules/Tracking Game.html">Tracking Game</a></li>
                                <li><a href="../modules/Translate.html">Translate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
            <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <script>
                        	var name = src/tracker/ProgressTracker.js      
                        </script>
                        <h1 class="file-heading">File:ProgressTracker.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /**
                         * @module Progress Tracker
                         * @namespace springroll
                         * @requires Core
                         */
                        (function($, undefined)
                        {
                        	//The event dispatcher
                        	var Application = include(&#x27;springroll.Application&#x27;),
                        		Debug = include(&#x27;springroll.Debug&#x27;, false),
                        		EventCatalog = include(&#x27;springroll.EventCatalog&#x27;),
                        		EventDispatcher = include(&#x27;springroll.EventDispatcher&#x27;),
                        		EventError = include(&#x27;springroll.EventError&#x27;),
                        		EventSignature = include(&#x27;springroll.EventSignature&#x27;),
                        		EventUtils = include(&#x27;springroll.EventUtils&#x27;),
                        		ProgressTrackerError = include(&#x27;springroll.ProgressTrackerError&#x27;),
                        		SavedData = include(&#x27;springroll.SavedData&#x27;),
                        		ValidationError = include(&#x27;springroll.ValidationError&#x27;);
                        
                        	/**
                        	 *  The base game class
                        	 *  @class ProgressTracker
                        	 *  @extends springroll.EventDispatcher
                        	 *  @constructor
                        	 *  @param {springroll.Application} app The application reference
                        	 *  @param {object} [spec] The event specification
                        	 *  @param {string} spec.gameId The GUID for the game
                        	 *  @param {int} spec.version  The API version for the game
                        	 *  @param {array} spec.events  The collection of valid API events
                        	 *  @param {boolean} [showTray=false] Show the documentation at init or false (dev build only!)
                        	 *  @param {object} [eventDictionary=null] The collection of game-specific APIs, this is a map
                        	 *         of the eventCode to the name of the API method
                        	 */
                        	var ProgressTracker = function(app, spec, showTray, eventDictionary)
                        	{
                        		EventDispatcher.call(this);
                        
                        		/**
                        		 *  Create a new instance of the event catalog
                        		 *  @property {springroll.EventCatalog} catalog
                        		 */
                        		this.catalog = new EventCatalog();
                        
                        		if (eventDictionary)
                        		{
                        			try
                        			{
                        				this.catalog.add(eventDictionary);
                        			}
                        			catch (e)
                        			{
                        				this._handleError(e);
                        			}
                        		}
                        
                        		if (DEBUG)
                        		{
                        			if ($ === undefined)
                        			{
                        				this._handleError(&#x27;jQuery is required for debug mode&#x27;);
                        				return;
                        			}
                        
                        			/**
                        			 *  The documentation dom element, development build only!
                        			 *  @property {Element} _tray
                        			 *  @private
                        			 */
                        			this._tray = $(&#x27;&lt;div class=&quot;pt-tray&quot;&gt;&#x27; +
                        				&#x27;&lt;h2&gt;Progress Tracker API  &lt;span class=&quot;pt-version&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#x27; +
                        				&#x27;&lt;/div&gt;&#x27;);
                        
                        			/**
                        			 *  The toggle handle dom element, development build only!
                        			 *  @property {Element} _handle
                        			 *  @private
                        			 */
                        			this._handle = $(&#x27;&lt;button class=&quot;pt-handle&quot;&gt;&lt;/button&gt;&#x27;);
                        
                        			// Match the last position of the PT tray.
                        			// ie Start with the tray open (&#x27;pt-tray-show&#x27;) when reloading 
                        			// or returning to the game.
                        			var defaultTrayPosition = SavedData.read(&#x27;pt-tray-show&#x27;) ?
                        				&#x27;pt-tray-show&#x27; :
                        				&#x27;pt-tray-hide&#x27;;
                        			
                        			/**
                        			 *  The body dom element, development build only!
                        			 *  @property {Element} _body
                        			 *  @private
                        			 */
                        			this._body = $(&quot;body&quot;).append(this._tray, this._handle)
                        				.addClass(defaultTrayPosition);
                        
                        			this._handle.click(this.toggleDocs.bind(this));
                        
                        			this.showTray = !!showTray;
                        		}
                        
                        		/**
                        		 *  The collection of timers
                        		 *  @property {object} _timers
                        		 *  @private
                        		 */
                        		this._timers = {};
                        
                        		//Add the spec, can be added later
                        		this.spec = spec || null;
                        
                        		/**
                        		 *  The reference to the application
                        		 *  @property {springroll.Application} _app
                        		 *  @private
                        		 */
                        		this._app = app;
                        
                        		/**
                        		 *  The saved feedback or instructions
                        		 *  @property {Object} _feedback
                        		 *  @private
                        		 */
                        		this._feedback = null;
                        
                        		/**
                        		 *  The saved data for movie events
                        		 *  @property {Object} _movie
                        		 *  @private
                        		 */
                        		this._movie = null;
                        
                        		/**
                        		 *  The collection of api methods called
                        		 *  @property {array} _history
                        		 *  @private
                        		 */
                        		this._history = [];
                        
                        		/**
                        		 *  The current level number if support, null if unsupported
                        		 *  @property {int} _round
                        		 *  @private
                        		 *  @default null
                        		 */
                        		this._level = null;
                        
                        		/**
                        		 *  The current round number if support, null if unsupported
                        		 *  @property {int} _round
                        		 *  @private
                        		 *  @default null
                        		 */
                        		this._round = null;
                        
                        		//Add event to handle the internal timers
                        		updateTimers = updateTimers.bind(this);
                        		app.on(&#x27;update&#x27;, updateTimers);
                        
                        		//Add a listeners for called
                        		this.on(CALLED, this._onCalled.bind(this));
                        	};
                        
                        	/**
                        	 *  If the progress tracker should throw errors
                        	 *  @property {Boolean} throwErrors
                        	 *  @static
                        	 */
                        	ProgressTracker.throwErrors = false;
                        
                        	//Reference to the prototype
                        	var s = EventDispatcher.prototype;
                        	var p = extend(ProgressTracker, EventDispatcher);
                        
                        	/**
                        	 *  An event is tracked
                        	 *  @event track
                        	 *  @param {object} data The event data
                        	 *  @param {string} data.game_id The unique game id
                        	 *  @param {string} data.event_id The unique event id
                        	 *  @param {object} data.event_data The data attached to event
                        	 *  @param {int} data.event_data.event_code The code of the event
                        	 */
                        	var TRACK = &#x27;track&#x27;;
                        
                        	/**
                        	 *  An api method was called, this happens before any validation
                        	 *  @event called
                        	 *  @param {string} api The name of the api method called
                        	 */
                        	var CALLED = &#x27;called&#x27;;
                        
                        	/**
                        	 *  Handle errors
                        	 *  @method _handleError
                        	 *  @private
                        	 *  @param {Error} error The error to handle
                        	 *  @return {[type]}       [description]
                        	 */
                        	p._handleError = function(error)
                        	{
                        		try
                        		{
                        			if (typeof error === &quot;string&quot;)
                        			{
                        				error = new ProgressTrackerError(error);
                        			}
                        			throw error;
                        		}
                        		catch (e)
                        		{
                        			if (DEBUG)
                        			{
                        				if (e instanceof ValidationError)
                        				{
                        					this._showError(e.message, e.api, e.property);
                        				}
                        				else if (e instanceof EventError)
                        				{
                        					this._showError(e.message, e.api);
                        				}
                        				if (Debug)
                        				{
                        					Debug.error(error.toString());
                        					Debug.error(error.stack);
                        				}
                        			}
                        			if (ProgressTracker.throwErrors)
                        			{
                        				throw e;
                        			}
                        		}
                        	};
                        
                        	/**
                        	 *  The tracking specification
                        	 *  @property {object} spec
                        	 *  @property {string} spec.gameId
                        	 *  @property {int} spec.version
                        	 *  @property {array} spec.events
                        	 */
                        	Object.defineProperty(p, &quot;spec&quot;,
                        	{
                        		set: function(spec)
                        		{
                        			this._spec = spec;
                        
                        			if (spec)
                        			{
                        				var api, args, eventData, eventCode;
                        				for (eventCode in spec.events)
                        				{
                        					api = this.catalog.events[eventCode];
                        
                        					if (!api)
                        					{
                        						api = &#x27;event&#x27; + eventCode;
                        						this.catalog.events[eventCode] = api;
                        					}
                        
                        					eventData = spec.events[eventCode];
                        
                        					//Create the dynamic API method based on the
                        					//arguments found in the spec event data
                        					if (this[api] === undefined)
                        					{
                        						this[api] = this._specTrack.bind(this, api);
                        						args = eventData.args;
                        					}
                        					//Allow for a staticly defined override
                        					else
                        					{
                        						args = EventCatalog.args[eventCode];
                        					}
                        
                        					//Create a new signature for the api call
                        					var signature = new EventSignature(
                        						eventCode,
                        						api,
                        						args,
                        						eventData.args,
                        						eventData.info
                        					);
                        
                        					this[api].signature = signature;
                        
                        					if (DEBUG)
                        					{
                        						this._tray.append(signature.docs());
                        					}
                        				}
                        				//Populate the tray with some information
                        				if (DEBUG)
                        				{
                        					$(&quot;.pt-version&quot;).text(spec.version);
                        					$(&quot;.pt-api&quot;).click(this._toggleRowCollapse.bind(this));
                        				}
                        			}
                        		}
                        	});
                        
                        	if (DEBUG)
                        	{
                        		/**
                        		 *  When clicking on a method name
                        		 *  @method _toggleRowCollapse
                        		 *  @private
                        		 *  @param {event} e The click event
                        		 */
                        		p._toggleRowCollapse = function(e)
                        		{
                        			$(e.currentTarget).parent().toggleClass(&#x27;collapsed&#x27;);
                        		};
                        
                        		/**
                        		 *  Toogle the display of the documentation
                        		 *  @method toggleDocs
                        		 */
                        		p.toggleDocs = function()
                        		{
                        			var show = !this._body.hasClass(&#x27;pt-tray-show&#x27;);
                        			this._body.removeClass(&#x27;pt-tray-show pt-tray-hide&#x27;)
                        				.addClass(show ? &#x27;pt-tray-show&#x27; : &#x27;pt-tray-hide&#x27;);
                        
                        			//remember the position of the tray for this session
                        			SavedData.write(&#x27;pt-tray-show&#x27;, show);
                        
                        			this._app.triggerResize();
                        		};
                        
                        		/**
                        		 *  Show the documentation panel, development build only!
                        		 *  @property {boolean} showTray
                        		 */
                        		Object.defineProperty(p, &#x27;showTray&#x27;,
                        		{
                        			set: function(show)
                        			{
                        				this._tray.hide();
                        				if (show)
                        				{
                        					this._tray.show();
                        				}
                        			}
                        		});
                        	}
                        
                        	if (RELEASE)
                        	{
                        		//Set-up public methods for release build
                        		//so that the API stays consistent
                        		p.toggleDocs = function()
                        		{
                        			this._handleError(&quot;toggleDocs only available in dev build&quot;);
                        		};
                        
                        		Object.defineProperty(p, &#x27;showTray&#x27;,
                        		{
                        			set: function(show)
                        			{
                        				this._handleError(&quot;showTray setter only available in dev build&quot;);
                        			}
                        		});
                        	}
                        
                        	/**
                        	 *  Convenience function for measuring the duration which is common
                        	 *  for many events. These timers respect the application being paused
                        	 *  and should be use instead of implementing Date.now() or some other
                        	 *  Date-based method.
                        	 *  @method startTimer
                        	 *  @param {string} alias A unique alias for this timer
                        	 */
                        	p.startTimer = function(alias)
                        	{
                        		if (this._timers[alias] !== undefined)
                        		{
                        			this._handleError(&quot;Timer exists matching &#x27;&quot; + alias + &quot;&#x27;, call stopTimer first&quot;);
                        			return;
                        		}
                        		this._timers[alias] = 0;
                        	};
                        
                        	/**
                        	 *  Check the current progress of a timer, this will not destory the timer
                        	 *  @method pollTimer
                        	 *  @param {string} alias The unique alias for this timer
                        	 *  @return {int} The timer in milliseconds
                        	 */
                        	p.pollTimer = function(alias)
                        	{
                        		if (this._timers[alias] === undefined)
                        		{
                        			this._handleError(&quot;Timer doesn&#x27;t exist matching &#x27;&quot; + alias + &quot;&#x27;&quot;);
                        			return;
                        		}
                        		return this._timers[alias] | 0;
                        	};
                        
                        	/**
                        	 *  Get the amount of time since the start of the game
                        	 *  @method gameTime
                        	 *  @return {int} The time since the beginning of the game in milliseconds
                        	 */
                        	p.gameTime = function()
                        	{
                        		return this.pollTimer(&#x27;_game&#x27;);
                        	};
                        
                        	/**
                        	 *  Stop a timer and get the final duration to send with an event. This
                        	 *  will clean-up and discard the timer and it can&#x27;t be used again.
                        	 *  @method stopTimer
                        	 *  @param {string} alias The unique alias for this timer
                        	 *  @return {int} The timer in milliseconds
                        	 */
                        	p.stopTimer = function(alias)
                        	{
                        		var duration = this.pollTimer(alias);
                        		this.removeTimer(alias);
                        		return duration;
                        	};
                        
                        	/**
                        	 *  This will clean-up and discard the timer and it can&#x27;t be used again.
                        	 *  @method removeTimer
                        	 *  @param {string} alias The unique alias for this timer
                        	 */
                        	p.removeTimer = function(alias)
                        	{
                        		if (this._timers[alias] !== undefined)
                        		{
                        			delete this._timers[alias];
                        		}
                        	};
                        
                        	/**
                        	 *  Handle the frame update
                        	 *  @method updateTimers
                        	 *  @private
                        	 *  @param {int} elapsed The number of milliseconds since the last update
                        	 */
                        	var updateTimers = function(elapsed)
                        	{
                        		for (var alias in this._timers)
                        		{
                        			this._timers[alias] += elapsed;
                        		}
                        	};
                        
                        	/**
                        	 *  Override for start game event
                        	 *  @method startGame
                        	 */
                        	p.startGame = function()
                        	{
                        		var sign = this.startGame.signature;
                        
                        		//make sure signature exists
                        		if (!sign)
                        		{
                        			this._handleError(&quot;startGame: signature is undefined&quot;);
                        			return;
                        		}
                        
                        		//Initialize the round
                        		if (sign.hasProperty(&#x27;round&#x27;, true))
                        		{
                        			this._round = 0;
                        		}
                        
                        		//Initialize the level
                        		if (sign.hasProperty(&#x27;level&#x27;, true))
                        		{
                        			this._level = 0;
                        		}
                        
                        		//Reset the history on start game
                        		this._history.length = 0;
                        		this._history.push(&#x27;startGame&#x27;);
                        
                        		this.startTimer(&#x27;_game&#x27;);
                        		this._track(&#x27;startGame&#x27;,
                        		{
                        			version: this._spec.version
                        		});
                        	};
                        
                        	/**
                        	 *  Override for the end game event
                        	 *  @method endGame
                        	 *  @param {string} [exitType] The exit type for certain games
                        	 */
                        	p.endGame = function(exitType)
                        	{
                        		var sessionDuration = this.gameTime();
                        		var signature = this.endGame.signature;
                        
                        		if (exitType &amp;&amp; signature.hasProperty(&#x27;exit_type&#x27;, true))
                        		{
                        			this._track(&#x27;endGame&#x27;,
                        			{
                        				session_duration: sessionDuration,
                        				exit_type: exitType
                        			});
                        		}
                        		else
                        		{
                        			this._track(&#x27;endGame&#x27;,
                        			{
                        				session_duration: sessionDuration
                        			});
                        		}
                        
                        		//Reset the history on start game
                        		this._history.length = 0;
                        	};
                        
                        	/**
                        	 *  Basic method for starting a feedback or instruction
                        	 *  @method _startFeedback
                        	 *  @private
                        	 *  @param {string} api     The event method to call
                        	 *  @param {string} description   Description of the instruction
                        	 *  @param {string} identifier    A unique identifier
                        	 *  @param {string} mediaType     Either audio animation or other
                        	 *  @param {int} totalDuration The estimated time of instruction in milliseconds
                        	 */
                        	p._startFeedback = function(api, description, identifier, mediaType, totalDuration)
                        	{
                        		if (this._feedback)
                        		{
                        			this._handleError(&quot;Feedback or instruction already started, stop it first&quot;);
                        			return;
                        		}
                        		var feedback = {
                        			media_type: mediaType,
                        			description: description,
                        			identifier: identifier,
                        			total_duration: totalDuration
                        		};
                        		this._track(api, feedback);
                        		this.startTimer(&#x27;_feedback&#x27;);
                        		this._feedback = feedback;
                        	};
                        
                        	/**
                        	 *  Basic method for starting a feedback or instruction
                        	 *  @method _startFeedback
                        	 *  @private
                        	 *  @param {string} api The event method to call
                        	 */
                        	p._endFeedback = function(api)
                        	{
                        		var feedback = this._feedback;
                        		if (!feedback)
                        		{
                        			this._handleError(&quot;Feedback or instruction not found, start it first&quot;);
                        			return;
                        		}
                        		delete feedback.total_duration;
                        		feedback.duration = this.stopTimer(&#x27;_feedback&#x27;);
                        		this._feedback = null;
                        		this._track(api, feedback);
                        	};
                        
                        	/**
                        	 *  Start the system initiated instruction
                        	 *  @method startInstruction
                        	 *  @param {string} description The text description of the instruction
                        	 *  @param {string} identifier A unique identifier for this peice of instruction
                        	 *  @param {string} mediaType The type of media, audio animation or other
                        	 *  @param {int} total_duration The estimated duration of the media in milliseconds
                        	 */
                        	p.startInstruction = function(description, identifier, mediaType, totalDuration)
                        	{
                        		this._startFeedback(&#x27;startInstruction&#x27;, description, identifier, mediaType, totalDuration);
                        	};
                        
                        	/**
                        	 *  End the system initiated instruction
                        	 *  @method endInstruction
                        	 */
                        	p.endInstruction = function()
                        	{
                        		if (!this.requires || !this.requires(&#x27;startInstruction&#x27;)) return;
                        		this._endFeedback(&#x27;endInstruction&#x27;);
                        	};
                        
                        	/**
                        	 *  Start the incorrect feedback
                        	 *  @method startIncorrectFeedback
                        	 *  @param {string} description The text description of the instruction
                        	 *  @param {string} identifier A unique identifier for this peice of instruction
                        	 *  @param {string} mediaType The type of media, audio animation or other
                        	 *  @param {int} total_duration The estimated duration of the media in milliseconds
                        	 */
                        	p.startIncorrectFeedback = function(description, identifier, mediaType, totalDuration)
                        	{
                        		this._startFeedback(&#x27;startIncorrectFeedback&#x27;, description, identifier, mediaType, totalDuration);
                        	};
                        
                        	/**
                        	 *  End the incorrect feedback
                        	 *  @method endIncorrectFeedback
                        	 */
                        	p.endIncorrectFeedback = function()
                        	{
                        		if (!this.requires || !this.requires(&#x27;startIncorrectFeedback&#x27;)) return;
                        		this._endFeedback(&#x27;endIncorrectFeedback&#x27;);
                        	};
                        
                        	/**
                        	 *  Start the correct feedback event
                        	 *  @method startCorrectFeedback
                        	 *  @param {string} description The text description of the instruction
                        	 *  @param {string} identifier A unique identifier for this peice of instruction
                        	 *  @param {string} mediaType The type of media, audio animation or other
                        	 *  @param {int} total_duration The estimated duration of the media in milliseconds
                        	 */
                        	p.startCorrectFeedback = function(description, identifier, mediaType, totalDuration)
                        	{
                        		this._startFeedback(
                        			&#x27;startCorrectFeedback&#x27;,
                        			description,
                        			identifier,
                        			mediaType,
                        			totalDuration
                        		);
                        	};
                        
                        	/**
                        	 *  End the correct feedback event
                        	 *  @method endCorrectFeedback
                        	 */
                        	p.endCorrectFeedback = function()
                        	{
                        		if (!this.requires || !this.requires(&#x27;startCorrectFeedback&#x27;)) return;
                        		this._endFeedback(&#x27;endCorrectFeedback&#x27;);
                        	};
                        
                        	/**
                        	 *  The movie started
                        	 *  @method startMovie
                        	 *  @param {string} movieId The identifier for the movie that&#x27;s playing
                        	 *  @param {int} duration  The duration of the media playback in milliseconds
                        	 *  @param {string} description The text or description of the instruction
                        	 */
                        	p.startMovie = function(movieId, duration, description)
                        	{
                        		if (this._movie)
                        		{
                        			this._handleError(&quot;Movie is already started called skipMovie or endMovie first&quot;);
                        			return;
                        		}
                        		this._movie = {
                        			movie_id: movieId,
                        			duration: duration,
                        			description: description
                        		};
                        		this.startTimer(&#x27;_movie&#x27;);
                        		this._track(&#x27;startMovie&#x27;, this._movie);
                        	};
                        
                        	/**
                        	 *  The user decided to skip the movie playback by clicking a skip button
                        	 *  @method skipMovie
                        	 */
                        	p.skipMovie = function()
                        	{
                        		if (!this.requires || !this.requires(&#x27;startMovie&#x27;)) return;
                        
                        		var movie = this._movie;
                        		if (!movie)
                        		{
                        			this._handleError(&quot;No movie started, call startMovie first&quot;);
                        			return;
                        		}
                        		movie.time_played = this.stopTimer(&#x27;_movie&#x27;);
                        		this._movie = null;
                        		this._track(&#x27;skipMovie&#x27;, movie);
                        	};
                        
                        	/**
                        	 *  The movie ended
                        	 *  @method endMovie
                        	 */
                        	p.endMovie = function()
                        	{
                        		if (!this.requires || !this.requires(&#x27;startMovie&#x27;)) return;
                        
                        		var data = this._movie;
                        		if (!data)
                        		{
                        			this._handleError(&quot;No movie started, call startMovie first&quot;);
                        			return;
                        		}
                        		this.removeTimer(&#x27;_movie&#x27;);
                        		var movie = this._movie;
                        		this._movie = null;
                        		this._track(&#x27;endMovie&#x27;, movie);
                        	};
                        
                        	/**
                        	 *  Handler when an api is called
                        	 *  @method _onCalled
                        	 *  @private
                        	 *  @param {string} api The name of the API method called
                        	 */
                        	p._onCalled = function(api)
                        	{
                        		if (api === &#x27;startRound&#x27; &amp;&amp; this._round !== null)
                        		{
                        			this._round++;
                        		}
                        		else if (api === &#x27;startLevel&#x27; &amp;&amp; this._level !== null)
                        		{
                        			this._level++;
                        		}
                        	};
                        
                        	/**
                        	 *  Generic method to track an event based on the spec, the arguments
                        	 *  mirror the arguments in the event spec.
                        	 *  @method _specTrack
                        	 *  @private
                        	 *  @param {string} api The name of the api
                        	 *  @param {*} [...extraArgs] The Additional arguments
                        	 */
                        	p._specTrack = function(api)
                        	{
                        		var signature = this[api].signature,
                        			data = null;
                        
                        		try
                        		{
                        			data = EventUtils.argsMap(
                        				signature.args,
                        				Array.prototype.slice.call(arguments, 1)
                        			);
                        		}
                        		catch (error)
                        		{
                        			if (error instanceof EventError)
                        			{
                        				error.api = api;
                        				error.eventCode = this.catalog.lookup(api);
                        				error.signature = signature;
                        			}
                        			this._handleError(error);
                        			return;
                        		}
                        
                        		//Now we have a formatted data object, pass to the track method
                        		this._track(api, data);
                        	};
                        	
                        	/**
                        	 *  Generic method to track an event based on the spec, the arguments
                        	 *  mirror the arguments in the event spec.
                        	 *  @method _track
                        	 *  @private
                        	 *  @param {string} api The name of the api
                        	 *  @param {object} [input] The collection of argument values
                        	 */
                        	p._track = function(api, input)
                        	{
                        		if (!this.requires || !this.requires(&#x27;startGame&#x27;)) return;
                        
                        		var eventCode = this.catalog.lookup(api),
                        			eventData = this._spec.events[eventCode],
                        			signature = this[api].signature,
                        			data = null;
                        
                        		//Check that the event code is valid on this spec
                        		if (eventData === undefined)
                        		{
                        			this._handleError(new EventError(&quot;Supplied event code is invalid&quot;, eventCode, api));
                        			return;
                        		}
                        
                        		try
                        		{
                        			//Validate the specification arguments against the input
                        			data = EventUtils.validate(
                        				signature.eventArgs,
                        				input
                        			);
                        		}
                        		catch (error)
                        		{
                        			if (error instanceof EventError)
                        			{
                        				error.api = api;
                        				error.eventCode = eventCode;
                        				error.signature = signature;
                        			}
                        			this._handleError(error);
                        			return;
                        		}
                        
                        		//Trigger the called event, validation checked out
                        		this.trigger(CALLED, api);
                        
                        		//If we&#x27;re using the concept of levels, add it
                        		if (this._level !== null)
                        		{
                        			data.level = this._level;
                        		}
                        
                        		//If we&#x27;re using the concept of rounds, add it
                        		if (this._round !== null)
                        		{
                        			data.round = this._round;
                        		}
                        
                        		//Get the current game time since the start
                        		//this gets applyed to all events being sent
                        		data.game_time = this.gameTime();
                        
                        		//Add the event code to the data
                        		data.event_code = parseInt(eventCode);
                        
                        		if (DEBUG)
                        		{
                        			$(&quot;#pt-api-&quot; + api).addClass(&#x27;success&#x27;);
                        		}
                        
                        		//Key track of the tracking history
                        		//so we can do a history check
                        		//using requires
                        		this._history.push(api);
                        
                        		//Trigger an event where the event is the API
                        		//and the parameter is the event data
                        		this.trigger(api, data);
                        
                        		//Dispatch the tracking event here
                        		this.trigger(
                        			TRACK,
                        			{
                        				game_id: this._spec.gameId,
                        				event_id: eventData.id,
                        				event_data: data
                        			}
                        		);
                        	};
                        
                        	if (DEBUG)
                        	{
                        		/**
                        		 *  Display an error in the tray
                        		 *  @method _showError
                        		 *  @private
                        		 *  @param {string} message The message to log
                        		 *  @param {string} api      The name of the api
                        		 *  @param {string} [property] Optional property
                        		 */
                        		p._showError = function(message, api, property)
                        		{
                        			var container = $(&quot;#pt-api-&quot; + api)
                        				.addClass(&#x27;error&#x27;)
                        				.removeClass(&#x27;collapsed&#x27;);
                        
                        			message = &#x27;&lt;span class=&quot;pt-api-alert&quot;&gt;&#x27; + message + &#x27;&lt;/span&gt;&#x27;;
                        
                        			// Add the erroring to the property specifically
                        			if (property)
                        			{
                        				container.find(&quot;.arg-&quot; + property)
                        					.addClass(&#x27;error&#x27;)
                        					.prepend(message);
                        			}
                        			// Add the error message to the container
                        			else
                        			{
                        				container.find(&#x27;.pt-api&#x27;).after(message);
                        			}	
                        		};
                        	}
                        
                        	/**
                        	 *  Require that an api has been called
                        	 *  @method requires
                        	 *  @param {String} api The names of the method or API call
                        	 *  @return {Boolean} If the api was called before
                        	 */
                        	p.requires = function(api)
                        	{
                        		if (this._history.indexOf(api) === -1)
                        		{
                        			this._handleError(&quot;ProgressTracker API &#x27;&quot; + api + &quot;&#x27; needs to be called first&quot;);
                        			return false;
                        		}
                        		return true;
                        	};
                        
                        	/**
                        	 *  Don&#x27;t use after this
                        	 *  @method destroy
                        	 */
                        	p.destroy = function()
                        	{
                        		if (this._app)
                        		{
                        			this._app.off(&#x27;update&#x27;, updateTimers);
                        		}
                        
                        		if (this.catalog)
                        		{
                        			this.catalog.destroy();
                        			this.catalog = null;
                        		}
                        
                        		this.off(CALLED);
                        
                        		if (DEBUG)
                        		{
                        			this._handle.remove();
                        			this._tray.remove();
                        			this._handle = null;
                        			this._tray = null;
                        			this._body = null;
                        		}
                        		this._app = null;
                        		this._timers = null;
                        		this._spec = null;
                        		this._history = null;
                        		this._movie = null;
                        		this._feedback = null;
                        
                        		s.destroy.call(this);
                        	};
                        
                        	//Assign to namespace
                        	namespace(&#x27;springroll&#x27;).ProgressTracker = ProgressTracker;
                        
                        }(window.jQuery));
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>