<!DOCTYPE html>
<html>
	<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Interface Example</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="assets/css/main.css">

        <!-- Examples dependencies, these are only necessary for examples -->
        <link rel="stylesheet" href="../components/google-code-prettify/bin/prettify.min.css">
		<script src="../components/google-code-prettify/bin/prettify.min.js"></script>
		<script src="../components/google-code-prettify/bin/run_prettify.min.js"></script>
		<script src="assets/js/examples.js"></script>

        <!-- External dependencies -->
		<script src="../components/tweenjs/lib/tweenjs.min.js"></script>
		<script src="../components/easeljs/lib/easeljs.combined.js"></script>
		<script src="../components/preloadjs/lib/preloadjs.min.js"></script>

		<!-- Library and modules -->
		<script src="../dist/core.js"></script>	
		<script src="../dist/modules/tasks.js"></script>
		<script src="../dist/modules/interface.js"></script>
		<script src="../dist/modules/display-createjs.js"></script>

    </head>
    <body class="fullscreen">
		<div id="content" class="canvas">
			<nav>
				<button id="canvas">Application</button>
				<button id="code">Code</button>
				<button id="back">Back</button>
			</nav>
			<div id="framerate">FPS: 00.000</div>
			<div id="stageContainer">
				<canvas id="stage" width="800" height="500"></canvas>
			</div>
			<pre id="codeDisplay"></pre>
<script>

var Application = include('cloudkid.Application'),
	Loader = include('cloudkid.Loader'),
	UIScaler = include('cloudkid.UIScaler'),
	Button = include('cloudkid.createjs.Button'),
	LoadTask = include('cloudkid.LoadTask'),
	TaskManager = include('cloudkid.TaskManager'),
	CreateJSDisplay = include('cloudkid.CreateJSDisplay');

// Create the new application
var app = new Application({
	resizeElement : "stageContainer",
	framerate: "framerate",
	canvasId: "stage",
	display: CreateJSDisplay,
	displayOptions: {
		clearView: true // clear the stage on render
	}
});

// The UI elements by name
var items = {
	playButton : {
		x : 10,
		y : 10,
		align: 'top-left',
		minScale: 0.6,
		maxScale: 1.2 
	},
	closeButton : {
		x : 660,
		y : 10,
		align: 'top-right',
		titleSafe: true
	}
};

// The original designed size of the art
var designedSize = { 
	width: 800,
	height: 500,
	maxWidth: 1000 // optional, to allow responsive design
};

// Wait until the app is ready
app.on('init', function(){

	// the images
	var images = {},
		stage = app.display.stage;

	// Callback when an image is loaded
	var onImageLoaded = function(result, task)
	{
		images[task.id] = result.content;
	};

	// Preload some images
	TaskManager.process([
		new LoadTask('background', 'assets/images/background.jpg', onImageLoaded),
		new LoadTask('button', 'assets/images/button.png', onImageLoaded)
	], function()
	{
		// Add the background to the stage 
		var background = new createjs.Bitmap(images.background);

		// Create and add some buttons
		stage.playButton = new Button(images.button, {
			text: 'Play',
			font: "16px Arial",
			color: "#ffffff"
		});

		stage.closeButton = new Button(images.button, {
			text: 'Close',
			font: "16px Arial",
			color: "#ffffff"
		});

		stage.addChild(background);
		stage.addChild(stage.playButton);
		stage.addChild(stage.closeButton);

		var scaler = new UIScaler(stage, designedSize, items);

		// Add the background to the scaler
		scaler.addBackground(background);

		// Manually call resize
		app.triggerResize();
	});
});

</script>
		</div>
    </body>
</html>