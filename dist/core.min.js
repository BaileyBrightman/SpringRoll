/*! SpringRoll 0.0.7 */
!function(){"use strict";!function(a){if(!("namespace"in a)){var b=function(b){for(var c=b.split("."),d=a,e="",f=0,g=c.length;g>f;f++)e=c[f],d[e]=d[e]||{},d=d[e];return d};a.namespace=b}}(window),function(a,b){if(!("include"in a)){var c=function(c,d){var e=c.split("."),f=a,g="";d=d!==b?!!d:!0;for(var h=0,i=e.length;i>h;h++){if(g=e[h],!f[g]){if(!d)return null;throw"Unable to include '"+c+"'"}f=f[g]}return f};a.include=c}}(window),function(a){"extend"in a||(a.extend=function(b,c){return"string"==typeof c&&(c=a.include(c)),b.prototype=Object.create(c.prototype),b.prototype})}(window),function(a,b){a.merge=function(b,c){"object"!=typeof b&&(b={});for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if("object"==typeof e&&a.isPlain(e)){b[d]=a.merge(b[d],e);continue}b[d]=e}for(var f=2,g=arguments.length;g>f;f++)a.merge(b,arguments[f]);return b},a.isPlain=function(a){var c;if(!a||"object"!=typeof a||a.nodeType||a===window)return!1;try{if(a.constructor&&!hasOwn.call(a,"constructor")&&!hasOwn.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(support.ownLast)for(c in a)return hasOwn.call(a,c);for(c in a);return c===b||hasOwn.call(a,c)},a.prototype.clone||a.defineProperty(a.prototype,"clone",{enumerable:!1,writable:!0,value:function(){var a={},b=this;for(var c in b)a[c]=b[c];return a}})}(Object),function(){var a=function(a,b,c){this.name=a,this._value=b,this._toString=c||this.name};Object.defineProperty(a.prototype,"asInt",{get:function(){return this._value}}),a.prototype.toString=function(){return this._toString};var b=function(){var b=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);Object.defineProperty(this,"_byValue",{enumerable:!1,writable:!1,value:[]});var c,d,e,f,g=0,h=b.length;for(d=0;h>d;++d){if("string"==typeof b[d]){if(f=b[d],this[f]){Debug.error("Error creating enum value "+f+": "+e+" - an enum value already exists with that name.");continue}c=new a(f,g,f),this[c.name]=c,this._byValue[g]?Array.isArray(this._byValue[g])?this._byValue[g].push(c):this._byValue[g]=[this._byValue[g],c]:this._byValue[g]=c}else{if(f=b[d].name,e=b[d].value||g,this[f]){Debug.error("Error creating enum value "+f+": "+e+" - an enum value already exists with that name.");continue}c=new a(f,e,b[d].toString||f),this[c.name]=c,this._byValue[e]?Array.isArray(this._byValue[e])?this._byValue[e].push(c):this._byValue[e]=[this._byValue[e],c]:this._byValue[e]=c,g=e}g++}};Object.defineProperty(b.prototype,"valueFromInt",{enumerable:!1,writable:!1,value:function(a){var b=this._byValue[a];return b?Array.isArray(b)?b[0]:b:null}}),namespace("springroll").Enum=b}(),function(a,b){function c(a){var b="color:"+a;return function(a){if(arguments.length>1){var c=e.call(arguments);if("object"==typeof c[0])c.unshift(b),c.unshift("%c%o");else{var d="%c"+c[0];c[0]=b,c.unshift(d)}return f.log.apply(f,c)}return"object"==typeof arguments[0]?f.log("%c%o",b,a):f.log("%c"+a,b)}}var d=include("springroll.Enum"),e=Array.prototype.slice,f={},g=a.console!==b,h=document.documentMode===b,i="DEBUG";if(g)try{console.assert.apply(console,[!0,"IE9 test"])}catch(j){for(var k,l=Function.prototype.bind,m=["log","debug","warn","info","error","assert","dir","trace","group","groupCollapsed","groupEnd"],n=0;n<m.length;n++)k=m[n],console[k]&&(console[k]=l.call(console[k],console))}var o=f.Levels=new d("GENERAL",i,"INFO","WARN","ERROR");f.minLogLevel=o.GENERAL,f.enabled=!0,f.output=null;var p=1026,q=!1,r=null,s=null,t=null,u={},v=["log","debug","warn","info","error","assert","dir","trace","group","groupCollapsed","groupEnd","_remoteLog","globalErrorHandler","navy","blue","aqua","teal","olive","green","lime","yellow","orange","red","pink","purple","maroon","silver","gray"],w=/(:\d+)+/;f.connect=function(b){if(!("WebSocket"in a||"MozWebSocket"in a))return!1;a.WebSocket=WebSocket||MozWebSocket;try{r=new WebSocket("ws://"+b+":"+p),r.onopen=x,r.onclose=y,r.onerror=y,t=[],q=!0}catch(c){return!1}return!0},f.disconnect=function(){q&&(r.close(),y())};var x=function(){a.onerror=u.globalErrorHandler,s={level:"session",message:"",stack:null,time:0},r.send(JSON.stringify(s));for(var b=0,c=t.length;c>b;++b)r.send(JSON.stringify(t[b]));t=null};u.globalErrorHandler=function(a,b,c,d,e){return f._remoteLog(a,o.ERROR,e?e.stack:null),!1};var y=function(){a.onerror=null,q=!1,r.onopen=null,r.onmessage=null,r.onclose=null,r.onerror=null,r=null,s=null,t=null},z=function(a,b){f.output&&(f.output.innerHTML+='<div class="'+a+'">'+b+"</div>")};f._remoteLog=function(a,b,c){b=b||o.GENERAL,Array.isArray(a)||(a=[a]),a=e.call(a);var d,g;for(d=0,g=a.length;g>d;d++)if("object"==typeof a[d])try{a[d]=B(a[d],3)}catch(h){a[d]=String(a[d])}c||(c=(new Error).stack),c=c?c.split("\n"):[];var i,j,k,l,m,n,p=-1,q=!0;for(d=0,g=c.length;g>d;++d){var u=c[d].trim();if(u)if("Error"==u||u.indexOf("Error:")>-1)p=d;else{if(u.indexOf("@")>-1){if(i=u.indexOf("@"),j=u.substring(0,i),m=-1!=j.indexOf(".")?j.substring(j.lastIndexOf(".")+1):j,q&&-1!=v.indexOf(m)){p=d;continue}k=u.substring(i+1)}else{if(i=u.indexOf("("),j=u.substring(3,i-1),m=-1!=j.indexOf(".")?j.substring(j.lastIndexOf(".")+1):j,q&&-1!=v.indexOf(m)){p=d;continue}k=u.substring(i+1,u.length-2)}n=w.exec(k),k=k.substring(0,n.index),l=n[0].substring(1),q=!1,c[d]={"function":j||"<anonymous>",file:k,lineLocation:l}}else if(d==g-1){c.pop();break}}if(p>=0&&(c=c.slice(p+1)),t)t.push({message:a,level:b.name,stack:c,time:Date.now()});else{s.level=b.name,s.message=a,s.stack=c,s.time=Date.now();var x;try{x=JSON.stringify(s)}catch(h){s.message=["[circular object]"],x=JSON.stringify(s)}r.send(x)}return f};var A=[],B=function(a,b,c){if(Array.isArray(a))return a;c=c||0,0===c&&(A.length=0),A.push(a);var d={};for(var e in a){var f=a[e];if(f instanceof Window||f instanceof Document||f instanceof HTMLElement||"document"==e||"window"==e||"ownerDocument"==e||"view"==e||"target"==e||"currentTarget"==e||"originalTarget"==e||"explicitOriginalTarget"==e||"rangeParent"==e||"srcElement"==e||"relatedTarget"==e||"fromElement"==e||"toElement"==e){if(f instanceof HTMLElement){var g;g="<"+f.tagName,f.id&&(g+=" id='"+f.id+"'"),f.className&&(g+=" class='"+f.className+"'"),d[e]=g+" />"}}else switch(typeof f){case"object":d[e]=c>b||A.indexOf(f)>-1?String(f):B(f,b,c+1);break;case"function":d[e]="[function]";break;case"string":case"number":case"boolean":case"bool":d[e]=f;break;default:d[e]=f}}return d};f.log=function(a){return f.enabled?(q?f._remoteLog(arguments):f.minLogLevel==o.GENERAL&&(g&&(1===arguments.length?console.log(a):console.log.apply(console,arguments)),z("general",a)),f):f},f.debug=function(a){return f.enabled?(q?f._remoteLog(arguments,o[i]):f.minLogLevel.asInt<=o[i].asInt&&(g&&(console.debug?1===arguments.length?console.debug(a):console.debug.apply(console,arguments):1===arguments.length?console.log(a):console.log.apply(console,arguments)),z("debug",a)),f):f},f.info=function(a){return f.enabled?(q?f._remoteLog(arguments,o.INFO):f.minLogLevel.asInt<=o.INFO.asInt&&(g&&(1===arguments.length?console.info(a):console.info.apply(console,arguments)),z("info",a)),f):f},f.warn=function(a){return f.enabled?(q?f._remoteLog(arguments,o.WARN):f.minLogLevel.asInt<=o.WARN.asInt&&(g&&(1===arguments.length?console.warn(a):console.warn.apply(console,arguments)),z("warn",a)),f):f},f.error=function(a){return f.enabled?(q?f._remoteLog(arguments,o.ERROR):(g&&(1===arguments.length?console.error(a):console.error.apply(console,arguments)),z("error",a)),f):void 0},f.assert=function(a,b){return f.enabled&&(a||(z("error",b),q&&f._remoteLog(b,o.ERROR)),g&&console.assert&&console.assert(a,b)),f},f.dir=function(a){return f.enabled&&(q?f._remoteLog(arguments,o.GENERAL):g&&(1===arguments.length?console.dir(a):console.dir.apply(console,arguments))),f},f.clear=function(){return f.enabled&&(q&&f._remoteLog("","clear"),g&&console.clear(),f.output&&(f.output.innerHTML="")),f},f.trace=function(a){return f.enabled&&(q?f._remoteLog(arguments,o.GENERAL):g&&(1===arguments.length?console.trace(a):console.trace.apply(console,arguments))),f},f.group=function(){return f.enabled&&(q?f._remoteLog(arguments,"group"):g&&console.group&&console.group.apply(console,arguments)),f},f.groupCollapsed=function(){return f.enabled&&(q?f._remoteLog(arguments,"groupCollapsed"):g&&console.groupCollapsed&&console.groupCollapsed.apply(console,arguments)),f},f.groupEnd=function(){return f.enabled&&(q?f._remoteLog(arguments,"groupEnd"):g&&console.groupEnd&&console.groupEnd()),f};var C={navy:"#001F3F",blue:"#0074D9",aqua:"#7FDBFF",teal:"#39CCCC",olive:"#3D9970",green:"#2ECC40",lime:"#01FF70",yellow:"#FFDC00",orange:"#FF851B",red:"#FF4136",pink:"#F012BE",purple:"#B10DC9",maroon:"#85144B",silver:"#ddd",gray:"#aaa"};for(var D in C)f[D]=h?c(C[D]):f.log;a.Debug=f}(window),function(){var a=include("performance",!1),b=a&&(a.now||a.mozNow||a.msNow||a.oNow||a.webkitNow);b&&(a.now=b);var c={};c.now=b?function(){return a.now()}:Date.now,namespace("springroll").TimeUtils=c}(window),function(){for(var a=["ms","moz","webkit","o"],b=a.length,c=0;b>c&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[a[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[c]+"CancelAnimationFrame"]||window[a[c]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var d=include("springroll.TimeUtils"),e=0;window.requestAnimationFrame=function(a){var b=d.now(),c=Math.max(0,16-(b-e)),f=window.setTimeout(function(){a(b+c)},c);return e=b+c,f},window.cancelAnimationFrame=function(a){clearTimeout(a)}}window.requestAnimFrame=window.requestAnimationFrame}(),function(a){function b(a,b){return a._priority-b._priority}function c(a){if(null===a)return"null";var b=typeof a;return"object"===b||"function"===b?Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":b}var d=function(){this._listeners=[],this._destroyed=!1},e=d.prototype;e.trigger=function(b){if(!this._destroyed&&this._listeners[b]!==a){var c,d=this._listeners[b].slice();arguments.length>1&&(c=Array.prototype.slice.call(arguments,1));for(var e=d.length-1;e>=0;--e){var f=d[e];f._eventDispatcherOnce&&(delete f._eventDispatcherOnce,this.off(b,f)),f.apply(this,c)}}},e.once=function(a,b,c){return this.on(a,b,c,!0)},e.on=function(a,d,e,f){if(!this._destroyed){if("object"===c(a))for(var g in a)a.hasOwnProperty(g)&&this.on(g,a[g],e,f);else if("function"===c(d))for(var h,i=a.split(" "),j=null,k=0,l=i.length;l>k;k++)j=i[k],h=this._listeners[j],h||(h=this._listeners[j]=[]),f&&(d._eventDispatcherOnce=!0),d._priority=parseInt(e)||0,-1===h.indexOf(d)&&(h.push(d),h.length>1&&h.sort(b));else if(Array.isArray(d))for(var m=0,n=d.length;n>m;m++)this.on(a,d[m],e,f);return this}},e.off=function(b,c){if(!this._destroyed){if(b===a)this._listeners=[];else if(Array.isArray(c))for(var d=0,e=c.length;e>d;d++)this.off(b,c[d]);else for(var f,g,h=b.split(" "),i=null,j=0,k=h.length;k>j;j++)i=h[j],f=this._listeners[i],f&&(c===a?f.length=0:(g=f.indexOf(c),-1!==g&&f.splice(g,1)));return this}},e.has=function(a,b){if(!a)return!1;var c=this._listeners[a];return c?b?c.indexOf(b)>=0:c.length>0:!1},e.destroy=function(){this._destroyed=!0,this._listeners=null},d.mixIn=function(a,b){a.trigger=e.trigger,a.on=e.on,a.off=e.off,a.has=e.has,a.once=e.once,b&&d.call(a)},namespace("springroll").EventDispatcher=d}(),function(a,b,c){var d=function(a,c){this._onFocus=a,this._onBlur=c,this._enabled=!1,f&&(this._onToggle=function(){b.hidden||b.webkitHidden||b.msHidden||b.mozHidden?this._onBlur():this._onFocus()}.bind(this),this.enabled=!0)},e=d.prototype,f=null;b.hidden!==c?f="visibilitychange":b.mozHidden!==c?f="mozvisibilitychange":b.msHidden!==c?f="msvisibilitychange":b.webkitHidden!==c&&(f="webkitvisibilitychange"),Object.defineProperty(e,"enabled",{get:function(){return this._enabled},set:function(c){c=!!c,this._enabled!=c&&(this._enabled=c,a.removeEventListener("pagehide",this._onBlur),a.removeEventListener("pageshow",this._onFocus),a.removeEventListener("blur",this._onBlur),a.removeEventListener("focus",this._onFocus),a.removeEventListener("visibilitychange",this._onToggle),b.removeEventListener(f,this._onToggle,!1),c&&(b.addEventListener(f,this._onToggle,!1),a.addEventListener("pagehide",this._onBlur),a.addEventListener("pageshow",this._onFocus),a.addEventListener("blur",this._onBlur),a.addEventListener("focus",this._onFocus),a.addEventListener("visibilitychange",this._onToggle,!1)))}}),e.destroy=function(){f&&this._onToggle&&(this.enabled=!1,this._onToggle=null,this._onFocus=null,this._onBlur=null)},namespace("springroll").PageVisibility=d}(window,document),function(a){var b,c,d,e,f=include("springroll.EventDispatcher"),g=function(a){if(L)throw"Only one Application can be opened at a time";L=this,f.call(this),b||(b=include("Debug"),c=include("springroll.Loader"),d=include("springroll.TimeUtils"),e=include("springroll.PageVisibility")),this.options=a||{},this.display=null,this._readyToInit=!0,A={},n=this._tick.bind(this),this._internalInit()},h=f.prototype,i=extend(g,f);g._globalInit=[],g._globalDestroy=[];var j=null,k=0,l=0,m=0,n=null,o=!1,p=!0,q=-1,r=!1,s=0,t=0,u=null,v=0,w=0,x=0,y=0,z=null,A=null,B={raf:!0,fps:60,resizeElement:null,uniformResize:!0,queryStringParameters:!1,debug:!1,minLogLevel:0,ip:null,canvasId:null,display:null,displayOptions:null,updateTween:!1,autoPause:!0},C={width:0,height:0},D="init",E="beforeInit",F="update",G="resize",H="pause",I="paused",J="resumed",K="destroy";g.registerInit=function(a){g._globalInit.push(a)},g.registerDestroy=function(a){g._globalDestroy.push(a)};var L=null;Object.defineProperty(g,"instance",{get:function(){return L}}),i._internalInit=function(){var d=this.options,f=d.parseQueryString?M():{};d=this.options=Object.merge({},B,d,f);for(var h=0,i=g._globalInit.length;i>h;++h)g._globalInit[h]();r=d.raf,this.fps=d.fps;var k=d.framerate;k&&(j="string"==typeof k?document.getElementById(k):k);var l=d.resizeElement;l&&(u="string"==typeof l?document.getElementById(l):l,this.triggerResize=this.triggerResize.bind(this),window.addEventListener("resize",this.triggerResize)),d.debug!==a&&(b.enabled=d.debug===!0||"true"===d.debug),d.minLogLevel!==a&&(b.minLogLevel=b.Levels.valueFromInt(parseInt(d.minLogLevel,10)),b.minLogLevel||(b.minLogLevel=b.Levels.GENERAL)),"string"==typeof d.debugRemote&&b.connect(d.debugRemote);var m=include("createjs.Tween",!1),n=include("createjs.Ticker",!1);m&&d.updateTween&&(n&&n.setPaused(!0),this.on("update",m.tick)),z=new e(this._onVisible.bind(this),this._onHidden.bind(this)),this.autoPause=d.autoPause,d.maxWidth&&(v=d.maxWidth),Object.defineProperty(d,"maxWidth",{get:function(){return v},set:function(a){v=a}}),d.maxHeight&&(w=d.maxHeight),Object.defineProperty(d,"maxHeight",{get:function(){return w},set:function(a){w=a}}),Object.defineProperty(d,"debug",{get:function(){return b?b.enabled:!1},set:function(a){b&&(b.enabled=a)}}),Object.defineProperty(d,"debugRemote",{set:function(a){b&&(b.disconnect(),a&&b.connect(a))}}),Object.defineProperty(d,"debug",{get:function(){return b?b.minLogLevel.asInt:0},set:function(a){b&&(b.minLogLevel=b.Levels.valueFromInt(parseInt(a,10)),b.minLogLevel||(b.minLogLevel=b.Levels.GENERAL))}});var o=this;Object.defineProperty(d,"updateTween",{get:function(){return m?o.has("update",m.tick):!1},set:function(a){m&&(n&&n.setPaused(!!a),a?o.on("update",m.tick):o.off("update",m.tick))}}),d.canvasId&&d.display&&this.addDisplay(d.canvasId,d.display,d.displayOptions),this._doInit=this._doInit.bind(this),d.versionsFile!==a?c.instance.cacheManager.addVersionsFile(d.versionsFile,this._doInit):setTimeout(this._doInit,0)},i._doInit=function(){this.trigger(E),this._readyToInit&&(this.init&&this.init(),this.triggerResize(),this.paused=!1,this.trigger(D))};var M=function(){var b={},c=window.location.search;if(!c)return b;var d=c.substr(c.indexOf("?")+1),e=d.indexOf("#");d=0>e?d:d.substring(0,e);for(var f,g=d.split("&"),h=0,i=g.length;i>h;h++){f=g[h].split("=");var j=f[1];"true"===j||j===a?j=!0:"false"===j&&(j=!1),b[f[0]]=j}return b};i.init=null,i._onHidden=function(){this.paused=!0},i._onVisible=function(){this.paused=!1},Object.defineProperty(i,"autoPause",{get:function(){return z.enabled},set:function(a){z.enabled=a}}),Object.defineProperty(i,"enabled",{set:function(a){p=a,this.getDisplays(function(b){b.enabled=a})},get:function(){return p}}),Object.defineProperty(i,"paused",{get:function(){return o},set:function(a){o=!!a,this.trigger(H,o),this.trigger(o?I:J,o),o?-1!=q&&(r?cancelAnimationFrame(q):clearTimeout(q),q=-1):(-1==q&&(q=r?requestAnimFrame(n):N(n)),m=0,l=k=d.now())}});var N=function(a,b){var c=t;return b&&(c=Math.max(0,t-b)),setTimeout(a,c)};i.triggerResize=function(){if(u){C.width=0|(u.innerWidth||u.clientWidth),C.height=0|(u.innerHeight||u.clientHeight),this.calculateDisplaySize(C),C.width|=0,C.height|=0;var a;for(a in A)A[a].resize(C.width,C.height);this.trigger(G,C.width,C.height);for(a in A)A[a].render(0,!0)}},i.calculateDisplaySize=function(a){if(y&&this.options.uniformResize){var b=v/y,c=x/w,d=a.width/a.height;c>d?a.height=a.width/c:d>b&&(a.width=a.height*b)}},i.addDisplay=function(a,b,c){if(!A[a]){var d=A[a]=new b(a,c);return this.display||(this.display=d,x=d.width,y=d.height,v||(v=x),w||(w=y)),d.enabled=p,d}},i.getDisplay=function(a){return A[a]},i.getDisplays=function(a){var b=[];for(var c in A)b.push(A[c]),"function"==typeof a&&a.call(this,A[c]);return b},i.removeDisplay=function(a){var b=A[a];b&&(b.destroy(),delete A[a])},Object.defineProperty(i,"fps",{get:function(){return s},set:function(a){"number"==typeof a&&(s=a,t=1e3/s|0)}}),Object.defineProperty(i,"raf",{get:function(){return r},set:function(a){r=!!a}}),i._tick=function(){if(o)return void(q=-1);var a=d.now(),b=a-k;if(j){m++;var c=a-l;if(c>=1e3){var e=1e3/c*m;j.innerHTML="FPS: "+Math.round(1e3*e)/1e3,l=a,m=0}}k=a,this.trigger(F,b);for(var f in A)A[f].render(b);q=r?requestAnimFrame(n):N(n,d.now()-k)},i.destroy=function(){this._readyToInit=!1,this.paused=!0,this.trigger(K);for(var a in A)A[a].destroy();A=null;for(var c=0,d=g._globalDestroy.length;d>c;++c)g._globalDestroy[c]();u&&window.removeEventListener("resize",this.triggerResize),z.destroy(),z=null,L=n=j=u=null,b.disconnect(),h.destroy.call(this)},namespace("springroll").Application=g}(),function(){var a=function(a,b){b=b||{},this.canvas=document.getElementById(a),this.id=a,this.width=this.canvas.width,this.height=this.canvas.height,this.stage=null,this.paused=!1,this._enabled=!1,this._visible="none"!=this.canvas.style.display,this.canvas.onmousedown=function(a){a.preventDefault()},this.animator=null,this.adapter=null},b=a.prototype;Object.defineProperty(b,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a}}),Object.defineProperty(b,"visible",{get:function(){return this._visible},set:function(a){this._visible=a,this.canvas.style.display=a?"block":"none"}}),b.resize=function(a,b){this.width=this.canvas.width=a,this.height=this.canvas.height=b},b.render=function(){},b.destroy=function(){this.enabled=!1,this.animator=null,this.adapter=null,this.stage=null,this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas.onmousedown=null,this.canvas=null},namespace("springroll").AbstractDisplay=a}(),function(){var a,b,c=function(){a||(a=include("springroll.Application"),b=include("springroll.Loader")),this._applySpecificVersion=this._applySpecificVersion.bind(this),this._applyGlobalVersion=this._applyGlobalVersion.bind(this),this._versions={},this._filters=[],this._globalVersion=null;var c=a.instance.options.cacheBust;this.cacheBust="true"===c||c===!0},d=c.prototype={};Object.defineProperty(d,"cacheBust",{get:function(){return!(!this._globalVersion||0!==this._globalVersion.indexOf("cb="))},set:function(b){if(b)this._globalVersion="cb="+Date.now(),this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion);else{var c=a.instance.options.version;this._globalVersion=c?"v="+c:null,this._globalVersion?(this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion)):(this.unregisterURLFilter(this._applyGlobalVersion),this.registerURLFilter(this._applySpecificVersion))}}}),d.destroy=function(){this._versions=null,this._filters=null,this._applySpecificVersion=null,this._applyGlobalVersion=null},d.addVersionsFile=function(a,c,d){Debug.assert(/^.*\.txt$/.test(a),"The versions file must be a *.txt file");var e=b.instance;if(this.cacheBust)return void(c&&c());this.addVersion(a,Date.now().toString()),a=this._applySpecificVersion(a);var f=this;e.load(a,function(a){if(a&&a.content){var b,e,g=a.content.replace(/\r/g,"").split("\n");for(b=0,len=g.length;b<len;b++)g[b]&&(e=g[b].split(" "),2==e.length&&f.addVersion((d||"")+e[0],e[1]))}c&&c()})},d.addVersion=function(a,b){this._versions[a]||(this._versions[a]=b)},d.registerURLFilter=function(a){-1==this._filters.indexOf(a)&&this._filters.push(a)},d.unregisterURLFilter=function(a){var b=this._filters.indexOf(a);b>-1&&this._filters.splice(b,1)},d._applySpecificVersion=function(b){var c=a.instance.options.basePath;if(c&&c.indexOf("?")>0)return b;var d=this._versions[b];return d&&/(\?|\&)v\=[0-9]*/.test(b)===!1&&(b=b+(b.indexOf("?")<0?"?":"&")+"v="+d.version),b},d._applyGlobalVersion=function(b){if(!this._globalVersion)return b;var c=a.instance.options.basePath;if(c&&c.indexOf("?")>0)return b;var d=0===this._globalVersion.indexOf("cb=")?/(\?|\&)cb\=[0-9]*/:/(\?|\&)v\=/;return d.test(b)===!1&&(b=b+(b.indexOf("?")<0?"?":"&")+this._globalVersion),b},d._applyBasePath=function(b){var c=a.instance.options.basePath;return c&&/^http(s)?\:/.test(b)===!1&&-1==b.search(c)&&(b=c+b),b},d.prepare=function(a,b){b&&(a=this._applyBasePath(a));for(var c=0,d=this._filters.length;d>c;++c)a=this._filters[c](a);return a},namespace("springroll").CacheManager=c}(),function(){var a=function(){this.url=null,this.data=null,this.callback=null,this.priority=0,this.progress=0,this.updateCallback=null,this._boundFail=null,this._boundProgress=null,this._boundComplete=null},b=a.prototype;a.PRIORITY_HIGH=1,a.PRIORITY_NORMAL=0,a.PRIORITY_LOW=-1,b.toString=function(){return"[LoaderQueueItem(url:'"+this.url+"', priority:"+this.priority+")]"},b.destroy=function(){this.callback=null,this.updateCallback=null,this.data=null,this._boundFail=null,this._boundProgress=null,this._boundComplete=null},namespace("springroll").LoaderQueueItem=a}(),function(){var a,b,c,d,e,f,g=function(){c||(a=include("springroll.LoaderQueueItem"),b=include("springroll.CacheManager"),c=include("springroll.Application"),f=include("springroll.LoaderResult"),e=include("createjs.LoadQueue"),d=include("createjs.Sound",!1)),this._canLoad=!0,this.maxSimultaneousLoads=2,this.cacheManager=null},h=g.prototype,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=0,q=null;g.init=function(){return i||(i=new g,i._initialize(),c.registerDestroy(i.destroy.bind(i))),i},springroll.Application.registerInit(g.init),Object.defineProperty(g,"instance",{get:function(){return i}}),h.destroy=function(){var a,b,c,d=this.queue;if(d){for(a=0,b=d.length;a>a;++a)d[a].destroy();for(d=m,a=0,b=d.length;a>a;++a)d[a].destroy();for(d=o,a=0,b=d.length;a>a;++a)d[a].destroy();for(c in l)k[c].destroy(),l[c].close()}i=null,this.cacheManager&&this.cacheManager.destroy(),this.cacheManager=null,j=null,o=null,n=null,m=null,k=null,q=null,l=null},h._initialize=function(){m=[],n=[],o=[],j=[],k={},l={},q={},this.cacheManager=new b},h.load=function(b,d,e,f,g){var h=this._getQI(),i=c.instance.options.basePath;void 0!==i&&/^http(s)?\:/.test(b)===!1&&-1==b.search(i)&&(h.basePath=i),h.url=b,h.callback=d,h.updateCallback=e||null,h.priority=f||a.PRIORITY_NORMAL,h.data=g||null,j.push(h),j.sort(function(a,b){return a.priority-b.priority}),this._tryNextLoad()},h._onLoadFailed=function(a,b){if(i){Debug.error("Unable to load file: "+a.url+" - reason: "+b.error);var c=l[a.url];c.removeAllEventListeners(),c.close(),this._poolLoader(c),delete k[a.url],delete l[a.url],q[a.url]?q[a.url]++:q[a.url]=1,q[a.url]>3?this._loadDone(a,null):(p--,j.push(a),this._tryNextLoad())}},h._onLoadProgress=function(a,b){a.progress=b.progress,a.updateCallback&&a.updateCallback(a.progress)},h._onLoadCompleted=function(a,b){if(i){var c=l[a.url];c.removeAllEventListeners(),c.close(),this._poolLoader(c),delete k[a.url],delete l[a.url],this._loadDone(a,this._getResult(b.result,a.url,c))}},h._tryNextLoad=function(){if(!(p>this.maxSimultaneousLoads-1||0===j.length)){p++;var a=j.shift();k[a.url]=a;var b=this._getLoader(a.basePath);l[a.url]=b,b.addEventListener("fileload",a._boundComplete),b.addEventListener("error",a._boundFail),b.addEventListener("fileprogress",a._boundProgress);var c=this.cacheManager.prepare(a.url);b.loadFile(a.data?{id:a.data.id,src:c,data:a.data}:c)}},h._loadDone=function(a,b){p--,a.data&&b&&(b.id=a.data.id),a.callback(b),this._poolQI(a),this._tryNextLoad()},h.cancel=function(a){var b=k[a],c=l[a];if(b&&c)return c.close(),delete l[a],delete k[b.url],p--,this._poolLoader(c),this._poolQI(b),!0;for(var d=0,e=j.length;e>d;d++)if(b=j[d],b.url==a)return j.splice(d,1),this._poolQI(b),!0;return!1},h._getQI=function(){var b;return m.length?b=m.pop():(b=new a,b._boundFail=this._onLoadFailed.bind(this,b),b._boundProgress=this._onLoadProgress.bind(this,b),b._boundComplete=this._onLoadCompleted.bind(this,b)),b},h._poolQI=function(a){m.push(a),a.callback=a.updateCallback=a.data=a.url=null,a.progress=0},h._getLoader=function(a){var b;return n.length?(b=n.pop(),b._basePath=a):b=new e(!0,a,c.instance.options.crossOrigin),d&&b.installPlugin(d),b},h._poolLoader=function(a){a.removeAll(),n.push(a)},h._getResult=function(a,b,c){var d;return o.length?(d=o.pop(),d.content=a,d.url=b,d.loader=c):d=new f(a,b,c),d},h._poolResult=function(a){a.content=a.url=a.loader=a.id=null,o.push(a)},namespace("springroll").MediaLoader=g,namespace("springroll").Loader=g}(),function(){var a=function(a,b,c){this.content=a,this.url=b,this.loader=c},b=a.prototype;b.toString=function(){return"[LoaderResult('"+this.url+"')]"},b.destroy=function(){this.callback=null,this.url=null,this.content=null},namespace("springroll").MediaLoaderResult=a,namespace("springroll").LoaderResult=a}(),function(){var a=function(a,b,c,d){b[c]?b[d]=a:a()};a.create=function(b,c,d,e){return a.bind(this,b,c,d,e)},namespace("springroll").CombinedCallback=a}(),function(a){var b={},c=window.Storage!==a,d=-1;if(c)try{localStorage.setItem("LS_TEST","test"),localStorage.removeItem("LS_TEST")}catch(e){c=!1}b.remove=function(a){c?(localStorage.removeItem(a),sessionStorage.removeItem(a)):b.write(a,"",d)},b.write=function(a,b,e){if(c)e?sessionStorage.setItem(a,JSON.stringify(b)):localStorage.setItem(a,JSON.stringify(b));else{var f;f=e?e!==d?"":"; expires=Thu, 01 Jan 1970 00:00:00 GMT":"; expires="+new Date(2147483646e3).toGMTString(),document.cookie=a+"="+escape(JSON.stringify(b))+f+"; path=/"}},b.read=function(a){if(c){var d=localStorage.getItem(a)||sessionStorage.getItem(a);return d?JSON.parse(d,b.reviver):null}var e,f,g=a+"=",h=document.cookie.split(";"),i=0;for(i=0,f=h.length;f>i;i++){for(e=h[i];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(g))return JSON.parse(unescape(e.substring(g.length,e.length)),b.reviver)}return null},b.reviver=function(a,b){if(b&&"string"==typeof b.__classname){var c=include(b.__classname,!1);if(c){var d=new c;if(d.fromJSON)return d.fromJSON(b),d}}return b},namespace("springroll").SavedData=b}(),function(a){var b=include("springroll.Application"),c=function(c,d,e,f){this._callback=c,this._delay=d,this._timer=d,this._repeat=!!e,this._autoDestroy=f===a?!0:!!f,this._paused=!1,this._update=this._update.bind(this),b.instance.on("update",this._update)},d=c.prototype;d._update=function(a){return this._callback?(this._timer-=a,void(this._timer<=0&&(this._callback(),this._repeat?this._timer+=this._delay:this._autoDestroy?this.destroy():b.instance.off("update",this._update)))):void this.destroy()},d.restart=function(){if(this._callback){var a=b.instance;a.has("update",this._update)||a.on("update",this._update),this._timer=this._delay,this._paused=!1}},d.stop=function(){b.instance.off("update",this._update),this._paused=!1},Object.defineProperty(d,"paused",{get:function(){return this._paused},set:function(a){if(this._callback){var c=b.instance;this._paused&&!a?(this._paused=!1,c.has("update",this._update)||c.on("update",this._update)):a&&c.has("update",this._update)&&(this._paused=!0,c.off("update",this._update))}}}),d.destroy=function(){b.instance.off("update",this._update),this._callback=null},namespace("springroll").DelayedCall=c}(),function(){Object.defineProperty(String.prototype,"format",{enumerable:!1,writable:!1,value:function(){if(arguments.length<1)return this;var a=Array.isArray(a)?a:Array.prototype.slice.call(arguments);return this.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(b,c,d){return d?c+a[parseInt(d)-1]:c+a.shift()}).replace(/%%s/g,"%s")}})}(),function(){Array.prototype.shuffle||Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var a,b,c=this.length;c;a=Math.floor(Math.random()*c),b=this[--c],this[c]=this[a],this[a]=b);return this}}),Array.prototype.random||Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}}),Array.prototype.last||Object.defineProperty(Array.prototype,"last",{enumerable:!1,writable:!1,value:function(){return this[this.length-1]}})}(),function(a){a.randomInt=a.getRandomInt=function(b,c){return void 0===c&&(c=b,b=0),a.floor(a.random()*(c-b+1))+b},a.dist=function(b,c,d,e){return"number"==typeof b.x&&b.x==b.x&&(e=d,d=c,c=b.y,b=b.x),"number"==typeof d.x&&d.x==d.x&&(e=d.y,d=d.x),a.sqrt((b-d)*(b-d)+(c-e)*(c-e))}}(Math);}();