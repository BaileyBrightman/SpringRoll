/*! SpringRoll 1.0.0 */
!function(){"use strict";!function(){var a=include("springroll.SavedData"),b=function(a){this.container=a,this.id=""},c=extend(b);c.read=function(b,c){return this.container.supported?void this.container.fetch("userDataRead",function(a){c(a.data)},this.id+b,!0):c(a.read(this.id+b))},c.write=function(b,c,d){return this.container.supported?void this.container.fetch("userDataWrite",function(a){d&&d()},{name:this.id+b,value:c},!0):(a.write(this.id+b,c),void(d&&d()))},c.remove=function(b,c){return this.container.supported?void this.container.fetch("userDataRemove",function(a){c&&c()},this.id+b,!0):(a.remove(this.id+b),void(c&&c()))},c.destroy=function(){this.id=null,this.container=null},namespace("springroll").UserData=b}(),function(a){var b,c=include("springroll.ApplicationPlugin"),d=include("springroll.PageVisibility"),e=include("springroll.UserData"),f=include("Bellhop"),g=new c(200);g.setup=function(){b=include("springroll.Debug",!1);var a=this.options,c=this.container=new f;c.connect(),this.userData=new e(c),a.add("keepFocus",!1).on("keepFocus",function(a){c.send("keepFocus",a)}),this.on("progress",function(a){this.container.send("progress",a)}),this.once("beforeInit",function(){c.send("loaded")}),c.send("loading"),this.singlePlay=!1,this.playOptions={},this.singlePlayEnd=function(){return this.singlePlay?(this.endGame(),!0):!1},this.endGame=function(a){this.trigger("endGame",a||"game_completed"),this.destroy()},this.once("beforeInit",function(){var a=!!this.sound;this.container.send("features",{sound:a,hints:!!this.hints,music:a&&this.sound.contextExists("music"),vo:a&&this.sound.contextExists("vo"),sfx:a&&this.sound.contextExists("sfx"),captions:!!this.captions})}),c.supported&&(c.fetch("singlePlay",p.bind(this)),c.fetch("playOptions",o.bind(this))),window.onerror=i.bind(this),window.onunload=window.onbeforeunload=h.bind(this)};var h=function(){return window.onunload=window.onbeforeunload=null,this.endGame("left_site"),a},i=function(a){return this.container.supported?(this.container.send("localError",String(a)),!0):void 0};g.preload=function(a){if(!this.name)throw"Application name is empty";if(this.userData.id=this.name,this.container.supported){this.container.on({soundMuted:k.bind(this),captionsMuted:l.bind(this),musicMuted:m.bind(this,"music"),voMuted:m.bind(this,"vo"),sfxMuted:m.bind(this,"sfx"),captionsStyles:n.bind(this),pause:j.bind(this),close:q.bind(this)}),this.options.autoPause=!1;var b=this.container;this._pageVisibility=new d(b.send.bind(b,"focus",!0),b.send.bind(b,"focus",!1))}a()};var j=function(a){var c=!!a.data;this.autoPaused=b&&b.disablePause?!1:c,this.enabled=!c},k=function(a){this.sound&&(this.sound.muteAll=!!a.data)},l=function(a){this.captions&&(this.captions.mute=!!a.data)},m=function(a,b){this.sound&&this.sound.setContextMute(a,!!b.data)},n=function(a){var b=a.data,c=this.captions||{},d=c.textField||null;d&&d.nodeName&&(d.className="size-"+b.size+" bg-"+b.background+" color-"+b.color+" edge-"+b.edge+" font-"+b.font+" align-"+b.align)},o=function(a){Object.merge(this.playOptions,a.data||{})},p=function(a){this.singlePlay=!!a.data},q=function(){this.endGame("closed_container")};g.teardown=function(){window.onerror=null,this._pageVisibility&&(this._pageVisibility.destroy(),this._pageVisibility=null),this.userData&&(this.userData.destroy(),this.userData=null),this.container&&(this.container.send("endGame"),this.container.destroy(),this.container=null)}}();}();