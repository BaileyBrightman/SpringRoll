/*! SpringRoll 0.0.6 */
!function(){"use strict";!function(a){var b={};b.Circle=include("PIXI.Circle"),b.Ellipse=include("PIXI.Ellipse"),b.Rectangle=include("PIXI.Rectangle"),b.Sector=include("PIXI.Sector",!1),b.Point=include("PIXI.Point"),b.Polygon=include("PIXI.Polygon"),b.useRadians=!0,b.getLocalBounds=function(a){var b,c=a.width,d=a.height;return b=c&&d?new PIXI.Rectangle(-a.pivot.x,-a.pivot.y,c/a.scale.x,d/a.scale.y):new PIXI.Rectangle,b.right=b.x+b.width,b.bottom=b.y+b.height,b},b.getScale=function(b,c){return c!==a?b.scale[c]:b.scale},b.setPosition=function(b,c,d){return d!==a?b.position[d]=c:(c.x&&(b.position.x=c.x),c.y&&(b.position.y=c.y)),b},b.getPosition=function(b,c){return c!==a?b.position[c]:b.position},b.setScale=function(b,c,d){return d!==a?b.scale[d]=c:b.scale.x=b.scale.y=c,b},b.setPivot=function(b,c,d){return d!==a&&(b.pivot[d]=c),b.pivot=c,b},b.setHitArea=function(a,b){return a.hitArea=b,a},b.getBitmapSize=function(a){return{h:a.height/a.scale.y,w:a.width/a.scale.x}},b.removeChildren=function(a){a.removeChildren(!0)},namespace("springroll.pixi").DisplayAdapter=b}(),function(){var a=include("springroll.AbstractDisplay"),b=include("PIXI.Stage"),c=include("PIXI.CanvasRenderer"),d=include("PIXI.WebGLRenderer"),e=include("PIXI.autoDetectRenderer"),f=function(f,g){a.call(this,f,g),g=g||{},this.stage=new b(g.backgroundColor||0),this.renderer=null;var h={view:this.canvas,transparent:!!g.transparent,antialias:!!g.antiAlias,preserveDrawingBuffer:!!g.preserveDrawingBuffer,clearBeforeRender:!!g.clearView},i=!!g.preMultAlpha;h.transparent&&!i&&(h.transparent="notMultiplied"),this.renderer="canvas2d"==g.forceContext?new c(this.width,this.height,h):"webgl"==g.forceContext?new d(this.width,this.height,h):e(this.width,this.height,h),this.isWebGL=this.renderer instanceof d,this.animator=include("springroll.pixi.Animator"),this.adapter=include("springroll.pixi.DisplayAdapter")},g=a.prototype,h=f.prototype=Object.create(g);Object.defineProperty(h,"enabled",{get:function(){return this._enabled},set:function(a){Object.getOwnPropertyDescriptor(g,"enabled").set.call(this,a);var b=this.stage.interactionManager;a?b.setTargetDomElement(this.canvas):b.removeEvents()}}),h.resize=function(a,b){g.resize.call(this,a,b),this.renderer.resize(a,b)},h.render=function(){!this.paused&&this._visible&&this.renderer.render(this.stage)},h.destroy=function(){g.destroy.call(this),this.stage.removeChildren(!0),this.stage.destroy(),this.renderer.destroy(),this.renderer=this.stage=null},namespace("springroll").PixiDisplay=f,namespace("springroll.pixi").PixiDisplay=f}(),function(){var a=function(a,b,c){this.anim=a,this.loop=!!b,this.speed=c>0?c:1};namespace("springroll.pixi").ConcurrentSpineAnimData=a}(),function(){var a=include("PIXI.Spine"),b=include("PIXI.spine.AnimationState"),c=include("PIXI.Texture"),d=include("springroll.pixi.ConcurrentSpineAnimData"),e=function(a,b,c,d){this.eventList=[],this.init(a,b,c,d)};e.constructor=e;var f=e.prototype;f.init=function(b,c,d,e){return this.clip=b,this.isSpine=b instanceof a,this.callback=c,this.cancelledCallback=e,this.duration=0,this.speed=d,this.eventList.length=0,this.listIndex=-1,this.spineStates=null,this.isLooping=null,this._time_sec=0,this.soundAlias=null,this.soundInst=null,this.playSound=!1,this.soundStart=0,this.soundEnd=0,this.useCaptions=!1,this._paused=!1,this.isAnim=!1,this.complete=!1,this},f._nextItem=function(){if(this.soundEnd=this.soundStart=0,this.isAnim=this.playSound=this.useCaptions=!1,this.soundInst=this.soundAlias=null,this.spineStates=this.spineSpeeds=null,this.isLooping=!1,++this.listIndex>=this.eventList.length)return void(this.complete=!0);var a,e,f=this.eventList[this.listIndex];switch(typeof f){case"object":this.isAnim=!0;var g=f.anim,h=this.clip;if(this.isLooping=!!f.loop,this.speed=f.speed>0?f.speed:1,"string"==typeof g)this.duration=h.stateData.skeletonData.findAnimation(g).duration,h.state.setAnimationByName(g,this.isLooping);else if(g[0]instanceof c)h.textures=g,h.updateDuration(),this.duration=h._animDuration,h.gotoAndPlay(0);else if(g[0]instanceof d){this.spineStates=new Array(g.length),this.spineSpeeds=new Array(g.length),this.duration=0;var i,j=0,k=0;for(e=h.stateData.skeletonData,a=0;a<g.length;++a){var l=new b(h.stateData);this.spineStates[a]=l;var m=g[a].loop;l.setAnimationByName(g[a].anim,m),i=e.findAnimation(g[a].anim).duration,m?i>k&&(k=i):i>j&&(j=i),t.spineSpeeds[a]=g[a].speed>0?g[a].speed:1}this.duration=j||k}else{var n=h.state;for(e=h.stateData.skeletonData,n.setAnimationByName(g[0],!1),this.duration=e.findAnimation(g[0]).duration,a=1;a<g.length;++a)n.addAnimationByName(g[a],this.isLooping&&a==g.length-1),this.duration+=e.findAnimation(g[a]).duration}var o="number"==typeof f.start?.001*f.start:0;this._time_sec=0>o?Math.random()*this.duration:o,f.alias&&(this.soundAlias=f.alias,this.soundStart=f.audioStart,this.playSound=!0,this.useCaptions=f.useCaptions);break;case"number":this.duration=.001*f,this._time_sec=0;break;case"function":f(),this._nextItem()}},Object.defineProperty(f,"time",{get:function(){return 1e3*this._time_sec},set:function(a){this._time_sec=.001*a}}),Object.defineProperty(f,"paused",{get:function(){return this._paused},set:function(a){a!=this._paused&&(this._paused=!!a,this.soundInst&&(this.paused?this.soundInst.pause():this.soundInst.unpause()))}}),namespace("springroll.pixi").AnimatorTimeline=e}(),function(){var a,b=include("PIXI.Spine"),c=include("PIXI.Texture"),d=include("springroll.pixi.AnimatorTimeline"),e=include("springroll.pixi.ConcurrentSpineAnimData"),f=include("springroll.Application"),g=include("PIXI.MovieClip"),h={},i=null,j=0,k=null;h.captions=null,h.init=function(){k=[],i=[],a=include("springroll.Sound",!1)},h.play=function(a,b,d,g){var k,l;if(d&&"function"!=typeof d?(l=d,d=l.onComplete,g=l.onCancelled):g===!0&&(g=d),!h.canAnimate(a))return void(d&&d());if(h.stop(a),l&&(k=l.audio||l.soundData||null),"string"==typeof b)b=[{anim:b,audio:k}];else if(Array.isArray(b)){var p=b[0];p instanceof c?b=[{anim:b,audio:k}]:"string"==typeof p?b=[{anim:b,audio:k}]:p instanceof e&&(b=[{anim:b,audio:k}])}else b=[b];var q=h._makeTimeline(a,b,d,g);return q.eventList.length<1?(m(q),d&&d(),null):(q._nextItem(),o(q,q._time_sec,0),i.push(q),1==++j&&f.instance.on("update",n),q)},h._makeTimeline=function(b,e,f,g){var i,j,m,n,o=k.length?k.pop().init(b,f,g):new d(b,f,g);for(i=0;i<e.length;++i){var p=e[i];if("number"!=typeof p&&"function"!=typeof p){if(m=p.anim,n=p.audio,o.isSpine)if("string"==typeof m)l(b,m)&&o.eventList.push(p);else if("string"==typeof m[0]){for(j=m.length;j>=0;--j)l(b,m[j])||m.splice(j,1);m.length&&o.eventList.push(p)}else{for(j=m.length;j>=0;--j)l(b,m[j].anim)||m.splice(j,1);m.length&&o.eventList.push(p)}else{if(!(m[0]instanceof c))continue;o.eventList.push(p)}if(n&&a){var q,r;"string"==typeof n?(r=0,q=n):(r=n.start>0?.001*n.start:0,q=n.alias),a.instance.exists(q)&&(a.instance.preloadSound(q),p.alias=q,p.audioStart=r,p.useCaptions=h.captions&&h.captions.hasCaption(q))}}else o.eventList.push(p)}return o},h.canAnimate=function(a){return a?a instanceof b||a instanceof g?!0:a.hasOwnProperty("textures")&&a.hasOwnProperty("_elapsedTime")?!0:!1:!1},h._canAnimate=function(a){return h.canAnimate(a)},h.instanceHasAnimation=function(a,c){return a instanceof b?l(a,c):!1};var l=function(a,b){return null!==a.stateData.skeletonData.findAnimation(b)};h.stop=function(a){for(var b=0;j>b;++b)if(i[b].clip===a){var c=i[b];i.splice(b,1),0===--j&&f.instance.off("update",n),c.cancelledCallback&&c.cancelledCallback(),c.soundInst&&c.soundInst.stop(),m(c);break}},h.stopAll=function(){for(var a=0;j>a;++a){var b=i[a];b.cancelledCallback&&b.cancelledCallback(),b.soundInst&&b.soundInst.stop(),m(b);break}f.instance.off("update",n),i.length=j=0};var m=function(a){a.clip=null,a.callback=null,a.cancelledCallback=null,a.loop=!1,a.spineStates=null,a.speed=null,a.soundInst=null,k.push(a)},n=function(b){for(var c=.001*b,d=j-1;d>=0;--d){var e=i[d];if(!e.paused){var g=e._time_sec,k=!1,l=0;if(e.isAnim){if(e.soundInst)if(e.soundInst.isValid){var m=.001*e.soundInst.position;if(0>m&&(m=0),e._time_sec=e.soundStart+m,e.useCaptions&&h.captions.seek(e.soundInst.position),e._time_sec>=e.duration){if(o(e.duration,g),l=e._time_sec-e.duration,e._nextItem(),e.complete){r(e);continue}k=!0}}else{if(e._nextItem(),e.complete){r(e);continue}k=!0}else e._time_sec+=c*e.speed,e.playSound&&e._time_sec>=e.soundStart&&(e._time_sec=e.soundStart,e.soundInst=a.instance.play(e.soundAlias,q.bind(this,e),p.bind(this,e)),e.useCaptions&&h.captions.play(e.soundAlias));var s=e.clip;if(e.isSpine){if(e.spineStates){var t=o(e,e._time_sec,g);if(t){if(l=e._time_sec-e.duration,e._nextItem(),e.complete){r(e);continue}k=!0}else e._time_sec>e.duration&&(e._time_sec-=e.duration)}else if(o(e,e._time_sec,g),e._time_sec>=e.duration){if(l=e._time_sec-e.duration,e._nextItem(),e.complete){r(e);continue}k=!0}}else if(e._time_sec>=e.duration)if(e.loop&&e.listIndex==e.eventList.length-1)e._time_sec-=e.duration,e.onComplete&&e.onComplete();else{if(l=e._time_sec-e.duration,s.gotoAndStop(s.textures.length-1),e._nextItem(),e.complete){r(e);continue}k=!0}else s._elapsedTime=e._time_sec}else if(e._time_sec+=c*e.speed,e._time_sec>=e.duration){if(l=e._time_sec-e.duration,e._nextItem(),e.complete){r(e);continue}k=!0}k&&(g=0,e._time_sec+=l,e.playSound&&e._time_sec>=e.soundStart&&(e._time_sec=e.soundStart,e.soundInst=a.instance.play(e.soundAlias,q.bind(this,e),p.bind(this,e)),e.useCaptions&&h.captions.play(e.soundAlias)),e.isAnim&&o(e,e._time_sec,g))}}0===j&&f.instance.off("update",n)},o=function(a,b,c){var d=!1,e=a.clip;if(a.isSpine)if(a.spineStates)for(var f=0,g=a.spineStates.length;g>f;++f){var h=a.spineStates[f];h.update((b-c)*a.spineSpeeds[f]),h.apply(e.skeleton),!h.currentLoop&&h.isComplete()&&(d=!0)}else e.updateAnim(b-c);else e._elapsedTime=b;return d},p=function(a){a.playSound=!1,a.soundEnd=a.soundStart+.001*a.soundInst.length},q=function(a){a.soundEnd>0&&a._time_sec<a.soundEnd&&(a._time_sec=a.soundEnd),a.soundInst=null},r=function(a){var b=i.indexOf(a);b>=0&&(a.useCaptions&&h.captions.stop(),a.clip.onComplete=null,i.splice(b,1),0===--j&&f.instance.off("update",n),a.callback&&a.callback(),m(a))};h.destroy=function(){h.captions=null,k=null,i=null,f.instance.off("update",n)},f.registerInit(h.init),f.registerDestroy(h.destroy),namespace("springroll").Animator=h,namespace("springroll.pixi").Animator=h}(),function(a){function b(a){if(!a||"object"!=typeof a)return null;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function c(a,b){if(a===b)return!0;for(var c in a)if(a[c]!=b[c])return!1;return!0}var d=include("PIXI.DisplayObjectContainer"),e=include("PIXI.Point"),f=include("PIXI.Sprite"),g=include("PIXI.BitmapText"),h=include("PIXI.Text"),i=function(a,b,c){d.call(this),this.back=new f(a.up),this.label=null,this.releaseCallback=null,this.overCallback=null,this.outCallback=null,this._stateFlags={},this._statePriority=a.priority||l,this._stateData=null,this._currentLabelStyle=null,this._offset=new e,this._overCB=null,this._outCB=null,this._downCB=null,this._upCB=null,this._upOutCB=null,this._width=0,this._height=0,this.initialize(a,b,c)},j=i.prototype=Object.create(d.prototype),k=["disabled","enabled","up","over","down"],l=["disabled","down","over","up"];j.initialize=function(c,d,e){this.addChild(this.back),this._overCB=this._onOver.bind(this),this._outCB=this._onOut.bind(this),this._downCB=this._onDown.bind(this),this._upCB=this._onUp.bind(this),this._upOutCB=this._onUpOutside.bind(this);var f,i=this._stateData={};if(d){f=b(d),delete f.text,delete f.type,f.x===a&&(f.x="center"),f.y===a&&(f.y="center");var j=f.style=b(d.style);"bitmap"==d.type?j.align=j.align||"left":(j.font=j.font||"bold 20pt Arial",j.fill=j.fill||"black",j.align=j.align||"left",j.stroke=j.stroke||"black",j.strokeThickness=j.strokeThickness||0,j.wordWrap=j.wordWrap||!1,j.wordWrapWidth=j.wordWrapWidth||100)}for(var k=this._statePriority.length-1;k>=0;--k){var l=this._statePriority[k];this._addProperty(l),"disabled"!=l&&"up"!=l&&(this._stateFlags[l]=!1);var m=c[l];if(i[l]=m?m.tex?{tex:m.tex}:{tex:m}:i.up,d)if(m&&m.label){m=m.label;var n=i[l].label={};n.style=m.style||f.style,n.x=m.x||f.x,n.y=m.y||f.y}else i[l].label=f}if(i.up||(Debug.error("Button lacks an up state! This is a serious problem! Input data follows:"),Debug.error(c)),i.over||(i.over=i.up),i.down||(i.down=i.up),i.disabled||(i.disabled=i.up),c.offset?(this._offset.x=c.offset.x,this._offset.y=c.offset.y):this._offset.x=this._offset.y=0,c.scale){var o=c.scale||1;this.back.scale.x=this.back.scale.y=o}d&&(this.label="bitmap"==d.type?new g(d.text,f.style):new h(d.text,f.style),this.addChild(this.label)),this.back.x=this._offset.x,this.back.y=this._offset.y,this._width=this.back.width,this._height=this.back.height,this.enabled=e===a?!0:!!e},Object.defineProperty(j,"width",{get:function(){return this._width*this.scale.x},set:function(a){this.scale.x=a/this._width}}),Object.defineProperty(j,"height",{get:function(){return this._height*this.scale.y},set:function(a){this.scale.y=a/this._height}}),j.setText=function(a){if(this.label){this.label.setText(a),this.label instanceof h?(this.label.updateText(),this.label.dirty=!1):this.label.forceUpdateText();for(var b,c=0;c<this._statePriority.length;++c)if(this._stateFlags[this._statePriority[c]]){b=this._stateData[this._statePriority[c]];break}if(b||(b=this._stateData.up),b=b.label,"center"==b.x){var d=this.back.width,e=this.label.width;switch(this._currentLabelStyle.align){case"center":this.label.position.x=.5*d;break;case"right":this.label.position.x=.5*(d-e)+e;break;default:this.label.position.x=.5*(d-e)}}else this.label.position.x=b.x+this._offset.x;this.label.position.y="center"==b.y?.5*(this.back.height-this.label.height):b.y+this._offset.y}},Object.defineProperty(j,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(a){this._stateFlags.disabled=!a,this.buttonMode=a,this.interactive=a,a?(this.mousedown=this.touchstart=this._downCB,this.mouseover=this._overCB,this.mouseout=this._outCB):(this.mousedown=this.touchstart=this.mouseover=this.mouseout=null,this.mouseup=this.touchend=this.mouseupoutside=this.touchendoutside=null,this._stateFlags.down=this._stateFlags.over=!1,this.__isOver=!1),this._updateState()}}),j._addProperty=function(a){k.indexOf(a)>=0||Object.defineProperty(this,a,{get:function(){return this._stateFlags[a]},set:function(b){this._stateFlags[a]=b,this._updateState()}})},j._updateState=function(){if(this.back){for(var a,b=0;b<this._statePriority.length;++b)if(this._stateFlags[this._statePriority[b]]){a=this._stateData[this._statePriority[b]];break}if(a||(a=this._stateData.up),this.back.setTexture(a.tex),this.label){if(a=a.label,this._currentLabelStyle&&c(this._currentLabelStyle,a.style)||(this.label.setStyle(a.style),this._currentLabelStyle=a.style,this.label instanceof h?(this.label.updateText(),this.label.dirty=!1):this.label.forceUpdateText()),"center"==a.x){var d=this.back.width,e=this.label.width;switch(this._currentLabelStyle.align){case"center":this.label.position.x=.5*d;break;case"right":this.label.position.x=.5*(d-e)+e;break;default:this.label.position.x=.5*(d-e)}}else this.label.position.x=a.x+this._offset.x;this.label.position.y="center"==a.y?.5*(this.back.height-this.label.height):a.y+this._offset.y}}},j._onOver=function(){this._stateFlags.over=!0,this._updateState(),this.overCallback&&this.overCallback(this)},j._onOut=function(){this._stateFlags.over=!1,this._updateState(),this.outCallback&&this.outCallback(this)},j._onDown=function(a){a.originalEvent.preventDefault(),this._stateFlags.down=!0,this._updateState(),this.mouseup=this.touchend=this._upCB,this.mouseupoutside=this.touchendoutside=this._upOutCB},j._onUp=function(a){a.originalEvent.preventDefault(),this._stateFlags.down=!1,this.mouseup=this.touchend=null,this.mouseupoutside=this.touchendoutside=null,this._updateState(),this.releaseCallback&&this.releaseCallback(this)},j._onUpOutside=function(){this._stateFlags.down=!1,this.mouseup=this.touchend=null,this.mouseupoutside=this.touchendoutside=null,this._updateState()},j.destroy=function(){this.mousedown=this.touchstart=this.mouseover=this.mouseout=null,this.mouseup=this.touchend=this.mouseupoutside=this.touchendoutside=null,this.removeChildren(),this.label=null,this.back=null,this.releaseCallback=null,this.overCallback=null,this.outCallback=null,this._stateData=null,this._stateFlags=null,this._statePriority=null,this._downCB=null,this._upCB=null,this._overCB=null,this._outCB=null,this._upOutCB=null},namespace("springroll").Button=i,namespace("springroll.pixi").Button=i}(),function(){var a=function(a){this.obj=a,this.mouseDownObjPos={x:0,y:0},this.dragOffset=new createjs.Point,this.mouseDownStagePos={x:0,y:0}};namespace("springroll").DragData=a,namespace("springroll.pixi").DragData=a}(),function(){var a,b,c,d=include("springroll.pixi.DragData"),e=function(d,e,f){a||(a=include("springroll.Application"),b=include("createjs.Tween",!1),c=include("PIXI.Point")),this.draggedObj=null,this.dragStartThreshold=20,this.mouseDownStagePos=new c(0,0),this.mouseDownObjPos=new c(0,0),this.allowStickyClick=!0,this.isTouchMove=!1,this.isHeldDrag=!1,this.isStickyClick=!1,this.snapSettings=null,this._theStage=d,this._dragOffset=null,this._dragStartCallback=e,this._dragEndCallback=f,this._triggerHeldDrag=this._triggerHeldDrag.bind(this),this._triggerStickyClick=this._triggerStickyClick.bind(this),this._stopDrag=this._stopDrag.bind(this),this._updateObjPosition=this._updateObjPosition.bind(this),this._draggableObjects=[],this._multitouch=!1,this.helperPoint=new c(0,0)},f=e.prototype={};Object.defineProperty(f,"multitouch",{get:function(){return this._multitouch},set:function(a){if(this.draggedObj)if(this._multitouch)for(var b in this.draggedObj)this._stopDrag(b,!0);else this._stopDrag(null,!0);this._multitouch=!!a,this.draggedObj=a?{}:null}}),f.startDrag=function(a,b){this._objMouseDown(a,b)},f._objMouseDown=function(a,e){if(!(!this._multitouch&&this.draggedObj||this._multitouch&&!e)){var f,g,h,i;this._multitouch?(f=new d(a),this.draggedObj[e.id]=f,g=f.mouseDownObjPos,h=f.mouseDownStagePos,i=f.dragOffset):(this.draggedObj=a,g=this.mouseDownObjPos,h=this.mouseDownStagePos,i=this._dragOffset=new c),b&&(b.removeTweens(a),b.removeTweens(a.position)),e.getLocalPosition(a.parent,i),i.x-=a.position.x,i.y-=a.position.y,g.x=a.position.x,g.y=a.position.y,e?this.allowStickyClick&&"touchstart"!=e.originalEvent.type?(h.x=e.global.x,h.y=e.global.y,a.mousemove=this._triggerHeldDrag,this._theStage.interactionManager.stageUp=this._triggerStickyClick):(this.isTouchMove="touchstart"==e.originalEvent.type,this.isHeldDrag=!0,this._startDrag(e)):(this.isHeldDrag=!0,this._startDrag())}},f._triggerStickyClick=function(a){this.isStickyClick=!0;var b=this._multitouch?this.draggedObj[a.id].obj:this.draggedObj;b.mousemove=null,this._theStage.interactionManager.stageUp=null,this._startDrag(a)},f._triggerHeldDrag=function(a){var b,c;this._multitouch?(c=this.draggedObj[a.id].obj,b=this.draggedObj[a.id].mouseDownStagePos):(c=this.draggedObj,b=this.mouseDownStagePos);var d=a.global.x-b.x,e=a.global.y-b.y;d*d+e*e>=this.dragStartThreshold*this.dragStartThreshold&&(this.isHeldDrag=!0,c.mousemove=null,this._theStage.interactionManager.stageUp=null,this._startDrag(a))},f._startDrag=function(a){var b=this._theStage.interactionManager;b.stageUp=this._stopDrag;var c;c=this._multitouch?this.draggedObj[a.id].obj:this.draggedObj,c.mousemove=c.touchmove=this._updateObjPosition,this._dragStartCallback(c)},f.stopDrag=function(a,b){var c=null;if(this._multitouch&&b)for(var d in this.draggedObj)if(this.draggedObj[d].obj==b){c=d;break}this._stopDrag(c,a===!0)},f._stopDrag=function(a,b){var c,d;if(this._multitouch){if(!a){for(d in this.draggedObj)this._stopDrag(d,b);return}d=a,a instanceof PIXI.InteractionData&&(d=a.id);var e=this.draggedObj[d];if(!e)return;c=e.obj,this.mouseDownObjPos.x=e.mouseDownObjPos.x,this.mouseDownObjPos.y=e.mouseDownObjPos.y,delete this.draggedObj[d]}else c=this.draggedObj,this.draggedObj=null;if(c){c.touchmove=c.mousemove=null;var f=!this._multitouch;if(this._multitouch){var g=!1;for(d in this.draggedObj){g=!0;break}f=!g}f&&(this._theStage.interactionManager.stageUp=null),this.isTouchMove=!1,this.isStickyClick=!1,this.isHeldMove=!1,b!==!1&&this._dragEndCallback(c)}},f._updateObjPosition=function(a){if(this.isTouchMove||this._theStage.interactionManager.mouseInStage){var b,c;if(this._multitouch){var d=this.draggedObj[a.id];b=d.obj,c=d.dragOffset}else b=this.draggedObj,c=this._dragOffset;if(!b||!b.parent)return void this.stopDrag(!1,b);var e=a.getLocalPosition(b.parent,this.helperPoint),f=b._dragBounds;if(f?(b.position.x=h(e.x-c.x,f.x,f.right),b.position.y=h(e.y-c.y,f.y,f.bottom)):(b.position.x=e.x-c.x,b.position.y=e.y-c.y),this.snapSettings)switch(this.snapSettings.mode){case"points":this._handlePointSnap(e,c,b);break;case"grid":break;case"line":}}},f._handlePointSnap=function(a,b){for(var c=this.snapSettings,d=c.dist*c.dist,e=c.points,f=a.x-b.x,h=a.y-b.y,i=-1,j=null,k=e.length-1;k>=0;--k){var l=e[k],m=g(f,h,l.x,l.y);d>=m&&(i>m||-1==i)&&(i=m,j=l)}j&&(draggedObj.position.x=j.x,draggedObj.position.y=j.y)};var g=function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},h=function(a,b,c){return b>a?b:a>c?c:a},i=function(){this.touchstart=this.mousedown=this._onMouseDownListener,this.buttonMode=this.interactive=!0},j=function(){this.mousedown=this.touchstart=null,this.buttonMode=this.interactive=!1},k=function(a){this._dragMan._objMouseDown(this,a)};f.addObject=function(a,b){b&&(b.right=b.x+b.width,b.bottom=b.y+b.height),a._dragBounds=b,this._draggableObjects.indexOf(a)>=0||(a.enableDrag=i,a.disableDrag=j,a._onMouseDownListener=k.bind(a),a._dragMan=this,this._draggableObjects.push(a))},f.removeObject=function(a){var b=this._draggableObjects.indexOf(a);b>=0&&(a.disableDrag(),delete a.enableDrag,delete a.disableDrag,delete a._onMouseDownListener,delete a._dragMan,delete a._dragBounds,this._draggableObjects.splice(b,1))},f.destroy=function(){this.stopDrag(!1),this._updateObjPosition=null,this._dragStartCallback=null,this._dragEndCallback=null,this._triggerHeldDrag=null,this._triggerStickyClick=null,this._stopDrag=null,this._theStage=null;for(var a=this._draggableObjects.length-1;a>=0;--a){var b=this._draggableObjects[a];b.disableDrag(),delete b.enableDrag,delete b.disableDrag,delete b._onMouseDownListener,delete b._dragMan,delete b._dragBounds}this._draggableObjects=null},namespace("springroll").DragManager=e,namespace("springroll.pixi").DragManager=e}(),function(){var a,b,c=include("PIXI.BitmapText"),d=include("PIXI.Texture"),e=include("springroll.Loader"),f=include("PIXI.AssetLoader"),g=include("springroll.Application"),h={};h.scales=null;var i=null,j=null,k=null,l=null,m=null,n=null;h.lowHW=!1,h.init=function(c,d,e){a=include("springroll.PixiTask",!1),b=include("springroll.TaskManager",!1),h.scales={},j=c.assets,k={},m=c.path,i=c.sizing,l=c.scale,o(d,e)},h.getPreferredSize=function(){return n[0]},h.getPreferredScale=function(){return l[n[0]]};var o=function(a,b){for(var c,d=b>a?a:b,e=i.length-1;e>=0&&i[e].maxSize>d;--e)c=i[e];n=c.order};h.getUrl=function(a){var b=j[a];if(!b)return null;if(k[a])return k[a];var c;if(b.anim)return c=k[a]=m.anim+b.src;if(h.lowHW&&b.lowHW)return h.scales[a]=l[b.lowHW],c=k[a]=m[b.lowHW]+b.src;for(var d=0;d<n.length;++d){var e=n[d];if(b[e])return h.scales[a]=l[e],c=k[a]=m[e]+b.src}return null},h.load=function(c,d,i){var j,k,l=[];if(Array.isArray(c)||(c=[c]),i){if(!a)return void Debug.error("AssetManager.load() can't find springroll.PixiTask!");for(j=0,k=c.length;k>j;++j)l.push(h.getUrl(c[j]));var m=new a("",l,p.bind(h,c,d));Array.isArray(i)?i.push(m):i instanceof b?i.addTask(m):Debug.error("AssetManager.load() was provided with a taskList that is neither an array or a springroll.TaskManager")}else{var n=e.instance.cacheManager;for(j=0,k=c.length;k>j;++j)l[j]=n.prepare(h.getUrl(c[j]));var o=g.instance.options;this._assetLoader=new f(l,o.crossOrigin,o.basePath),this._assetLoader.onComplete=onloaded.bind(h,c,d),this._assetLoader.load()}};var p=function(a,b){for(var c=0,e=a.length;e>c;++c){var f=a[c],g=h.getUrl(f),i=d.fromFrame(g,!0);i&&(i.baseTexture.resolution=this.scales[f])}b&&b()};h.unload=function(a){if(a instanceof Array)for(var b=a.length-1;b>=0;--b){var c=a[b];q(c)}else q(a)};var q=function(a){if(k[a]){var b=j[a];b&&(b.anim||(b.isFont&&c.fonts[a]&&delete c.fonts[a],d.destroyTexture(k[a]),delete h.scales[a],delete k[a]))}};h.getAnims=function(a,b,c){void 0===b&&(b=4),0>b&&(b=0);var e,f,g=[],h=[];for(e=1;b>e;++e){var i="";f=1;for(var j=0;e>j;++j)i+="0",f*=10;g.unshift(i),h.push(f)}var k,l,m=h.length,n=c||{},o=d.fromFrame;for(var p in a){var q=a[p],r=[];for(e=q.numberMin,l=q.numberMax;l>=e;++e){var s=null;for(f=0;m>f;++f)if(e<h[f]){s=g[f]+e;break}s||(s=e.toString());var t=q.name.replace("#",s),u=o(t,!0);u&&(k=u),r.push(k)}n[p]=r}return n},namespace("springroll").AssetManager=h,namespace("springroll.pixi").AssetManager=h}();}();