/*! SpringRoll 0.0.6 */
!function(){"use strict";!function(a){var b=springroll.CacheManager,c=function(a){if(g)throw"Only one Language can exist at a time!";if(g=this,EventDispatcher.call(this),!a.languages||!a.default)throw"Language requires a language dictionary and a default language!";this._replace=a.replace||"%LANG%",this._current=null,this._default=a.default,this.languages=a.languages,this._stringTable=null,this.setLanguage(this.getPreferredLanguages()),this.modifyUrl=this.modifyUrl.bind(this),b.instance.registerURLFilter(this.modifyUrl)},d=EventDispatcher.prototype,e=c.prototype=Object.create(d),f="changed",g=null;Object.defineProperty(c,"instance",{get:function(){return g}}),Object.defineProperty(e,"current",{get:function(){return this._current}}),e.getSupportedLanguages=function(){var a=[];for(var b in this.languages)a.push(b);return a},e.getPreferredLanguages=function(){var b,c=a.navigator;return b=c.languages?c.languages:c.language?[c.language||c.userLanguage]:[]},e.setLanguage=function(a){if(a){Array.isArray(a)||(a=[a]);for(var b,c=0,d=a.length;d>c;++c){var e=a[c];if(this.languages[e]){b=e;break}if(e.indexOf("-")>=0&&(e=e.split("-")[0],this.languages[e])){b=e;break}}b||(b=this._default),b!=this._current&&(this._current=b,this.trigger(f,b))}},e.setStringTable=function(a){this._stringTable=a},e.getString=function(a){return this._stringTable?this._stringTable[a]:null},e.modifyUrl=function(a){for(;a.indexOf(this._replace)>=0;)a=a.replace(this._replace,this._current);return a},e.destroy=function(){d.destroy.call(this),b.instance&&b.instance.unregisterURLFilter(this.modifyUrl),this.modifyUrl=this.languages=null},namespace("springroll").Language=c}(window);}();