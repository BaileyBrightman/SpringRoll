/*! CloudKidFramework 0.0.6 */
!function(){"use strict";!function(){Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var a,b,c=this.length;c;a=Math.floor(Math.random()*c),b=this[--c],this[c]=this[a],this[a]=b);return this}}),Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}})}(),function(a){a.getRandomInt=function(b,c){return a.floor(a.random()*(c-b+1))+b},a.dist=function(b,c,d,e){return a.sqrt((b-=d)*b+(c-=e)*c)}}(Math),function(){var a,b,c=include("cloudkid.Application"),d=function(d){a=include("cloudkid.LoadTask"),b=include("cloudkid.TaskManager"),c.call(this,Object.merge({updateTween:!0,name:"Untitled",forceMobile:!1,configPath:"assets/config/config.json"},d)),this.name=this.options.name,this.config=null;var e=navigator.userAgent;this.isIOS=e.search(/iPhone|iPad|iPod/)>-1,this.isMobile=this.isIOS||e.search(/Android|Blackberry/)>-1,j=j.bind(this),this.on("init",j)},e=c.prototype,f=d.prototype=Object.create(e),g="loaded",h="configLoaded",i="loading",j=function(){this.off("init",j);var c=[new a("config",this.options.configPath,k.bind(this))];this.trigger(i,c),b.process(c,l.bind(this))},k=function(a,b,c){this.config=a.content,this.trigger(h,this.config,c)},l=function(){this.trigger(g)};f.destroy=function(){this.config=null,e.destroy.call(this)},f.toString=function(){return"[Game name='"+this.name+"'']"},namespace("cloudkid").Game=d}(),function(){var a,b,c,d,e=include("cloudkid.Game"),f=function(b){d=include("cloudkid.Sound"),a=include("cloudkid.VOPlayer"),c=include("cloudkid.Captions",!1),e.call(this,Object.merge({captionsPath:"assets/config/captions.json",swfPath:"assets/swfs/",mute:!1},b)),this._music=null,this.player=null,l=l.bind(this),j=j.bind(this),this.on({loaded:l,loading:j})},g=e.prototype,h=f.prototype=Object.create(g),i="soundReady",j=function(a){null!==this.options.captionsPath?(b=include("cloudkid.LoadTask"),a.push(new b("captions",this.options.captionsPath,k.bind(this)))):k()},k=function(b){var d=null;if(b){d=new c(b.content);for(var e=this.getDisplays(),f=0;f<e.length;++f)this.display.animator&&(this.display.animator.captions=d)}this.player=new a(d)},l=function(){d.init({swfPath:this.options.swfPath,ready:m.bind(this)})},m=function(){var a=this.config.sounds,b=d.instance;a&&(a.vo&&b.loadConfig(a.vo),a.sfx&&b.loadConfig(a.sfx),a.music&&b.loadConfig(a.music)),this.trigger(i)};Object.defineProperty(h,"music",{set:function(a){if(a!=this._music){var b=d.instance;this._music&&b.fadeOut(this._music),this._music=a,this._music&&b.play(this._music,{start:b.fadeIn.bind(b,this._music),loop:-1})}},get:function(){return this._music}}),h.destroy=function(){this.player&&(this.player.destroy(),this.player=null),g.destroy.call(this)},h.toString=function(){return"[SoundGame name='"+this.name+"'']"},namespace("cloudkid").SoundGame=f}(),function(){var a,b=include("cloudkid.SoundGame"),c=function(c){b.call(this,Object.merge({state:null,transition:null,transitionSounds:{"in":"TransitionIn",out:"TransitionOut"}},c)),a=include("cloudkid.StateManager"),this.transition=this.options.transition||null,this.manager=null,this.on("soundReady",i.bind(this))},d=b.prototype,e=c.prototype=Object.create(d),f="initStates",g="statesReady",h="addStates",i=function(){if(this.off("soundReady"),this.trigger(f),!this.transition)throw"No transition on StateGame";this.transition.gotoAndStop&&this.transition.gotoAndStop("onTransitionOut_stop"),this.manager=new a(this.display,this.transition,this.options.transitionSounds),this.trigger(h),this.display.stage.addChild(this.transition),this.options.state&&this.manager.setState(this.options.state),this.trigger(g)};e.addState=function(a,b){this.manager.addState(a,b),this.display.stage.addChild(b.panel)},e.addStates=function(a){for(var b in a)this.addState(b,a[b])},e.destroy=function(){this.manager&&(this.manager.destroy(),this.manager=null),this.transition&&(this.display.adapter.removeChildren(this.transition),this.transition=null),d.destroy.call(this)},e.toString=function(){return"[StateGame name='"+this.name+"'']"},namespace("cloudkid").StateGame=c}(),function(){var a,b=include("cloudkid.StateGame"),c=function(c){a=include("cloudkid.UIScaler"),b.call(this,c),this.pixelRatio=window.devicePixelRatio||1,this.scaler=null,this.ppi=96,this.on("statesReady",g.bind(this))},d=b.prototype,e=c.prototype=Object.create(d),f="scalingReady",g=function(){this.off("statesReady");var b=this.config,c=this.display;if(!b.designedSettings)throw"designedSettings required in config";if(!b.scaling)throw"scaling required in config";this.scaler=a.fromJSON(this,b.designedSettings,b.scaling,!1),this.on("resize",h.bind(this)),this.trigger("resize",c.width,c.height),this.trigger(f)},h=function(b,c){var d=this.ppi;450>=c&&(d*=1.5),a.init(b,c,d),this.scaler.resize()};e.destroy=function(){this.scaler&&(this.scaler.destroy(),this.scaler=null),d.destroy.call(this)},e.toString=function(){return"[ScalingGame name='"+this.name+"'']"},namespace("cloudkid").ScalingGame=c}();}();