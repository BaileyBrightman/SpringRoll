/*! SpringRoll 0.3.0 */
!function(){"use strict";!function(){var a,b,c=function(c,d,e){a=include("springroll.Debug",!1),b||(b=include("springroll.StateManager")),this.stateId=null,this.manager=null,this.panel=c,this._destroyed=!1,this._active=!1,this._isLoading=!1,this._canceled=!1,this._onEnterProceed=null,this._onLoadingComplete=null,this._enabled=!1,this.nextState=d||null,this.prevState=e||null,this.panel.visible=!1},d=c.prototype;Object.defineProperty(d,"canceled",{get:function(){return this._canceled}}),d._internalExit=function(){this._isTransitioning&&(this._isTransitioning=!1,this.manager._display.animator.stop(this.panel)),this._enabled=!1,this.panel.visible=!1,this._active=!1,this.exit()},d.exit=function(){},d._internalExitStart=function(){this.exitStart()},d.exitStart=function(){},d._internalEnter=function(a){this._isTransitioning&&(this._isTransitioning=!1,this.manager._display.animator.stop(this.panel)),this._enabled=!1,this._active=!0,this._canceled=!1,this._onEnterProceed=a,this.enter(),this._onEnterProceed&&(this._onEnterProceed(),this._onEnterProceed=null)},d.loadingStart=function(){this._isLoading||(this._isLoading=!0,this.manager.loadingStart(),this._onLoadingComplete=this._onEnterProceed,this._onEnterProceed=null)},d.loadingDone=function(){this._isLoading&&(this._isLoading=!1,this.manager.loadingDone(),this._onLoadingComplete&&(this._onLoadingComplete(),this._onLoadingComplete=null))},d._internalCancel=function(){this._active=!1,this._canceled=!0,this._isLoading=!1,this._internalExit(),this.cancel()},d.cancel=function(){},d.enter=function(){},d._internalEnterDone=function(){this._canceled||(this.enabled=!0,this.enterDone())},d.enterDone=function(){},Object.defineProperty(d,"active",{get:function(){return this._active}}),Object.defineProperty(d,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a}}),Object.defineProperty(d,"destroyed",{get:function(){return this._destroyed}}),d.destroy=function(){this.panel=null,this.manager=null,this._destroyed=!0,this._onEnterProceed=null,this._onLoadingComplete=null},namespace("springroll").BaseState=c}(),function(a){{var b=function(b,c,d){this.currentState=c,this.visibleState=d===a?c:d,this.type=b};b.prototype}b.VISIBLE="onVisible",b.HIDDEN="onHidden",namespace("springroll").StateEvent=b}(),function(a){var b=(include("springroll.Debug",!1),include("springroll.EventDispatcher")),c=(include("springroll.BaseState"),include("springroll.StateEvent")),d=function(a,c,d){b.call(this),this._display=a,this._transition=c,this._transitionSounds=d||null,this._states={},this._state=null,this._stateId=null,this._oldState=null,this._isLoading=!1,this._isTransitioning=!1,this._destroyed=!1,this._queueStateId=null,this._transition.stop&&this._transition.stop(),this.hideBlocker(),this._loopTransition=this._loopTransition.bind(this),this._onTransitionOut=this._onTransitionOut.bind(this),this._onStateLoaded=this._onStateLoaded.bind(this),this._onTransitionIn=this._onTransitionIn.bind(this)},e=extend(d,b);d.TRANSITION_IN="onTransitionIn",d.TRANSITION_IN_DONE="onTransitionInDone",d.TRANSITION_OUT="onTransitionOut",d.TRANSITION_OUT_DONE="onTransitionOutDone",d.TRANSITION_INIT_DONE="onInitDone",d.LOADING_START="onLoadingStart",d.LOADING_DONE="onLoadingDone",e.addState=function(a,b){this._states[a]=b,b.stateId=a,b.manager=this},e.changeTransition=function(a){this._transition=a},e.getCurrentState=function(){return this._state},e.getStateById=function(a){return this._states[a]},e.isBusy=function(){return this._isLoading||this._isTransitioning},e.loadingStart=function(){this._destroyed||(this.trigger(d.LOADING_START),this._loopTransition())},e.loadingDone=function(){this._destroyed||this.trigger(d.LOADING_DONE)},e.showBlocker=function(){this._display.enabled=!1},e.hideBlocker=function(){this._display.enabled=!0},e.refresh=function(){this.setState(this._stateId)},Object.defineProperty(e,"state",{set:function(a){this.setState(a)},get:function(){return this._stateId}}),e.setState=function(a){return this._isTransitioning?void(this._queueStateId=a):(this._stateId=a,this.showBlocker(),this._oldState=this._state,this._state=this._states[a],void(this._oldState?this._isLoading?(this._oldState._internalCancel(),this._isLoading=!1,this._state._internalEnter(this._onStateLoaded)):(this._isTransitioning=!0,this._oldState._internalExitStart(),this.showBlocker(),this.trigger(d.TRANSITION_OUT),this._transitioning(d.TRANSITION_OUT,this._onTransitionOut)):(this._isTransitioning=!0,this._transition.visible=!0,this._loopTransition(),this.trigger(d.TRANSITION_INIT_DONE),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded))))},e._onTransitionOut=function(){this.trigger(d.TRANSITION_OUT_DONE),this._isTransitioning=!1,this.has(c.HIDDEN)&&this.trigger(c.HIDDEN,new c(c.HIDDEN,this._state,this._oldState)),this._oldState.panel.visible=!1,this._oldState._internalExit(),this._oldState=null,this._loopTransition(),this._processQueue()||(this._isLoading=!0,this._state._internalEnter(this._onStateLoaded))},e._onStateLoaded=function(){this._isLoading=!1,this._isTransitioning=!0,this.has(c.VISIBLE)&&this.trigger(c.VISIBLE,new c(c.VISIBLE,this._state)),this._state.panel.visible=!0,this.trigger(d.TRANSITION_IN),this._transitioning(d.TRANSITION_IN,this._onTransitionIn)},e._onTransitionIn=function(){this._transition.visible=!1,this.trigger(d.TRANSITION_IN_DONE),this._isTransitioning=!1,this.hideBlocker(),this._processQueue()||this._state._internalEnterDone()},e._processQueue=function(){if(this._queueStateId){var a=this._queueStateId;return this._queueStateId=null,this.setState(a),!0}return!1},e._loopTransition=function(){var a,b=this._display.animator;this._transitionSounds&&(a=this._transitionSounds.loop),b.instanceHasAnimation(this._transition,"transitionLoop")&&b.play(this._transition,{anim:"transitionLoop",audio:a},this._loopTransition)},e.showTransitionOut=function(a){this.showBlocker();var b=this,c=function(){b._loopTransition(),a&&a()};this._transitioning(d.TRANSITION_OUT,c)},e.showTransitionIn=function(a){var b=this,c=function(){b.hideBlocker(),b._transition.visible=!1,a&&a()};this._transitioning(d.TRANSITION_IN,c)},e._transitioning=function(a,b){var c=this._transition;c.visible=!0;var e;this._transitionSounds&&(e=a==d.TRANSITION_IN?this._transitionSounds["in"]:this._transitionSounds.out),this._display.animator.play(c,{anim:a,audio:e},b)},e.next=function(){var a=typeof this._state.nextState;this._state.nextState&&("function"===a?this._state.nextState():"string"===a&&this.setState(this._state.nextState))},e.previous=function(){var a=typeof this._state.prevState;this._state.prevState&&("function"===a?this._state.prevState():"string"===a&&this.setState(this._state.prevState))},e.destroy=function(){if(this._destroyed=!0,this.off(),this._display.animator.stop(this._transition),this._state&&this._state._internalExit(),this._states)for(var a in this._states)this._states[a].destroy(),delete this._states[a];this._transition=null,this._state=null,this._oldState=null,this._states=null},namespace("springroll").StateManager=d}(),function(a){var b,c,d,e,f=include("springroll.Application"),g=include("springroll.StateManager"),h=function(a){b=include("springroll.Debug",!1),e=include("springroll.Sound"),c=include("springroll.VOPlayer"),f.call(this,Object.merge({swfPath:"assets/swfs/",audioTypes:["ogg","mp3"],mute:!1,captions:null,updateTween:!0,name:"",forceMobile:!1,state:null,transition:null,transitionSounds:{"in":"TransitionIn",out:"TransitionOut"}},a)),this.name=this.options.name,this._music=null,this._musicInstance=null,this.player=new c,this.captions=null,this.transition=this.options.transition||null,this.manager=null,this.isIOS=navigator.userAgent.search(/iPhone|iPad|iPod/)>-1,this.isAndroid=navigator.userAgent.search(/Android/)>-1,this.hasTouch=!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0),this.once("beforeInit",o.bind(this))},i=f.prototype,j=extend(h,f),k="soundReady",l="initStates",m="statesReady",n="addStates",o=function(){this._readyToInit=!1,e.init({swfPath:this.options.swfPath,ready:p.bind(this),types:this.options.audioTypes})},p=function(){this._readyToInit=!0,this.trigger(k),this._doInit()};j.initStates=function(a,b){if(this.trigger(l),!this.transition)throw"No options.transition";this.transition.gotoAndStop&&this.transition.gotoAndStop("onTransitionOut_stop");var c=this.manager=new g(this.display,this.transition,this.options.transitionSounds),d=this.display.stage;if(a)for(var e in a)c.addState(e,a[e]),d.addChild(a[e].panel);this.trigger(n),d.addChild(this.transition),this.options.state&&c.setState(this.options.state),this.trigger(m),b&&"function"==typeof b&&b()},j.addState=function(a,b){if(!this.manager)throw"StateManager no initialized";this.manager.addState(a,b),this.display.stage.addChild(b.panel)},j.addStates=function(a){for(var b in a)this.addState(b,a[b])},Object.defineProperty(j,"music",{set:function(a){if(a!=this._music){var b=e.instance;this._music&&(b.fadeOut(this._music),this._musicInstance=null),this._music=a,this._music&&(this._musicInstance=b.play(this._music,{start:b.fadeIn.bind(b,this._music),loop:-1}))}},get:function(){return this._music}}),Object.defineProperty(j,"musicInstance",{get:function(){return this._musicInstance}}),j.addSounds=function(a){return e.instance.loadConfig(a)},j.addCaptions=function(a){if(this.captions)this.captions.setDictionary(a);else{d=include("springroll.Captions");var b=new d(a,this.options.captions);this.player.captions=b,this.captions=b,this.getDisplays(function(a){a.animator&&(a.animator.captions=b)})}},j.destroy=function(){this.manager&&(this.manager.destroy(),this.manager=null),this.player&&(this.player.destroy(),this.player=null),this.transition&&(this.display.adapter.removeChildren(this.transition),this.transition=null),this.captions=null,i.destroy.call(this)},j.toString=function(){return"[Game name='"+this.name+"'']"},namespace("springroll").Game=h}();}();