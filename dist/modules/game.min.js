/*! CloudKidFramework 0.0.6 */
!function(){"use strict";!function(){Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var a,b,c=this.length;c;a=Math.floor(Math.random()*c),b=this[--c],this[c]=this[a],this[a]=b);return this}}),Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}})}(),function(a){a.getRandomInt=function(b,c){return a.floor(a.random()*(c-b+1))+b},a.dist=function(b,c,d,e){return a.sqrt((b-=d)*b+(c-=e)*c)}}(Math),function(a){var b,c,d=include("cloudkid.Application"),e=function(e){b=include("cloudkid.LoadTask"),c=include("cloudkid.TaskManager"),e.updateTween===a&&(e.updateTween=!0),d.call(this,e),this.name=e.name||"Untitled",this.config=null;var f=navigator.userAgent;this.isIOS=f.search(/iPhone|iPad|iPod/)>-1,this.isMobile=this.isIOS||f.search(/Android|Blackberry/)>-1,k=k.bind(this),this.on("init",k)},f=d.prototype,g=e.prototype=Object.create(f),h="loaded",i="configLoaded",j="loading",k=function(){this.off("init",k);var a=[new b("config",this.options.configPath||"assets/config/config.json",l.bind(this))];this.trigger(j,a),c.process(a,m.bind(this))},l=function(a,b,c){this.config=a.content,this.trigger(i,this.config,c)},m=function(){this.trigger(h)};g.destroy=function(){this.config=null,f.destroy.call(this)},g.toString=function(){return"[Game name='"+this.name+"'']"},namespace("cloudkid").Game=e}(),function(){var a,b,c,d=include("cloudkid.Game"),e=function(e){c=include("cloudkid.Sound"),a=include("cloudkid.VOPlayer"),b=include("cloudkid.Captions",!1),d.call(this,e),this._music=null,this.player=null,k=k.bind(this),i=i.bind(this),this.on({loaded:k,loading:i})},f=d.prototype,g=e.prototype=Object.create(f),h="soundReady",i=function(a){null!==this.options.captionsPath?a.push(new LoadTask("captions",this.options.captionsPath||"assets/config/captions.json",j.bind(this))):j()},j=function(c){var d=null;c&&(d=new b(c.content)),this.player=new a(d)},k=function(){c.init({swfPath:this.options.swfPath,ready:l.bind(this)})},l=function(){var a=this.config.sounds,b=c.instance;a&&(a.vo&&b.loadConfig(a.vo),a.sfx&&b.loadConfig(a.sfx),a.music&&b.loadConfig(a.music)),this.trigger(h)};Object.defineProperty(g,"music",{set:function(a){if(a!=this._music){var b=c.instance;this._music&&b.fadeOut(this._music),this._music=a,this._music&&b.play(this._music,{start:b.fadeIn.bind(b,this._music),loop:-1})}},get:function(){return this._music}}),g.destroy=function(){this.player&&(this.player.destroy(),this.player=null),f.destroy.call(this)},g.toString=function(){return"[SoundGame name='"+this.name+"'']"},namespace("cloudkid").SoundGame=e}(),function(){var a,b=(include("cloudkid.Game"),function(b){SoundGame.call(this,b),a=include("cloudkid.StateManager"),this.transition=b.transition||null,this.manager=null,this.on("soundReady",g.bind(this))}),c=SoundGame.prototype,d=b.prototype=Object.create(c),e="statesReady",f="addStates",g=function(){if(this.off("soundReady"),this.trigger(INIT_STATE_MANAGER),!this.transition)throw"No transition on StateGame";this.transition.gotoAndStop&&this.transition.gotoAndStop("onTransitionOut_stop"),this.manager=new a(this.display,this.transition,options.transitionSounds||{"in":"TransitionEnd",out:"TransitionStart"}),this.trigger(f),this.display.stage.addChild(this.transition),options.state&&this.manager.setState(options.state),this.trigger(e)};d.addState=function(a,b){this.manager.addState(a,b),this.display.stage.addChild(b.panel)},d.addStates=function(a){for(var b in a)this.addState(b,a[b])},d.destroy=function(){this.manager&&(this.manager.destroy(),this.manager=null),this.transition&&(this.display.adapter.removeChildren(this.transition),this.transition=null),c.destroy.call(this)},d.toString=function(){return"[StateGame name='"+this.name+"'']"},namespace("cloudkid").StateGame=b}(),function(){var a,b=include("cloudkid.StateGame"),c=function(c){a=include("cloudkid.UIScaler"),b.call(this,c),this.pixelRatio=window.devicePixelRatio||1,this.scaler=null,this.ppi=96,this.on("statesReady",g.bind(this))},d=b.prototype,e=c.prototype=Object.create(d),f="scalingReady",g=function(){this.off("statesReady");var b=this.config,c=this.display;if(!b.designedSettings)throw"designedSettings required in config";if(!b.scaling)throw"scaling required in config";this.scaler=a.fromJSON(this,b.designedSettings,b.scaling,!1),this.on("resize",h.bind(this)),this.trigger("resize",c.width,c.height),this.trigger(f)},h=function(b,c){var d=this.ppi;450>=c&&(d*=1.5),a.init(b,c,d),this.scaler.resize()};e.destroy=function(){this.scaler&&(this.scaler.destroy(),this.scaler=null),d.destroy.call(this)},e.toString=function(){return"[ScalingGame name='"+this.name+"'']"},namespace("cloudkid").ScalingGame=c}();}();