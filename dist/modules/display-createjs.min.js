/*! SpringRoll 0.0.7 */
!function(){"use strict";!function(){"use strict";var a=include("createjs.Point").prototype;a.dotProd=function(a){return this.x*a.x+this.y*a.y},a.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.lengthSq=function(){return this.x*this.x+this.y*this.y},a.normalize=function(){var a=1/this.length();this.x*=a,this.y*=a},a.subtract=function(a){this.x-=a.x,this.y-=a.y},a.add=function(a){this.x+=a.x,this.y+=a.y},a.truncate=function(a){var b=this.length();if(b>a){var c=a/b;this.x*=c,this.y*=c}},a.scaleBy=function(a){this.x*=a,this.y*=a},a.distance=function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},a.distanceSq=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c}}(),function(){var a={};a.gotoAndCache=function(a,b,c){b=void 0===b?0:b,c=void 0===c?15:c,a.timeline&&a.gotoAndStop(b);var d=a.nominalBounds;a.cache(d.x-c,d.y-c,d.width+2*c,d.height+2*c,1)},namespace("springroll").MovieClipUtils=a,namespace("springroll.createjs").MovieClipUtils=a}(),function(){"use strict";var a={};a.loadSpriteSheet=function(a,b,c){c>0||(c=1);for(var d in a){var e=a[d],f=d.indexOf(".");f>0&&(d=d.substring(0,f));var g=lib[d],h=lib[d]=function(){createjs.Container.call(this);var a=new createjs.Bitmap(this._image);this.addChild(a),a.sourceRect=this._frameRect;var b=this._scale;a.setTransform(this._frameOffsetX*b,this._frameOffsetY*b,b,b)},i=h.prototype=new createjs.Container;i._image=b,i._scale=c;var j=e.frame;i._frameRect=new createjs.Rectangle(j.x,j.y,j.w,j.h),e.trimmed?(i._frameOffsetX=e.spriteSourceSize.x,i._frameOffsetY=e.spriteSourceSize.y):i._frameOffsetX=i._frameOffsetY=0,i.nominalBounds=g&&g.prototype.nominalBounds?g.prototype.nominalBounds:new createjs.Rectangle(0,0,e.sourceSize.w*c,e.sourceSize.h*c)}},a.bitmapFromTexture=function(a,b){b>0||(b=1);var c=new createjs.Container,d=new createjs.Bitmap(a.image);return c.addChild(d),d.sourceRect=a.frame,d.setTransform(a.offset.x*b,a.offset.y*b,b,b),c.nominalBounds=new createjs.Rectangle(0,0,a.width*b,a.height*b),c},a.replaceWithScaledBitmap=function(a,b){if(1!=b&&b>0){var c,d,e,f;if("string"==typeof a)c=a,d=lib[c],d&&(e=lib[c]=function(){createjs.Container.call(this);var a=new this._oldBM;this.addChild(a),a.setTransform(0,0,this._scale,this._scale)},f=e.prototype=new createjs.Container,f._oldBM=d,f._scale=b,f.nominalBounds=d.prototype.nominalBounds);else for(c in a)d=lib[c],d&&(e=lib[c]=function(){createjs.Container.call(this);var a=new this._oldBM;this.addChild(a),a.setTransform(0,0,this._scale,this._scale)},f=e.prototype=new createjs.Container,f._oldBM=d,f._scale=b,f.nominalBounds=d.prototype.nominalBounds)}},namespace("createjs").BitmapUtils=a,namespace("springroll.createjs").BitmapUtils=a}(),function(a){var b={};b.Circle=include("createjs.Circle",!1),b.Ellipse=include("createjs.Ellipse",!1),b.Rectangle=include("createjs.Rectangle"),b.Sector=include("createjs.Sector",!1),b.Point=include("createjs.Point"),b.Polygon=include("createjs.Polygon",!1),b.useRadians=!1,b.getLocalBounds=function(b){var c;if(b.nominalBounds)c=b.nominalBounds.clone();else if(b.width!==a&&b.height!==a){var d=b.width/b.scaleX,e=b.height/b.scaleY;c=new createjs.Rectangle(-b.regX,-b.regY,d,e)}else b.getLocalBounds&&(c=b.getLocalBounds(),c&&(c=c.clone())),c||(c=new createjs.Rectangle);return c.right=c.x+c.width,c.bottom=c.y+c.height,c},b.getScale=function(b,c){return c!==a?b["scale"+c.toUpperCase()]:{x:b.scaleX,y:b.scaleY}},b.setPosition=function(b,c,d){return d!==a?b[d]=c:(c.x!==a&&(b.x=c.x),c.y!==a&&(b.y=c.y)),b},b.getPosition=function(b,c){return c!==a?b[c]:{x:b.x,y:b.y}},b.setScale=function(b,c,d){return d!==a?b["scale"+d.toUpperCase()]=c:b.scaleX=b.scaleY=c,b},b.setPivot=function(b,c,d){return d!==a&&(b["reg"+d.toUpperCase()]=c),b.regX=c.x,b.regY=c.y,b},b.setHitArea=function(a,b){return a.hitShape=b,a},b.getBitmapSize=function(a){return{h:a.image.height,w:a.image.width}},b.removeChildren=function(a){a.removeAllChildren()},namespace("springroll.createjs").DisplayAdapter=b}(),function(){var a,b,c=include("springroll.AbstractDisplay"),d=function(d,e){a||(a=include("createjs.Stage"),b=include("createjs.Touch")),c.call(this,d,e),e=e||{},this.mouseOverRate=e.mouseOverRate||30,"spriteStage"==e.stageType||(this.stage=new a(d)),this.stage.autoClear=!!e.clearView,this.animator=include("springroll.createjs.Animator"),this.adapter=include("springroll.createjs.DisplayAdapter")},e=c.prototype,f=extend(d,c),g={delta:0};Object.defineProperty(f,"enabled",{get:function(){return this._enabled},set:function(a){Object.getOwnPropertyDescriptor(e,"enabled").set.call(this,a),a?(this.stage.enableMouseOver(this.mouseOverRate),this.stage.enableDOMEvents(!0),b.enable(this.stage)):(this.stage.enableMouseOver(!1),this.stage.enableDOMEvents(!1),b.disable(this.stage),this.canvas.style.cursor="")}}),f.render=function(a,b){(b||!this.paused&&this._visible)&&(g.delta=a,this.stage.update(g))},f.destroy=function(){this.stage.removeAllChildren(!0),e.destroy.call(this)},namespace("springroll").CreateJSDisplay=d,namespace("springroll.createjs").CreateJSDisplay=d}(),function(){var a=function(){this.onComplete=null,this.onCancelled=null,this.eventList=null,this.listIndex=-1,this.instance=null,this.firstFrame=-1,this.lastFrame=-1,this.isLooping=!1,this.length=0,this.useCaptions=!1,this._paused=!1,this.startTime=0,this.duration=0,this.speed=1,this._time_sec=0,this.soundAlias=null,this.soundInst=null,this.playSound=!1,this.soundStart=0,this.soundEnd=0,this.complete=!1},b=a.prototype;b._nextItem=function(){if(this.soundEnd=this.soundStart=0,this.isLooping=this.playSound=this.useCaptions=!1,this.soundInst=this.soundAlias=null,this.startTime=this.length=0,this.firstFrame=this.lastFrame=-1,++this.listIndex>=this.eventList.length)return void(this.complete=!0);var a=this.eventList[this.listIndex];switch(typeof a){case"object":this.firstFrame=a.first,this.lastFrame=a.last,this.length=this.lastFrame-this.firstFrame;var b=this.instance.framerate;this.startTime=this.firstFrame/b,this.duration=this.length/b,this.speed=a.speed,this.isLooping=a.loop;var c=a.animStart;this._time_sec=0>c?Math.random()*this.duration:c,a.alias&&(this.soundAlias=a.alias,this.soundStart=a.audioStart,this.playSound=!0,this.useCaptions=a.useCaptions);break;case"number":this.duration=a,this._time_sec=0;break;case"function":a(),this._nextItem()}},Object.defineProperty(b,"time",{get:function(){return 1e3*this._time_sec},set:function(a){this._time_sec=.001*a}}),Object.defineProperty(b,"paused",{get:function(){return this._paused},set:function(a){a!=this._paused&&(this._paused=!!a,this.soundInst&&(this.paused?this.soundInst.pause():this.soundInst.unpause()))}}),namespace("springroll").AnimatorTimeline=a,namespace("springroll.createjs").AnimatorTimeline=a}(),function(a){var b,c,d=include("springroll.Application"),e=include("springroll.createjs.AnimatorTimeline"),f={};f.debug=!1,f.captions=null;var g=null,h=null,i=null,j=!1;f.init=function(){g=[],h=[],i={},j=!1,c=include("springroll.Sound",!1),b=include("springroll.Debug",!1)},f.destroy=function(){f.stopAll(null,!0),f.captions=null,g=null,h=null,i=null},d.registerInit(f.init),d.registerDestroy(f.destroy),f.play=function(b,c,d,e){var h,j;d&&"function"!=typeof d?(j=d,d=j.onComplete,e=j.onCancelled):e===!0&&(e=d),"string"==typeof c&&j&&(h=j.audio||j.soundData||null,c={anim:c,audio:h}),Array.isArray(c)||(c=[c]),g||f.init(),i[b.id]!==a&&f.stop(b);var k=f._makeTimeline(b,c,d,e);if(k.eventList&&k.eventList.length>=1)return k._nextItem(),b.elapsedTime=k.startTime+k._time_sec,b.play(),b._tick(),f._hasTimelines()||f._startUpdate(),g.push(k),i[b.id]=k,k;return d&&d(),null},f._makeTimeline=function(a,b,g,h){var i=new e;if(!f.canAnimate(a))return i;a.tickEnabled=!1;var j;a.framerate?j=a.framerate:(j=d.instance.options.fps,j||(j=15),a.framerate=j),i.instance=a,i.eventList=[],i.onComplete=g,i.onCancelled=h,i.speed=n;for(var k,l,m,n,o,p=a.getLabels(),q=0,r=b.length;r>q;++q){var s=b[q];switch(typeof s){case"string":k=s,l=null,m=0,n=1;break;case"object":k=s.anim,l=s.audio,m="number"==typeof s.start?.001*s.start:0,n=s.speed>0?s.speed:1;break;case"number":i.eventList.push(.001*s);continue;case"function":i.eventList.push(s);continue;default:continue}for(var t,u=k+"_stop",v=k+"_loop",w=-1,x=-1,y=!1,z=0,A=p.length;A>z;++z)if(t=p[z],t.label==k)w=t.position;else{if(t.label==u){x=t.position;break}if(t.label==v){x=t.position,y=!0;break}}var B;w>=0&&x>0&&(B={first:w,last:x,loop:y,speed:n,animStart:m},l&&c&&("string"==typeof l?(m=0,o=l):(m=l.start>0?.001*l.start:0,o=l.alias),c.instance.exists(o)&&(c.instance.preloadSound(o),B.alias=o,B.audioStart=m,B.useCaptions=f.captions&&f.captions.hasCaption(o))),i.eventList.push(B))}return i},f.canAnimate=function(b){return b?b instanceof createjs.MovieClip?!0:b.framerate!==a&&b.getLabels!==a&&b.elapsedTime!==a&&b._tick!==a&&b.gotoAndStop!==a&&b.play!==a&&b.id!==a?!0:!1:!1},f._canAnimate=function(a){return f.canAnimate(a)},f.instanceHasAnimation=function(a,b){if("function"!=typeof a.getLabels)return!1;for(var c,d=a.getLabels(),e=-1,f=-1,g=b+"_stop",h=b+"_loop",i=0,j=d.length;j>i;++i)if(c=d[i],c.label==b)e=c.position;else if(c.label==g||c.label==h){f=c.position;break}return e>=0&&f>=0},f.getDuration=function(a,b){if("function"!=typeof a.getLabels)return 0;if(Array.isArray(b)){for(var c=0,e=0,g=b.length;g>e;e++)c+=f.getDuration(a,b[e]);return c}if("number"==typeof b)return b;if("object"==typeof b&&b.anim)b=b.anim;else if("string"!=typeof b)return 0;for(var h,i=a.getLabels(),j=-1,k=-1,l=b+"_stop",m=b+"_loop",n=0,o=i.length;o>n;++n)if(h=i[n],h.label==b)j=h.position;else if(h.label==l||h.label==m){k=h.position;break}if(j>=0&&k>0){if(!a.framerate){var p=d.instance.options.fps;p||(p=15),a.framerate=p}return(k-j)/a.framerate*1e3}return 0},f.stop=function(a,b){if(g){var c=i[a.id];c&&(b&&(c.onComplete=c.onCancelled=null),f._remove(c,!0))}},f.stopAll=function(a,b){if(f._hasTimelines())for(var c,d=g.slice(),e=0,h=d.length;h>e;e++)c=d[e],(!a||a.contains(c.instance))&&(b&&(c.onComplete=c.onCancelled=null),f._remove(c,!0))},f._remove=function(a,b){var c=h.indexOf(a);if(c>=0&&h.splice(c,1),c=g.indexOf(a),!(0>c)){var d=a.onComplete,e=a.onCancelled;a.instance.stop(),b&&a.soundInst&&a.soundInst.stop(),g.splice(c,1),delete i[a.instance.id],a.useCaptions&&f.captions.stop(),a.instance=null,a.eventList=null,a.onComplete=null,a.onCancelled=null,f._hasTimelines()||f._stopUpdate(),b?e&&e():d&&d()}},f.pause=function(){if(g&&!j){j=!0;for(var a=0,b=g.length;b>a;a++)g[a].paused=!0;f._stopUpdate()}},f.resume=function(){if(g&&j){j=!1;for(var a=0,b=g.length;b>a;a++)g[a].paused=!1;f._hasTimelines()&&f._startUpdate()}},f.pauseInGroup=function(a,b){if(f._hasTimelines()&&b)for(var c=0,d=g.length;d>c;c++)b.contains(g[c].instance)&&(g[c].paused=a)},f.getTimeline=function(b){return f._hasTimelines()&&i[b.id]!==a?i[b.id]:null},f.getPaused=function(){return j},f._startUpdate=function(){d.instance&&d.instance.on("update",f._update)},f._stopUpdate=function(){d.instance&&d.instance.off("update",f._update)},f._update=function(a){if(g){for(var b,d,e,i,j,m=.001*a,n=g.length-1;n>=0;--n)if(b=g[n],d=b.instance,!b.paused){if(j=!1,i=0,b.soundInst)if(b.soundInst.isValid){if(e=.001*b.soundInst.position,0>e&&(e=0),b._time_sec=b.soundStart+e,b.useCaptions&&f.captions.seek(b.soundInst.position),b._time_sec>=b.duration){if(d.gotoAndStop(b.lastFrame),i=b._time_sec-b.duration,b._nextItem(),b.complete){h.push(b);continue}j=!0}}else{if(b._nextItem(),b.complete){h.push(b);continue}j=!0}else{if(b._time_sec+=m*b.speed,b._time_sec>=b.duration)if(b.isLooping)b._time_sec-=b.duration,b.onComplete&&b.onComplete();else{if(i=b._time_sec-b.duration,b.firstFrame>=0&&d.gotoAndStop(b.lastFrame),b._nextItem(),b.complete){h.push(b);continue}j=!0}b.playSound&&b._time_sec>=b.soundStart&&(b._time_sec=b.soundStart,b.playSound=!1,b.soundInst=c.instance.play(b.soundAlias,l.bind(this,b,b.listIndex,b.soundAlias),k.bind(this,b,b.listIndex)),b.useCaptions&&f.captions.play(b.soundAlias))}j&&(b._time_sec+=i,b.firstFrame>=0&&d.gotoAndPlay(b.firstFrame),b.playSound&&b._time_sec>=b.soundStart&&(b._time_sec=b.soundStart,b.playSound=!1,b.soundInst=c.instance.play(b.soundAlias,l.bind(this,b,b.listIndex,b.soundAlias),k.bind(this,b,b.listIndex)),b.useCaptions&&f.captions.play(b.soundAlias))),b.firstFrame>=0&&(d.elapsedTime=b.startTime+b._time_sec,d.advance())}for(n=0;n<h.length;n++)b=h[n],f._remove(b)}};var k=function(a,b){a.listIndex==b&&(a.soundEnd=a.soundStart+.001*a.soundInst.length)},l=function(a,b,c){f.captions&&f.captions.currentAlias==c&&f.captions.stop(),a.listIndex==b&&(a.soundEnd>0&&a.soundEnd>a._time_sec&&(a._time_sec=a.soundEnd),a.soundInst=null)};f._hasTimelines=function(){return g?g.length>0:!1},f.toString=function(){return"[springroll.createjs.Animator]"},namespace("springroll").Animator=f,namespace("springroll.createjs").Animator=f}(),function(a){function b(a){if(!a||"object"!=typeof a)return null;var b=a.constructor();b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}{var c,d=include("createjs.Rectangle"),e=include("createjs.Container"),f=include("createjs.ColorMatrix"),g=include("createjs.ColorFilter"),h=include("createjs.ColorMatrixFilter"),i=include("createjs.Text"),j=include("createjs.Event"),k=include("createjs.Point"),l=include("createjs.Bitmap"),m=function(a,b,d){c=include("springroll.Debug",!1),e.call(this),this.back=null,this.label=null,this._overCB=this._onMouseOver.bind(this),this._outCB=this._onMouseOut.bind(this),this._downCB=this._onMouseDown.bind(this),this._upCB=this._onMouseUp.bind(this),this._clickCB=this._onClick.bind(this),this._stateFlags={},this._statePriority=null,this._stateData={},this._width=0,this._height=0,this._offset=new k,this.buttonInitialize(a,b,d)},n=extend(m,e);e.prototype}m.BUTTON_PRESS="buttonPress";var o=["disabled","enabled","up","over","down"],p=["disabled","down","over","up"];n.buttonInitialize=function(c,e,f){this.mouseChildren=!1;var g,h=this._stateData;e&&(g=b(e),delete g.text,g.x===a&&(g.x="center"),g.y===a&&(g.y="center"));var j,k,m,n,o;if(c.image){j=c.image,this._statePriority=c.priority||p;var q,r;for(n=this._statePriority.length-1;n>=0;--n)o=this._statePriority[n],this._addProperty(o),"disabled"!=o&&"up"!=o&&(this._stateFlags[o]=!1),q=c[o],h[o]=q?b(q):h.up,e&&(q&&q.label?(q=q.label,r=h[o].label={},r.font=q.font||g.font,r.color=q.color||g.color,r.stroke=q.hasOwnProperty("stroke")?q.stroke:g.stroke,r.shadow=q.hasOwnProperty("shadow")?q.shadow:g.shadow,r.textBaseline=q.textBaseline||g.textBaseline,r.x=q.x||g.x,r.y=q.y||g.y):h[o].label=g);if(h.up.trim){var s=h.up.trim;k=s.width,m=s.height}else k=h.up.src.width,m=h.up.src.height;!h.up,h.over||(h.over=h.up),h.down||(h.down=h.up),h.disabled||(h.disabled=h.up),c.offset?(this._offset.x=c.offset.x,this._offset.y=c.offset.y):this._offset.x=this._offset.y=0}else j=c,k=j.width,m=j.height/3,this._statePriority=p,h.disabled=h.up={src:new d(0,0,k,m)},h.over={src:new d(0,m,k,m)},h.down={src:new d(0,2*m,k,m)},g&&(h.up.label=h.over.label=h.down.label=h.disabled.label=g),this._offset.x=this._offset.y=0;this.back=new l(j),this.addChild(this.back),this._width=k,this._height=m,e&&(this.label=new i(e.text||"",h.up.label.font,h.up.label.color),this.addChild(this.label)),this.enabled=f===a?!0:!!f},Object.defineProperty(n,"width",{get:function(){return this._width*this.scaleX},set:function(a){this.scaleX=a/this._width}}),Object.defineProperty(n,"height",{get:function(){return this._height*this.scaleY},set:function(a){this.scaleY=a/this._height}}),n.setText=function(a){if(this.label){this.label.text=a;for(var b,c=0,d=this._statePriority.length;d>c;++c)if(this._stateFlags[this._statePriority[c]]){b=this._stateData[this._statePriority[c]];break}b||(b=this._stateData.up),b=b.label,this.label.x="center"==b.x?.5*(this._width-this.label.getMeasuredWidth())+this._offset.x:b.x+this._offset.x,this.label.y="center"==b.y?.5*this._height+this._offset.y:b.y+this._offset.y}},Object.defineProperty(n,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(a){this._stateFlags.disabled=!a,a?(this.cursor="pointer",this.addEventListener("mousedown",this._downCB),this.addEventListener("mouseover",this._overCB),this.addEventListener("mouseout",this._outCB)):(this.cursor=null,this.removeEventListener("mousedown",this._downCB),this.removeEventListener("mouseover",this._overCB),this.removeEventListener("mouseout",this._outCB),this.removeEventListener("pressup",this._upCB),this.removeEventListener("click",this._clickCB),this._stateFlags.down=this._stateFlags.over=!1),this._updateState()}}),n._addProperty=function(a){o.indexOf(a)>=0||Object.defineProperty(this,a,{get:function(){return this._stateFlags[a]},set:function(b){this._stateFlags[a]=b,this._updateState()}})},n._updateState=function(){if(this.back){for(var a,b=0,c=this._statePriority.length;c>b;++b)if(this._stateFlags[this._statePriority[b]]){a=this._stateData[this._statePriority[b]];break}a||(a=this._stateData.up),this.back.sourceRect=a.src,a.trim?(this.back.x=a.trim.x+this._offset.x,this.back.y=a.trim.y+this._offset.y):(this.back.x=this._offset.x,this.back.y=this._offset.y),this.label&&(a=a.label,this.label.textBaseline=a.textBaseline||"middle",this.label.stroke=a.stroke,this.label.shadow=a.shadow,this.label.font=a.font,this.label.color=a.color||"#000",this.label.x="center"==a.x?.5*(this._width-this.label.getMeasuredWidth())+this._offset.x:a.x+this._offset.x,this.label.y="center"==a.y?.5*this._height+this._offset.y:a.y+this._offset.y)}},n._onMouseDown=function(){this.addEventListener("pressup",this._upCB),this.addEventListener("click",this._clickCB),this._stateFlags.down=!0,this._updateState()},n._onMouseUp=function(){this.removeEventListener("pressup",this._upCB),this.removeEventListener("click",this._clickCB),this._stateFlags.down=!1,this._updateState()},n._onClick=function(){this.dispatchEvent(new j(m.BUTTON_PRESS))},n._onMouseOver=function(){this._stateFlags.over=!0,this._updateState()},n._onMouseOut=function(){this._stateFlags.over=!1,this._updateState()},n.destroy=function(){this.removeAllChildren(),this.removeAllEventListeners(),this._downCB=null,this._upCB=null,this._overCB=null,this._outCB=null,this.back=null,this.label=null,this._statePriority=null,this._stateFlags=null,this._stateData=null},m.generateDefaultStates=function(b,c,e){var i=b.width,j=b.height/3,k=document.createElement("canvas"),m=i,n=b.height;c&&(n+=j),e&&(m+=2*e.size,n+=j+2*e.size,e.rgba&&(e.red=e.rgba[0],e.green=e.rgba[1],e.blue=e.rgba[2],e.rgba[3]&&(e.alpha=e.rgba[3]))),k.width=m,k.height=n;var o=k.getContext("2d");o.drawImage(b,0,0);var q={image:k,up:{src:new d(0,0,i,j)},over:{src:new d(0,j,i,j)},down:{src:new d(0,2*j,i,j)}},r=new l(b);r.sourceRect=q.up.src;var s=b.height;if(c){o.save(),o.translate(0,s);var t=new f;c.saturation!==a&&t.adjustSaturation(c.saturation),c.brightness!==a&&t.adjustBrightness(2.55*c.brightness),c.contrast!==a&&t.adjustContrast(c.contrast),r.filters=[new h(t)],r.cache(0,0,q.up.src.width,q.up.src.height),r.draw(o),q.disabled={src:new d(0,s,0|i,0|j)},s+=j,o.restore()}if(e){o.save();var u=i+2*e.size,v=j+2*e.size;r.filters=[new g(0,0,0,1,e.red,e.green,e.blue,e.alpha!==a?-255+e.alpha:0)],r.scaleX=u/i,r.scaleY=v/j,r.x=0,r.y=s,r.cache(0,0,u,v),r.updateContext(o),r.draw(o),o.restore(),r.scaleX=r.scaleY=1,r.x=e.size,r.y=s+e.size,r.filters=null,r.uncache(),r.updateContext(o),r.draw(o);var w=new d(e.size,e.size,u,v);q.up.trim=w,q.over.trim=w,q.down.trim=w,q.disabled&&(q.disabled.trim=w),q.highlighted={src:new d(0,s,0|u,0|v)},q.priority=p.slice(),q.priority.unshift("highlighted"),q.offset={x:-e.size,y:-e.size}}return q},namespace("springroll").Button=m,namespace("springroll.createjs").Button=m}(),function(){var a,b=include("springroll.createjs.Button"),c=function(c,d,e,f,g){a=include("springroll.Sound"),b.call(this,c,d,e),this.clickAlias=f||"ButtonClick",this.overAlias=g||"ButtonRollover",this._audioEnabled=!0,this._onRollover=this._onRollover.bind(this),this._onButtonPress=this._onButtonPress.bind(this),this.addEventListener("rollover",this._onRollover),this.addEventListener(b.BUTTON_PRESS,this._onButtonPress)},d=b.prototype,e=extend(c,b);e._onButtonPress=function(){this.clickAlias&&this._audioEnabled&&a.instance.play(this.clickAlias)},e._onRollover=function(){this.overAlias&&this.enabled&&this._audioEnabled&&a.instance.play(this.overAlias)},Object.defineProperty(e,"audioEnabled",{get:function(){return this._audioEnabled},set:function(a){this._audioEnabled=a}}),e.destroy=function(){this.removeEventListener("rollover",this._onRollover),this.removeEventListener(b.BUTTON_PRESS,this._onButtonPress),this.audioEnabled=!1,d.destroy.apply(this)},namespace("springroll").SoundButton=c,namespace("springroll.createjs").SoundButton=c}(),function(){var a=function(a){this.obj=a,this.mouseDownObjPos={x:0,y:0},this.dragOffset=new createjs.Point,this.mouseDownStagePos={x:0,y:0}};namespace("springroll").DragData=a,namespace("springroll.createjs").DragData=a}(),function(){var a,b=include("springroll.createjs.DragData"),c=function(b,c,d){a||(a=include("createjs.Tween",!1)),this.draggedObj=null,this.dragStartThreshold=20,this.mouseDownStagePos={x:0,y:0},this.mouseDownObjPos={x:0,y:0},this.allowStickyClick=!0,this.isTouchMove=!1,this.isHeldDrag=!1,this.isStickyClick=!1,this.snapSettings=null,this._theStage=b,this._dragOffset=null,this._dragStartCallback=c,this._dragEndCallback=d,this._triggerHeldDrag=this._triggerHeldDrag.bind(this),this._triggerStickyClick=this._triggerStickyClick.bind(this),this._stopDrag=this._stopDrag.bind(this),this._updateObjPosition=this._updateObjPosition.bind(this),this._draggableObjects=[],this._helperPoint=null,this._multitouch=!1},d=c.prototype={};Object.defineProperty(d,"multitouch",{get:function(){return this._multitouch},set:function(a){if(this.draggedObj)if(this._multitouch)for(var b in this.draggedObj)this._stopDrag(b,!0);else this._stopDrag(null,!0);this._multitouch=!!a,this.draggedObj=a?{}:null}}),d.startDrag=function(a,b){this._objMouseDown(b,a)},d._objMouseDown=function(c,d){if(!(!this._multitouch&&this.draggedObj||this._multitouch&&!c)){var e,f,g,h;this._multitouch?(e=new b(d),this.draggedObj[c.pointerID]=e,f=e.mouseDownObjPos,g=e.mouseDownStagePos,h=e.dragOffset):(this.draggedObj=d,f=this.mouseDownObjPos,g=this.mouseDownStagePos,h=this._dragOffset=new createjs.Point),a&&a.removeTweens(d),c&&(h=d.parent.globalToLocal(c.stageX,c.stageY,h),h.x-=d.x,h.y-=d.y),f.x=d.x,f.y=d.y,c?(this._theStage._getPointerData(c.pointerID).target=d,this.allowStickyClick&&"touchstart"!=c.nativeEvent.type?(g.x=c.stageX,g.y=c.stageY,d.addEventListener("pressmove",this._triggerHeldDrag),d.addEventListener("pressup",this._triggerStickyClick)):(this.isTouchMove="touchstart"==c.nativeEvent.type,this.isHeldDrag=!0,this._startDrag(c))):(this.isHeldDrag=!0,this._startDrag())}},d._triggerStickyClick=function(a){this.isStickyClick=!0;var b=this._multitouch?this.draggedObj[a.pointerID].obj:this.draggedObj;b.removeEventListener("pressmove",this._triggerHeldDrag),b.removeEventListener("pressup",this._triggerStickyClick),this._startDrag(a)},d._triggerHeldDrag=function(a){this.isHeldMove=!0;var b,c;this._multitouch?(c=this.draggedObj[a.pointerID].obj,b=this.draggedObj[a.pointerID].mouseDownStagePos):(c=this.draggedObj,b=this.mouseDownStagePos);var d=a.stageX-b.x,e=a.stageY-b.y;d*d+e*e>=this.dragStartThreshold*this.dragStartThreshold&&(this.isHeldDrag=!0,c.removeEventListener("pressmove",this._triggerHeldDrag),c.removeEventListener("pressup",this._triggerStickyClick),this._startDrag(a))},d._startDrag=function(a){var b=this._theStage;b.addEventListener("stagemousemove",this._updateObjPosition),b.addEventListener("stagemouseup",this._stopDrag),this._dragStartCallback(this._multitouch?this.draggedObj[a.pointerID].obj:this.draggedObj)},d.stopDrag=function(a,b){var c=null;if(this._multitouch&&b)for(var d in this.draggedObj)if(this.draggedObj[d].obj==b){c=d;break}this._stopDrag(c,a===!0)},d._stopDrag=function(a,b){var c,d;if(this._multitouch){if(!a){for(d in this.draggedObj)this._stopDrag(d,b);return}d=a,a instanceof createjs.MouseEvent&&(d=a.pointerID);var e=this.draggedObj[d];if(!e)return;c=e.obj,this.mouseDownObjPos.x=e.mouseDownObjPos.x,this.mouseDownObjPos.y=e.mouseDownObjPos.y,delete this.draggedObj[d]}else c=this.draggedObj,this.draggedObj=null;if(c){c.removeEventListener("pressmove",this._triggerHeldDrag),c.removeEventListener("pressup",this._triggerStickyClick);var f=!this._multitouch;if(this._multitouch){var g=!1;for(d in this.draggedObj){g=!0;break}f=!g}f&&(this._theStage.removeEventListener("stagemousemove",this._updateObjPosition),this._theStage.removeEventListener("stagemouseup",this._stopDrag)),this.isTouchMove=!1,this.isStickyClick=!1,this.isHeldMove=!1,b!==!1&&this._dragEndCallback(c)}},d._updateObjPosition=function(a){if(this.isTouchMove||this._theStage.mouseInBounds){var b,c;if(this._multitouch){var d=this.draggedObj[a.pointerID];b=d.obj,c=d.dragOffset}else b=this.draggedObj,c=this._dragOffset;var e=b.parent.globalToLocal(a.stageX,a.stageY,this._helperPoint),g=b._dragBounds;if(g?(b.x=f(e.x-c.x,g.x,g.right),b.y=f(e.y-c.y,g.y,g.bottom)):(b.x=e.x-c.x,b.y=e.y-c.y),this.snapSettings)switch(this.snapSettings.mode){case"points":this._handlePointSnap(e,c,b);break;case"grid":break;case"line":}}},d._handlePointSnap=function(a,b,c){for(var d,f,g=this.snapSettings,h=g.dist*g.dist,i=g.points,j=a.x-b.x,k=a.y-b.y,l=-1,m=null,n=i.length-1;n>=0;--n)d=i[n],f=e(j,k,d.x,d.y),h>=f&&(l>f||-1==l)&&(l=f,m=d);m&&(c.x=m.x,c.y=m.y)};var e=function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},f=function(a,b,c){return b>a?b:a>c?c:a},g=function(a){return a===!1?void h.apply(this):(this.addEventListener("mousedown",this._onMouseDownListener),void(this.cursor="pointer"))},h=function(){this.removeEventListener("mousedown",this._onMouseDownListener),this.cursor=null},i=function(a){this._dragMan._objMouseDown(a,this)};d.addObject=function(a,b){b&&(b.right=b.x+b.width,b.bottom=b.y+b.height),a._dragBounds=b,this._draggableObjects.indexOf(a)>=0||(a.enableDrag=g,a.disableDrag=h,a._onMouseDownListener=i.bind(a),a._dragMan=this,this._draggableObjects.push(a))},d.removeObject=function(a){a.disableDrag(),delete a.enableDrag,delete a.disableDrag,delete a._onMouseDownListener,delete a._dragMan,delete a._dragBounds;var b=this._draggableObjects.indexOf(a);b>=0&&this._draggableObjects.splice(b,1)},d.destroy=function(){this.stopDrag(!1),this.draggedObj=null,this._updateObjPosition=null,this._dragStartCallback=null,this._dragEndCallback=null,this._triggerHeldDrag=null,this._triggerStickyClick=null,this._stopDrag=null,this._theStage=null;for(var a,b=this._draggableObjects.length-1;b>=0;--b)a=this._draggableObjects[b],a.disableDrag(),delete a.enableDrag,delete a.disableDrag,delete a._onMouseDownListener,delete a._dragMan,delete a._dragBounds;this._draggableObjects=null,this._helperPoint=null},namespace("springroll").DragManager=c,namespace("springroll.createjs").DragManager=c}(),function(){function a(a,b){return a.start-b.start}var b,c,d,e,f,g,h,i=include("createjs.Container"),j=function(a){if(d||(b=include("springroll.Debug",!1),d=include("springroll.Application"),e=include("springroll.LoadTask"),f=include("springroll.TaskManager"),g=include("springroll.Sound"),h=include("springroll.ListTask"),c=include("createjs.BitmapUtils")),i.call(this),!a)throw new Error("need options to create Cutscene");this.isReady=!1,this.framerate=0,this.display="string"==typeof a.display?d.instance.getDisplay(a.display):a.display,this.config=a.configUrl,this.imageScale=a.imageScale||1,this.pathReplaceTarg=a.pathReplaceTarg||null,this.pathReplaceVal=a.pathReplaceVal||null,this._taskMan=null,this._elapsedTime=0,this._audioAliases=null,this._audio=null,this._audioIndex=0,this._audio=null,this._clip=null,this._currentAudioInstance=null,this._soundStartTime=-1,this._activeAudio=[],this._animFinished=!1,this._audioFinished=!1,this._captionsObj=a.captions||null,this._captionsObj&&(this._captionsObj.selfUpdate=!1),this._loadCallback=a.loadCallback||null,this._endCallback=null,this.update=this.update.bind(this),this.resize=this.resize.bind(this),this.setup()},k=extend(j,i);k.setup=function(){this.display.stage.addChild(this),this._taskMan=new f([new e("config",this.config,this.onConfigLoaded.bind(this))]),this._taskMan.on(f.ALL_TASKS_DONE,this.onLoadComplete.bind(this)),this._taskMan.startAll()},k.onConfigLoaded=function(b){this.config=b.content,this.framerate=this.config.settings.fps;var c=[];c.push({id:"clip",src:this.config.settings.clip});var d;for(var e in this.config.images)d=this.pathReplaceTarg?this.config.images[e].replace(this.pathReplaceTarg,this.pathReplaceVal):this.config.images[e],c.push({id:e,src:d});if(this._taskMan.addTask(new h("art",c,this.onArtLoaded.bind(this))),this.config.settings.audioAlias)this._audioAliases=[this.config.settings.audioAlias],this._audio=[{alias:this.config.settings.audioAlias,start:0,sync:!0}];else{if(!this.config.settings.audio)return;this._audio=this.config.settings.audio.slice(),this._audio.sort(a),this._audioAliases=[];for(var f=0,i=this._audio.length;i>f;++f)-1==this._audioAliases.indexOf(this._audio[f].alias)&&this._audioAliases.push(this._audio[f].alias)}this._audioAliases.length&&this._taskMan.addTask(g.instance.createPreloadTask("audio",this._audioAliases,this.onAudioLoaded))},k.onAudioLoaded=function(){},k.onArtLoaded=function(a){window.images||(window.images={});var b,d,e,f,g={},h={};for(b in a)if(d=a[b].content,0===b.indexOf("atlasData_"))g[b.replace("atlasData_","")]=d;else if(0===b.indexOf("atlasImage_"))h[b.replace("atlasImage_","")]=d;else if("clip"==b){if(1!=this.imageScale){e=this.imageScale;for(f in this.config.images)c.replaceWithScaledBitmap(f,e)}}else images[b]=d;for(b in g)g[b]&&h[b]&&c.loadSpriteSheet(g[b].frames,h[b],this.imageScale)},k.onLoadComplete=function(){this._taskMan.off(),this._taskMan.destroy(),this._taskMan=null;var a=this._clip=new lib[this.config.settings.clipClass];this._clip.timeline&&1!=this._clip.timeline.duration||(a=this._clip.getChildAt(0)),a.mouseEnabled=!1,a.framerate=this.framerate,a.tickEnabled=!1,a.gotoAndPlay(0),a.loop=!1,this.addChild(this._clip),this.resize(this.display.width,this.display.height),d.instance.on("resize",this.resize),this.isReady=!0,this._loadCallback&&(this._loadCallback(),this._loadCallback=null)},k.resize=function(a,b){if(this._clip){var c,d=this.config.settings,e=d.designedWidth/d.designedHeight,f=a/b;e>f?(c=a/d.designedWidth,this.x=0,this.y=.5*(b-d.designedHeight*c)):(c=b/d.designedHeight,this.x=.5*(a-d.designedWidth*c),this.y=0),this._clip.scaleX=this._clip.scaleY=c}},k.start=function(a){this._endCallback=a,this._elapsedTime=0,this._animFinished=!1,this._audioFinished=!1;for(var b=0;b<this._audio.length;++b){var c=this._audio[b];if(0!==c.start)break;var e=c.alias,f={};if(c.sync)this._currentAudioInstance&&this._activeAudio.push(this._currentAudioInstance),this._currentAudioInstance=g.instance.play(e,this._audioCallback.bind(this,f)),f.instance=this._currentAudioInstance,this._soundStartTime=c.start,this._captionsObj&&this._captionsObj.play(e);else{var h=g.instance.play(e,this._audioCallback.bind(this,f));f.instance=h,this._activeAudio.push(h)}++this._audioIndex}d.instance.on("update",this.update)},k._audioCallback=function(a){if(a.instance==this._currentAudioInstance)this._audioFinished=!0,this._currentAudioInstance=null,this._soundStartTime=-1,this._captionsObj&&this._captionsObj.stop(),this._animFinished&&this.stop(!0);else{var b=this._activeAudio.indexOf(a.instance);-1!=b&&this._activeAudio.splice(b,1)}},k.update=function(a){if(!this._animFinished){this._currentAudioInstance||(this._elapsedTime+=.001*a);for(var b=this._audioIndex;b<this._audio.length;++b){var c=this._audio[b];if(!(c.start<=this._elapsedTime))break;var d=c.alias,e={};if(c.sync)this._audioFinished=!1,this._currentAudioInstance&&this._activeAudio.push(this._currentAudioInstance),this._currentAudioInstance=g.instance.play(d,this._audioCallback.bind(this,e)),e.instance=this._currentAudioInstance,this._soundStartTime=c.start,this._captionsObj&&this._captionsObj.play(d);else{var f=g.instance.play(d,{complete:this._audioCallback.bind(this,e),offset:1e3*(this._elapsedTime-c.start)});
e.instance=f,this._activeAudio.push(f)}++this._audioIndex}if(this._currentAudioInstance){var h=.001*this._currentAudioInstance.position;0===this._elapsedTime&&h>2*a||(this._elapsedTime=this._soundStartTime+h)}if(this._captionsObj&&this._soundStartTime>=0&&this._captionsObj.seek(this._currentAudioInstance.position),!this._animFinished){var i=this._clip.timeline&&1!=this._clip.timeline.duration?this._clip:this._clip.getChildAt(0);i.elapsedTime=this._elapsedTime,i.advance(),i.currentFrame==i.timeline.duration&&(this._animFinished=!0,this._audioFinished&&this.stop(!0))}}},k.stop=function(a){d.instance.off("update",this.update),this._currentAudioInstance&&this._currentAudioInstance.stop();for(var b=0;b<this._activeAudio.length;++b)this._activeAudio[b].stop();this._captionsObj&&this._captionsObj.stop(),a&&this._endCallback&&(this._endCallback(),this._endCallback=null)},k.destroy=function(){d.instance.off("resize",this.resize),this.removeAllChildren(!0),g.instance.unload(this._audioAliases),this.config=null,this._taskMan&&(this._taskMan.off(),this._taskMan.destroy(),this._taskMan=null),this._currentAudioInstance=null,this._activeAudio=null,this._audioAliases=this._audio=null,this._loadCallback=null,this._endCallback=null,this._clip=null,this._captionsObj=null,this.parent&&this.parent.removeChild(this),this.display=null},namespace("springroll").Cutscene=j,namespace("springroll.createjs").Cutscene=j}(),function(a){"use strict";var b=function(a,b){Array.isArray(a)?this._images=a:(this._images=[a],b=[b]),this.frames={};for(var c=0;c<this._images.length;++c){a=this._images[c];var e=b[c].frames;for(var f in e){var g=e[f],h=f.lastIndexOf(".");h>0&&(f=f.substring(0,h)),h=f.lastIndexOf("/"),0>h&&(f=f.substring(h+1)),this.frames[f]=new d(a,g)}}},c=b.prototype={};c.getFrame=function(a){return this.frames[a]||null},c.getFrames=function(b,c,d,e,f){e===a&&(e=4),0>e&&(e=0),f||(f=[]);var g,h,i=[],j=[];for(g=1;e>g;++g){var k="";h=1;for(var l=0;g>l;++l)k+="0",h*=10;i.unshift(k),j.push(h)}var m,n,o=j.length;for(g=c,n=d;n>=g;++g){var p=null;for(h=0;o>h;++h)if(g<j[h]){p=i[h]+g;break}p||(p=g.toString());var q=b.replace("#",p),r=this.frames[q];r&&(m=r),m&&f.push(m)}return f},c.destroy=function(){this.image=null,this.frames=null},namespace("createjs").TextureAtlas=b,namespace("springroll.createjs").TextureAtlas=b;var d=function(a,b){this.image=a;var c=b.frame;this.frame=new createjs.Rectangle(c.x,c.y,c.w,c.h),this.trimmed=b.trimmed,this.offset=new createjs.Point(b.spriteSourceSize.x,b.spriteSourceSize.y),this.width=b.sourceSize.w,this.height=b.sourceSize.h}}(),function(){"use strict";function a(a,b){return a.position-b.position}var b=include("createjs.Container"),c=function(a,c){b.call(this),this.mouseChildren=!1,this._bitmap=new createjs.Bitmap,this.addChild(this._bitmap),a&&c&&this.init(a,c)},d=extend(c,b),e=b.prototype;d.loop=!0,d.currentFrame=0,d.paused=!1,Object.defineProperty(d,"framerate",{get:function(){return this._framerate},set:function(a){a>0?(this._framerate=a,this._duration=a?this._frames.length/a:0):this._framerate=this._duration=0}}),Object.defineProperty(d,"elapsedTime",{get:function(){return this._t},set:function(a){this._t=a}}),Object.defineProperty(d,"totalFrames",{get:function(){return this._frames.length}}),Object.defineProperty(d,"currentTexture",{get:function(){return this._currentTexture}}),d._framerate=0,d._duration=0,d._t=0,d._prevPosition=0,d._bitmap=0,d._labels=0,d._frames=null,d._currentTexture=null,d._origin=null,d._scale=1,d.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY)},d.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this._updateTimeline(),e.draw.call(this,a,b),!0)},d.play=function(){this.paused=!1},d.stop=function(){this.paused=!0},d.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},d.gotoAndStop=function(a){this.paused=!0,this._goto(a)},d.advance=function(a){this.paused||(this._framerate>0?(a&&(this._t+=.001*a),this._t>this._duration&&(this._t=this.loop?this._t-this._duration:this._duration),this._prevPosition=Math.floor(this._t*this._framerate),this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1)):this._prevPosition=this._prevPosition+1,this._updateTimeline())},d.getLabels=function(){return this._labels},d.getCurrentLabel=function(){for(var a=this._labels,b=null,c=0,d=a.length;d>c&&a[c].position<=this.currentFrame;++c)b=a[c].label;return b},d.init=function(b,c){var d=this._labels=[];if(c.labels){for(var e in c.labels)d.push({label:e,position:c.labels[e]});d.sort(a)}this._frames=[];for(var f=0;f<c.frames.length;++f){var g=c.frames[f];b.getFrames(g.name,g.min,g.max,g.digits,this._frames)}c.fps?this.framerate=c.fps:this._framerate&&(this.framerate=this._framerate),this._scale=c.scale&&c.scale>0?1/c.scale:1,this._bitmap.scaleX=this._bitmap.scaleY=this._scale,this._origin=c.origin?new createjs.Point(c.origin.x*this._scale,c.origin.y*this._scale):new createjs.Point},d.copyFrom=function(a){this._frames=a._frames,this._labels=a._labels,this._origin=a._origin,this._framerate=a._framerate,this._duration=a._duration,this._scale=a._scale,this._bitmap.scaleX=this._bitmap.scaleY=this._scale},d.destroy=function(){this.removeAllChildren(),this._bitmap=null,this._frames=null,this._origin=null,this._currentTexture=null},d._tick=function(a){this.advance(a&&a.delta),e._tick.call(this,a)},d._goto=function(a){var b=null;if("string"==typeof a){for(var c=this._labels,d=0,e=c.length;e>d;++d)if(c[d].label==a){b=c[d].position;break}}else b=a;null!==b&&(this._prevPosition=b,this._t=this._framerate>0?b/this._framerate:0,this._updateTimeline())},d._updateTimeline=function(){if(this._prevPosition<0?this._prevPosition=0:this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1),this.currentFrame=this._prevPosition,this._currentTexture!=this._frames[this.currentFrame]){var a=this._currentTexture=this._frames[this.currentFrame];this._bitmap.image=a.image,this._bitmap.sourceRect=a.frame,this._bitmap.x=-this._origin.x+a.offset.x*this._bitmap.scaleX,this._bitmap.y=-this._origin.y+a.offset.y*this._bitmap.scaleY}},d._reset=function(){this._prevPosition=0,this._t=0,this.currentFrame=0},namespace("createjs").BitmapMovieClip=c,namespace("springroll.createjs").BitmapMovieClip=c}();}();