/*! CloudKidFramework 0.0.5 */
!function(){"use strict";!function(){var a=function(a,b,c){this.width=a,this.height=b,this.ppi=c};a.prototype={},namespace("cloudkid").ScreenSettings=a}(),function(){var a,b=function(b,c,d,e){a||(a=include("cloudkid.UIScaler")),this._item=b,this._settings=c,this._designedScreen=d,this._adapter=e;var f=e.getScale(b),g=e.getPosition(b);switch(this.origScaleX=f.x||0,this.origScaleY=f.y||0,this.origWidth=b.width||0,this.origBounds={x:0,y:0,width:b.width,height:b.height},this.origBounds.right=this.origBounds.x+this.origBounds.width,this.origBounds.bottom=this.origBounds.y+this.origBounds.height,this.origMarginHori=0,this.origMarginVert=0,c.vertAlign){case a.ALIGN_TOP:this.origMarginVert=g.y+this.origBounds.y;break;case a.ALIGN_CENTER:this.origMarginVert=.5*d.height-g.y;break;case a.ALIGN_BOTTOM:this.origMarginVert=d.height-(g.y+this.origBounds.bottom)}switch(c.horiAlign){case a.ALIGN_LEFT:this.origMarginHori=g.x+this.origBounds.x;break;case a.ALIGN_CENTER:this.origMarginHori=.5*d.width-g.x;break;case a.ALIGN_RIGHT:this.origMarginHori=d.width-(g.x+this.origBounds.right)}},c=b.prototype={};c.resize=function(b){var c=this._adapter,d=b.height/this._designedScreen.height,e=b.ppi/this._designedScreen.ppi,f=(b.width-this._designedScreen.width*d)/2,g=d/e;this._settings.minScale&&g<this._settings.minScale?g=this._settings.minScale:this._settings.maxScale&&g>this._settings.maxScale&&(g=this._settings.maxScale),g*=e,c.setScale(this._item,this.origScaleX*g,"x"),c.setScale(this._item,this.origScaleY*g,"y");var h,i=null,j=null;switch(h=this.origMarginVert*d,this._settings.vertAlign){case a.ALIGN_TOP:j=h-this.origBounds.y*g;break;case a.ALIGN_CENTER:j=.5*b.height-h;break;case a.ALIGN_BOTTOM:j=b.height-h-this.origBounds.bottom*g}switch(null!==j&&c.setPosition(this._item,j,"y"),h=this.origMarginHori*d,this._settings.horiAlign){case a.ALIGN_LEFT:i=this._settings.titleSafe?f+h-this.origBounds.x*g:h-this.origBounds.x*g;break;case a.ALIGN_CENTER:i=this._settings.centeredHorizontally?.5*(b.width-this._item.width):.5*b.width-h;break;case a.ALIGN_RIGHT:i=this._settings.titleSafe?b.width-f-h-this.origBounds.right*g:b.width-h-this.origBounds.right*g}null!==i&&c.setPosition(this._item,i,"x")},c.destroy=function(){this._adapter=null,this.origBounds=null,this._item=null,this._settings=null,this._designedScreen=null},namespace("cloudkid").UIElement=b}(),function(){var a=function(){this.vertAlign=null,this.horiAlign=null,this.titleSafe=!1,this.maxScale=1,this.minScale=1,this.centeredHorizontally=!1};namespace("cloudkid").UIElementSettings=a}(),function(a){var b=include("cloudkid.UIElementSettings"),c=include("cloudkid.UIElement"),d=include("cloudkid.Application"),e=include("cloudkid.ScreenSettings"),f=function(a,b,c,d,g){this._parent=a,this._items=[],this._designedScreen=new e(b,c,d),this._adapter=f.getAdapter(g)};f.getAdapter=function(b){if(b===a&&(b=d.instance.display),!b.DisplayAdapter)throw"The display specified is incompatible with UIScaler";return b.DisplayAdapter};var g=f.prototype={},h=new e(0,0,0),i=!1;f.ALIGN_TOP="top",f.ALIGN_BOTTOM="bottom",f.ALIGN_LEFT="left",f.ALIGN_RIGHT="right",f.ALIGN_CENTER="center",f.fromJSON=function(a,b,c,d,e){"boolean"!=typeof d&&(d=!0);var g,h,i,j,k,l=new f(a,b.designedWidth,b.designedHeight,b.designedPPI,e);for(h in c)g=c[h],g?(g.align?(i=g.align.split("-"),j=i[0],k=i[1]):(j=ALIGN_CENTER,k=ALIGN_CENTER),l.add(a[h],j,k,g.titleSafe||!1,g.minScale||0/0,g.maxScale||0/0,g.centeredHorizontally||!1)):Debug.error("UIScaler: could not find object '"+iName+"'");return l.resize(),d&&l.destroy(),l},f.init=function(a,b,c){h.width=a,h.height=b,h.ppi=c,i=!0},g.getScale=function(){return h.height/this._designedScreen.height},g.add=function(a,d,e,g,h,i,j){var k=new b;k.vertAlign=d||f.ALIGN_CENTER,k.horiAlign=e||f.ALIGN_CENTER,k.titleSafe="boolean"!=typeof g?!1:g,k.maxScale="number"!=typeof i?0/0:i,k.minScale="number"!=typeof h?0/0:h,k.centeredHorizontally=j||!1,this._items.push(new c(a,k,this._designedScreen,this._adapter))},f.resizeBackground=function(a,b){if(i){var c,d=f.getAdapter(b),e=d.getBitmapSize(a);c=h.height/e.h,d.setScale(a,c),d.setPosition(a,.5*(h.width-e.w*c),"x")}},f.resizeBackgrounds=function(a,b){for(var c=0,d=a.length;d>c;++c)f.resizeBackground(a[c],b)},g.resize=function(){if(this._items.length>0)for(var a=0,b=this._items.length;b>a;++a)this._items[a].resize(h)},g.destroy=function(){if(this._items.length>0)for(var a=0,b=this._items.length;b>a;++a)this._items[a].destroy();this._adapter=null,this._parent=null,this._designedScreen=null,this._items=null},namespace("cloudkid").UIScaler=f}(),function(){var a=include("cloudkid.UIScaler"),b={};b.positionItems=function(c,d,e){var f,g,h=a.getAdapter(e),i=Math.PI/180;for(var j in d){var k=c[j];if(k){var l=d[j];void 0!==l.x&&h.setPosition(k,l.x,"x"),void 0!==l.y&&h.setPosition(k,l.y,"y"),f=l.scale,g=h.getScale(k),f&&(h.setScale(k,f.x*g.x,"x"),h.setScale(k,f.y*g.y,"y")),f=l.pivot,f&&h.setPivot(k,f),void 0!==l.rotation&&(k.rotation=l.rotation,h.useRadians&&(k.rotation*=i)),l.hitArea&&h.setHitArea(k,b.generateHitArea(l.hitArea,1,e))}else Debug.error("Positioner: could not find object '"+j+"'")}},b.generateHitArea=function(b,d,e){var f=a.getAdapter(e);if(d||(d=1),c(b)){if(1==d)return new f.Polygon(b);for(var g=[],h=0,i=b.length;i>h;++h)g.push(new f.Point(b[h].x*d,b[h].y*d));return new f.Polygon(g)}return"rect"!=b.type&&b.type?"ellipse"==b.type?new f.Ellipse((b.x-.5*b.w)*d,(b.y-.5*b.h)*d,b.w*d,b.h*d):"circle"==b.type?new f.Circle(b.x*d,b.y*d,b.r*d):"sector"==b.type?new f.Sector(b.x*d,b.y*d,b.r*d,b.start,b.end):null:new f.Rectangle(b.x*d,b.y*d,b.w*d,b.h*d)};var c=function(a){return"[object Array]"===Object.prototype.toString.call(a)};namespace("cloudkid").Positioner=b}();}();