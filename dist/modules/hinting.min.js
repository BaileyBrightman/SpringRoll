/*! SpringRoll 0.2.2 */
!function(){"use strict";!function(){var a=function(a,b){this._game=a,this._done=b},b=a.prototype;b.play=function(){throw"Must override Hint.play"},b._onPlayComplete=function(a,b){this._done(b),"function"==typeof a&&a()},b.destroy=function(){this._done=null,this._game=null},namespace("springroll").AbstractHint=a}(),function(){var a=include("springroll.AbstractHint"),b=function(b,c,d,e,f){a.call(this,b,c),this.idOrList=d,this.onComplete=e,this.onCancel=f},c=a.prototype,d=extend(b,a);d.play=function(){this._game.hint.enabled=!1,this._game.media.playInstruction(this.idOrList,this._onPlayComplete.bind(this,this.onComplete,!1),this._onPlayComplete.bind(this,this.onCancel,!0))},d.destroy=function(){this.idOrList=null,this.onComplete=null,this.onCancel=null,c.destroy.call(this)},namespace("springroll").VOHint=b}(),function(){var a=include("springroll.AbstractHint"),b=(include("springroll.Animator"),function(b,c,d,e,f,g){a.call(this,b,c),this.instance=d,this.events=e,this.onComplete=f,this.onCancel=g===!0?f:g}),c=a.prototype,d=extend(b,a);d.play=function(){this._game.hint.enabled=!1,this._game.media.playInstruction(this.instance,this.events,this._onPlayComplete.bind(this,this.onComplete,!1),this._onPlayComplete.bind(this,this.onCancel,!0))},d.destroy=function(){this.instance=null,this.events=null,this.onComplete=null,this.onCancel=null,c.destroy.call(this)},namespace("springroll").AnimatorHint=b}(),function(){var a=include("springroll.AbstractHint"),b=function(b,c,d){a.call(this,b,c),this.onStart=d},c=a.prototype,d=extend(b,a);d.play=function(){this._game.hint.enabled=!1,this.onStart()},d.destroy=function(){this.onStart=null,c.destroy.call(this)},namespace("springroll").FunctionHint=b}(),function(){var a=include("springroll.AbstractHint"),b=include("springroll.AnimatorHint"),c=include("springroll.FunctionHint"),d=include("springroll.VOHint"),e=function(b,c){a.call(this,b,c),this._tiers=[[]],this._current=-1,this._tier=null,this.nextTier()},f=a.prototype,g=extend(e,a);g.play=function(){var a=this._tier.random();a.play()},g.vo=function(a,b,c){return this.tier.push(new d(this._game,this._done,a,b,c)),this},g.anim=function(a,c,d,e){return this.tier.push(new b(this._game,this._done,a,c,d,e)),this},g.func=function(a){return this.tier.push(new c(this._game,this._done,a)),this},g.addTier=function(){return this._tier=[],this._tiers.push(this._tier),this},g.nextTier=function(){var a=this._tiers.length;return this._current++,this._current>=a&&(this._current=a-1),this._tier=this._tiers[this._current],this},g.reset=function(){this._current=-1,this.nextTier()},g.destroy=function(){this._tiers=null,this._tier=null,this._current=-1,f.destroy.call(this)},namespace("springroll").GroupHint=e}(),function(){var a=include("springroll.AnimatorHint"),b=include("springroll.FunctionHint"),c=include("springroll.VOHint"),d=include("springroll.GroupHint"),e=function(a){this._game=a,this._hint=null,this._duration=0,this._timer=0,this.timerDuration=12e3,this._update=this._update.bind(this),this._done=this._done.bind(this),this.play=this.play.bind(this),this._game.messenger.on("playHelp",this.play),this._oldHints=[]},f=e.prototype;f.vo=function(a,b,d){return this.set(new c(this._game,this._done,a,b,d))},f.anim=function(b,c,d,e){return this.set(new a(this._game,this._done,b,c,d,e))},f.func=function(a){return this.set(new b(this._game,this._done,a))},f.group=function(){return this.set(new d(this._game,this._done))},f.set=function(a){return this.clear(),this.enabled=!0,this._hint=a,a},f.clear=function(){this.removeTimer(),this.enabled=!1,this._hint&&this._oldHints.push(this._hint),this._hint=null},f.play=function(){return this._hint&&(this._hint.play(this._done),this._clearOldHints()),this},f.startTimer=function(a){return this._timer=this._duration=a||this.timerDuration,this._game.off("update",this._update).on("update",this._update),this},f.stopTimer=f.removeTimer=function(){return this._game.off("update",this._update),this._timer=this._duration=0,this},f.resetTimer=function(){return this._game.off("update",this._update).on("update",this._update),this._timer=this._duration,this},Object.defineProperty(f,"enabled",{set:function(a){this._game.messenger.send("helpEnabled",a)}}),f._update=function(a){this._game.media.isPlaying()||this._timer>0&&(this._timer-=a,this._timer<=0&&(this._game.off("update",this._update),this.play()))},f._done=function(a){this.resetTimer(),this.enabled=!a,this._hint instanceof d&&this._hint.nextTier()},f._clearOldHints=function(){if(this._oldHints.length){for(var a=0;a<this._oldHints.length;a++)this._oldHints[a].destroy();this._oldHints.length=0}},f.destroy=function(){this.clear(),this._clearOldHints(),this._game.messenger.off("playHelp"),this._game=null},namespace("springroll").HintPlayer=e}();}();