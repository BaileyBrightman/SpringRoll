/*! SpringRoll 0.4.0 */
!function(){"use strict";!function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){this.assetManager.register("springroll.pixi.AdvancedMovieClipTask",80),this.assetManager.register("springroll.pixi.SpineAtlasTask",40),this.assetManager.register("springroll.pixi.SpineAnimTask",40),this.animator.register("springroll.pixi.AdvancedMovieClipInstance",10),this.animator.register("springroll.pixi.SpineInstance",10)}}(),function(a){"use strict";function b(a,b){return a.position-b.position}function c(b,c,d,f,g){f===a&&(f=4),0>f&&(f=0),g||(g=[]);var h,i,j=[],k=[];for(h=1;f>h;++h){var l="";i=1;for(var m=0;h>m;++m)l+="0",i*=10;j.unshift(l),k.push(i)}var n,o,p=k.length,q=e.fromFrame;for(h=c,o=d;o>=h;++h){var r=null;for(i=0;p>i;++i)if(h<k[i]){r=j[i]+h;break}r||(r=h.toString());var s=b.replace("#",r),t=q(s,!0);t&&(n=t),n&&g.push(n)}return g}var d=include("PIXI.Sprite"),e=include("PIXI.Texture"),f=function(a,b){d.call(this),this.currentFrame=0,this._framerate=0,this._duration=0,this._t=0,this._labels=0,this._events=0,this._textures=null,a&&this.init(a,b)},g=extend(f,d),h=d.prototype;Object.defineProperty(g,"framerate",{get:function(){return this._framerate},set:function(a){a>0?(this._framerate=a,this._duration=a?this._textures.length/a:0):this._framerate=this._duration=0}}),Object.defineProperty(g,"elapsedTime",{get:function(){return this._t},set:function(a){this._t=a,this._t>this._duration&&(this._t=this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-7),this.currentFrame>=this._textures.length&&(this.currentFrame=this._textures.length-1),this.texture=this._textures[this.currentFrame]||e.EMPTY}}),Object.defineProperty(g,"totalFrames",{get:function(){return this._textures.length}}),g.gotoAndStop=function(a){var b=null;if("string"==typeof a){for(var c=this._labels,d=0,f=c.length;f>d;++d)if(c[d].label==a){b=c[d].position;break}}else b=a;null!==b&&(b>=this._textures.length&&(b=this._textures.length-1),this.currentFrame=b,this._framerate>0?this._t=b/this._framerate:this._t=0,this.texture=this._textures[b]||e.EMPTY)},g.advance=function(a){this._framerate>0&&a&&(this._t+=.001*a,this._t>this._duration&&(this._t=this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-7),this.currentFrame>=this._textures.length&&(this.currentFrame=this._textures.length-1),this.texture=this._textures[this.currentFrame]||e.EMPTY)},g.getLabels=function(){return this._labels},g.getEvents=function(){return this._events},g.getCurrentLabel=function(){for(var a=this._labels,b=null,c=0,d=a.length;d>c&&a[c].position<=this.currentFrame;++c)b=a[c].label;return b},g.init=function(a,d){var e,f=this._labels=[],g=this._events=[];if(a.labels){var h={};for(e in a.labels){var i={label:e,position:a.labels[e],length:1};h[e]=i.position,/_(loop|stop)$/.test(e)||g.push(i),f.push(i)}for(var j=null,k=0;k<g.length;k++){var l=g[k];j=l.position,l.length=h[e+"_stop"]-j||h[e+"_loop"]-j||0}f.sort(b),g.sort(b)}this._textures=[];for(var m,n=0;n<a.frames.length;++n){var o=a.frames[n];e=o.name,m=e.lastIndexOf("/"),m>=0&&(e=e.substring(m+1)),d?d.getFrames(e,o.min,o.max,o.digits,this._textures):c(e,o.min,o.max,o.digits,this._textures)}a.fps?this.framerate=a.fps:this._framerate&&(this.framerate=this._framerate),a.origin?(this.pivot.x=a.origin.x,this.pivot.y=a.origin.y):this.pivot.x=this.pivot.y=0,this.gotoAndStop(0)},g.copyFrom=function(a){this._textures=a._textures,this._labels=a._labels,this._events=a._events,this.pivot.x=a.pivot.x,this.pivot.y=a.pivot.y,this._framerate=a._framerate,this._duration=a._duration},g.destroy=function(){this._labels=this._events=null,h.destroy.call(this)},namespace("springroll.pixi").AdvancedMovieClip=f}(),function(a){var b=include("springroll.Application"),c=include("springroll.AnimatorInstance"),d=include("springroll.pixi.AdvancedMovieClip"),e=function(){c.call(this),this.startTime=0,this.length=0,this.firstFrame=-1,this.lastFrame=-1},f=c.extend(e,c);f.init=function(a){a.framerate||(fps=b.instance.options.fps||15,a.framerate=fps),a.tickEnabled=!1,this.clip=a,this.isLooping=!1,this.currentName=null,this.position=this.duration=0},f.beginAnim=function(a,b){var c,d=this.currentName=a.anim,e=-1,f=-1,g=!1;if("*"==d)e=0,f=this.clip.totalFrames-1,g=!!a.loop;else for(var h=this.clip.getLabels(),i=d+"_stop",j=d+"_loop",k=0,l=h.length;l>k;++k)if(c=h[k],c.label==d)e=c.position;else{if(c.label==i){f=c.position;break}if(c.label==j){f=c.position,g=!0;break}}this.firstFrame=e,this.lastFrame=f,this.length=f-e,this.isLooping=g;var m=this.clip.framerate;if(this.startTime=this.firstFrame/m,this.duration=this.length/m,b)this.position=0;else{var n=a.start||0;this.position=0>n?Math.random()*this.duration:n}this.clip.elapsedTime=this.startTime+this.position},f.endAnim=function(){this.clip.gotoAndStop(this.lastFrame)},f.setPosition=function(a){this.position=a,this.clip.elapsedTime=this.startTime+a},e.test=function(a){return a instanceof d},e.hasAnimation=function(a,b){if("*"==b)return!0;for(var c,d=a.getLabels(),e=-1,f=-1,g=b+"_stop",h=b+"_loop",i=0,j=d.length;j>i;++i)if(c=d[i],c.label==b)e=c.position;else if(c.label==g||c.label==h){f=c.position;break}return e>=0&&f>0},e.getDuration=function(a,c){if(!a.framerate){var d=b.instance.options.fps||15;a.framerate=d}if("*"==c)return a.totalFrames/a.framerate;for(var e,f=a.getLabels(),g=-1,h=-1,i=c+"_stop",j=c+"_loop",k=0,l=f.length;l>k;++k)if(e=f[k],e.label==c)g=e.position;else if(e.label==i||e.label==j){h=e.position;break}return g>=0&&h>0?(h-g)/a.framerate*1e3:0},f.destroy=function(){this.clip=null},namespace("springroll.pixi").AdvancedMovieClipInstance=e}(),function(){var a=include("springroll.pixi.TextureAtlasTask"),b=include("springroll.pixi.AdvancedMovieClip"),c=(include("springroll.Application"),function(b){a.call(this,b,b.anim),this.anim=this.filter(b.anim)}),d=extend(c,a);c.test=function(b){return!!b.anim&&a.test(b)},d.start=function(a){this.loadAtlas({_anim:this.anim},function(c,d){var e=new b(d._anim,c);e.__AMC_destroy=e.destroy,e.destroy=function(){e.__AMC_destroy(),c.destroy()},a(e,d)},!0)},namespace("springroll.pixi").AdvancedMovieClipTask=c}(),function(){var a=function(a,b,c){this.anim=a,this.loop=!!b,this.speed=c>0?c:1};namespace("springroll.pixi").ParallelSpineData=a}(),function(a){var b=(include("springroll.Application"),include("springroll.AnimatorInstance")),c=include("PIXI.spine.Spine",!1),d=include("springroll.pixi.ParallelSpineData");if(c){var e=function(){b.call(this),this.prevPosition=0},f=b.extend(e,b);f.init=function(a){a.autoUpdate=!1,this.clip=a,this.isLooping=!1,this.currentName=null,this.position=this.duration=0},f.beginAnim=function(a,b){var c=this.clip.state;c.clearTracks(),skeletonData=this.clip.stateData.skeletonData,this.isLooping=!!a.loop;var e=this.currentName=a.anim;if("string"==typeof e)this.duration=skeletonData.findAnimation(e).duration,c.setAnimationByName(0,e,this.isLooping);else{var f;if(e[0]instanceof d){this.duration=0;var g,h=0,i=0;for(f=0;f<e.length;++f){var j=e[f].loop;c.setAnimationByName(f,e[f].anim,j),g=skeletonData.findAnimation(e[f].anim).duration,j?g>i&&(i=g):g>h&&(h=g)}this.duration=h||i}else if(this.duration=skeletonData.findAnimation(e[0]).duration,1==e.length)c.setAnimationByName(0,e[0],this.isLooping);else for(c.setAnimationByName(0,e[0],!1),f=1;f<e.length;++f)c.addAnimationByName(0,e[f],this.isLooping&&f==e.length-1),this.duration+=skeletonData.findAnimation(e[f]).duration}if(b)this.position=0;else{var k=a.start||0;this.position=0>k?Math.random()*this.duration:k}this.clip.update(this.position)},f.endAnim=function(){this.clip.update(this.duration-this.position)},f.setPosition=function(a){this.clip.update(a<this.position?this.duration-this.position+a:a-this.position),this.position=a},e.test=function(a){return a instanceof c},e.hasAnimation=function(a,b){var c;if(skeletonData=this.clip.stateData.skeletonData,"string"==typeof anim)return!!skeletonData.findAnimation(anim);if(Array.isArray(anim)){if(anim[0]instanceof d){for(c=0;c<anim.length;++c)if(!skeletonData.findAnimation(anim[c].anim))return!1}else for(c=0;c<anim.length;++c)if(!skeletonData.findAnimation(anim[c]))return!1;return!0}return!1},e.getDuration=function(a,b){var c;if(skeletonData=this.clip.stateData.skeletonData,"string"==typeof anim)return skeletonData.findAnimation(anim).duration;if(Array.isArray(anim)){var e=0;if(anim[0]instanceof d){var f,g=0,h=0;for(c=0;c<anim.length;++c){var i=anim[c].loop;f=skeletonData.findAnimation(anim[c].anim).duration,i?f>h&&(h=f):f>g&&(g=f)}e=g||h}else if(e=skeletonData.findAnimation(anim[0]).duration,anim.length>1)for(c=1;c<anim.length;++c)e+=skeletonData.findAnimation(anim[c]).duration;return e}return 0},f.destroy=function(){this.clip=null},namespace("springroll.pixi").SpineInstance=e}}(),function(a){var b=include("PIXI.spine.SpineRuntime.AtlasReader",!1),c=include("PIXI.spine.SpineRuntime.AtlasPage",!1),d=include("PIXI.spine.SpineRuntime.AtlasRegion",!1),e=include("PIXI.spine.SpineRuntime.Atlas",!1);if(b){var f=function(a,f){if(this.pages=[],this.regions=[],a){var g=new b(a),h=[];h.length=4;for(var i=null;;){var j=g.readLine();if(null===j)break;if(j=g.trim(j),j.length)if(i){var k=new d;k.name=j,k.page=i,k.rotate="true"==g.readValue(),g.readTuple(h);var l=parseInt(h[0]),m=parseInt(h[1]);g.readTuple(h);var n=parseInt(h[0]),o=parseInt(h[1]);k.u=l/i.width,k.v=m/i.height,k.rotate?(k.u2=(l+o)/i.width,k.v2=(m+n)/i.height):(k.u2=(l+n)/i.width,k.v2=(m+o)/i.height),k.x=l,k.y=m,k.width=Math.abs(n),k.height=Math.abs(o),4==g.readTuple(h)&&(k.splits=[parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3])],4==g.readTuple(h)&&(k.pads=[parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3])],g.readTuple(h))),k.originalWidth=parseInt(h[0]),k.originalHeight=parseInt(h[1]),g.readTuple(h),k.offsetX=parseInt(h[0]),k.offsetY=parseInt(h[1]),k.index=parseInt(g.readValue()),this.regions.push(k)}else{i=new c,i.name=j,2==g.readTuple(h)&&(i.width=parseInt(h[0]),i.height=parseInt(h[1]),g.readTuple(h)),i.format=e.Format[h[0]],g.readTuple(h),i.minFilter=e.TextureFilter[h[0]],i.magFilter=e.TextureFilter[h[1]];var p=g.readValue();i.uWrap=e.TextureWrap.clampToEdge,i.vWrap=e.TextureWrap.clampToEdge,"x"==p?i.uWrap=e.TextureWrap.repeat:"y"==p?i.vWrap=e.TextureWrap.repeat:"xy"==p&&(i.uWrap=i.vWrap=e.TextureWrap.repeat),i.rendererObject=f[j].baseTexture,this.pages.push(i)}else i=null}}},g=f.prototype={};g.findRegion=function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},g.dispose=function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)a[b].rendererObject.destroy(!0)},g.updateUVs=function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}},g.addImage=function(a,b){var f=new c;f.name=a,f.width=b.width,f.height=b.height,f.format="RGBA8888",f.minFilter=f.magFilter="Nearest",f.uWrap=e.TextureWrap.clampToEdge,f.vWrap=e.TextureWrap.clampToEdge,f.rendererObject=b.baseTexture,this.pages.push(f);var g=new d;g.name=a,g.page=f,g.rotate=!1,g.u=g.v=0,g.u2=g.v2=1,g.x=g.y=0,g.originalWidth=g.width=f.width,g.originalHeight=g.height=f.height,g.offsetX=g.offsetY=0,g.index=-1,this.regions.push(g)},g.fromTextureAtlas=function(a,b){var f=new c;f.name=b,f.width=a.baseTexture.width,f.height=a.baseTexture.height,f.format="RGBA8888",f.minFilter=f.magFilter="Nearest",f.uWrap=e.TextureWrap.clampToEdge,f.vWrap=e.TextureWrap.clampToEdge,f.rendererObject=a.baseTexture,this.pages.push(f);for(b in a.frames){var g=a.frames[b],h=new d;h.name=b,h.page=f,h.rotate=g.rotate;var i=g.crop.x,j=g.crop.y,k=g.crop.width,l=g.crop.height;h.u=i/f.width,h.v=j/f.height,h.rotate?(h.u2=(i+l)/f.width,h.v2=(j+k)/f.height):(h.u2=(i+k)/f.width,h.v2=(j+l)/f.height),h.x=i,h.y=j,h.width=Math.abs(k),h.height=Math.abs(l),h.originalWidth=g.width,h.originalHeight=g.height,g.trim?(h.offsetX=g.trim.x,h.offsetY=g.trim.y):h.offsetX=h.offsetY=0,h.index=-1,this.regions.push(h)}},g.destroy=function(){this.dispose(),this.pages=this.regions=null},namespace("springroll.pixi").SpineAtlas=f}}(),function(){var a=include("springroll.pixi.TextureTask"),b=include("springroll.pixi.SpineAtlas",!1),c=(include("PIXI.utils"),include("springroll.Application"));if(b){var d=function(b,c){a.call(this,b,c||b.spineAtlas),this.spineAtlas=this.filter(b.spineAtlas),this.images=b.images},e=extend(d,a);d.test=function(b){return!!b.spineAtlas&&Array.isArray(b.images)&&a.test(b.images[0])},e.start=function(a){c.instance.load({_atlas:this.spineAtlas,_images:this.images},function(c){a(new b(c._atlas,c._images),c)})},namespace("springroll.pixi").SpineAtlasTask=d}}(),function(){var a=include("springroll.Application"),b=include("springroll.Task"),c=include("springroll.pixi.TextureAtlasTask"),d=include("PIXI.spine.loaders.atlasParser",!1),e=include("PIXI.spine.SpineRuntime.SkeletonJsonParser",!1),f=include("PIXI.spine.SpineRuntime.AtlasAttachmentParser",!1),g=include("springroll.pixi.SpineAtlasTask",!1),h=include("springroll.pixi.SpineAtlas",!1);if(d){var i=function(a){b.call(this,a,a.spineAnim),this.spineAnim=this.filter(a.spineAnim),this.atlas=a.atlas,this.extraImages=a.extraImages},j=extend(i,b);i.test=function(a){return a.spineAnim&&(!a.atlas||c.test(a.atlas)||g.test(a.atlas))?a.atlas?!0:!!a.extraImages:!1},j.start=function(b){var c={_anim:this.spineAnim};this.atlas&&(c._atlas=this.atlas),this.extraImages&&(c._images={assets:this.extraImages}),a.instance.load(c,function(a){var c=a._atlas;if(c||(c=new h),!(c instanceof h)){var g=c;c=new h,c.fromTextureAtlas(g)}if(a._images)for(var i in a._images)c.addImage(i,a._images[i]);var j=new e(new f(c)),k=j.readSkeletonData(a._anim),l={id:this.id,spineData:k,spineAtlas:c};d.enableCaching&&this.cache&&(d.AnimCache[this.id]=k),l.destroy=function(){delete d.AnimCache[this.id],this.spineAtlas.destroy(),this.spineData=this.spineAtlas=null},b(l,a)}.bind(this))},j.destroy=function(){b.prototype.destroy.call(this)},namespace("springroll.pixi").SpineAnimTask=i}}(),function(){var a=include("springroll.Application"),b=namespace("springroll.pixi").Animator={};b.canAnimate=function(b){return console.warn("Animator.canAnimate() is now deprecated, please use the app.animator.canAnimate()"),a.instance.animator.canAnimate(b)},b.getDuration=function(b,c){return console.warn("Animator.getDuration() is now deprecated, please use the app.animator.getDuration()"),a.instance.animator.getDuration(b,c)},b.getTimeline=function(b){return console.warn("Animator.getTimeline() is now deprecated, please use the app.animator.getTimeline()"),a.instance.animator.getTimeline(b)},b.instanceHasAnimation=function(b,c){return console.warn("Animator.instanceHasAnimation() is now deprecated, please use the app.animator.instanceHasAnimation()"),a.instance.animator.hasAnimation(b,c)},b.pauseInGroup=function(b,c){console.warn("Animator.pauseInGroup() is now deprecated, please use the app.animator.pauseInGroup()"),a.instance.animator.pauseInGroup(b,c)},b.resume=function(){console.warn("Animator.resume() is now deprecated, please use the app.animator.resume()"),a.instance.animator.resume()},b.stopAll=function(b,c){console.warn("Animator.stopAll() is now deprecated, please use the app.animator.stopAll()"),a.instance.animator.stopAll(b,c)},b.destroy=function(){console.warn("Animator.destroy() is now deprecated, please use the app.animator.destroy()"),a.instance.animator.destroy()},b.getPaused=function(b){return console.warn("Animator.getPaused() is now deprecated, please use the app.animator.paused"),a.instance.animator.paused},b.init=function(){return console.warn("Animator.init() is now deprecated, please use the app.animator property"),a.intance.animator},b.pause=function(){console.warn("Animator.pause() is now deprecated, please use the app.animator.pause()"),a.instance.animator.pause()},b.play=function(b,c,d,e){return console.warn("Animator.play() is now deprecated, please use the app.animator.play"),a.instance.animator.play(b,c,d,e)},b.stop=function(b,c){console.warn("Animator.stop() is now deprecated, please use the app.animator.stop()"),a.instance.animator.stop(b,c)},b.toString=function(){return console.warn("Animator.toString is now deprecated"),"[Animator]"},Object.defineProperties(b,{captions:{get:function(){return console.warn("Animator.captions is now deprecated, please use the app.animator.captions"),a.instance.animator.captions}},debug:{get:function(){return console.warn("Animator.debug is now deprecated, please use the app.animator.debug"),a.instance.animator.debug}}})}();}();