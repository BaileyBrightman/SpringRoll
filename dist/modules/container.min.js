/*! SpringRoll 0.2.0 */
!function(){"use strict";!function(a){var b=(include("springroll.Debug",!1),{});b.flash=function(){var b=!1;try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");c&&(b=!0)}catch(d){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==a&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(b=!0)}return b}(),b.webgl=function(){var a=document.createElement("canvas");return"supportsContext"in a?a.supportsContext("webgl")||a.supportsContext("experimental-webgl"):!!window.WebGLRenderingContext}(),b.canvas=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}(),b.webaudio=function(){return"webkitAudioContext"in window||"AudioContext"in window}(),b.websockets=function(){return"WebSocket"in window||"MozWebSocket"in window}(),b.geolocation=function(){return"geolocation"in navigator}(),b.webworkers=function(){return!!window.Worker}(),b.touch=function(){return!!("ontouchstart"in window||navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0||navigator.pointerEnabled&&navigator.maxTouchPoints>0)}(),b.test=function(c){var d=c.features,e=c.ui,f=c.sizes;for(var g in d)if(b[g]!==a&&d[g]&&!b[g])return"Browser does not support "+g;if(!e.touch&&b.touch)return"Game does not support touch input";if(!e.mouse&&!b.touch)return"Game does not support mouse input";var h=Math.max(window.screen.width,window.screen.height);return!f.xsmall&&480>h?"Game doesn't support extra small screens":!f.small&&768>h?"Game doesn't support small screens":!f.medium&&992>h?"Game doesn't support medium screens":!f.large&&1200>h?"Game doesn't support large screens":!f.xlarge&&h>=1200?"Game doesn't support extra large screens":null},namespace("springroll").Features=b}(),function(){var a=include("springroll.SavedData"),b=include("springroll.EventDispatcher"),c=include("springroll.PageVisibility"),d=include("springroll.Features"),e=include("Bellhop"),f=include("jQuery"),g=function(d,e){b.call(this),e=e||{},this.name="springroll.GameContainer",this.main=f(d),this.dom=this.main[0],this.helpButton=f(e.helpButton).click(onPlayHelp.bind(this)),this.captionsButton=f(e.captionsButton).click(p.bind(this)),this.soundButton=f(e.soundButton).click(q.bind(this)),this.musicButton=f(e.musicButton).click(r.bind(this)),this.sfxButton=f(e.sfxButton).click(t.bind(this)),this.voButton=f(e.voButton).click(s.bind(this)),this.pauseButton=f(e.pauseButton).click(u.bind(this)),this.messenger=null,this.release=null,this.loaded=!1,this.loading=!1,this._captionsStyles=Object.merge({},B,a.read(A)||{}),this._gameBlurred=!1,this._containerBlurred=!1,this._pauseTimer=null,this._isManualPause=!1,this._paused=!1,null===a.read(v)&&(this.captionsMuted=!0),null===a.read(w)&&(this.soundMuted=!1),this._pageVisibility=new c(l.bind(this),m.bind(this))},h=b.prototype,i=extend(g,b);i._internalOpen=function(a,b){return b=f.extend({singlePlay:!1,playOptions:null},b),this.reset(),d.canvas&&(d.webaudio||d.flash)?(this.loading=!0,this.messenger=new e,this.messenger.connect(this.dom),this.messenger.on({trackEvent:onTrackEvent.bind(this),progressEvent:onProgressEvent.bind(this),loadDone:j.bind(this),helpEnabled:onHelpEnabled.bind(this),endGame:o.bind(this),gameFocus:k.bind(this)}),this.main.addClass("loading").prop("src",a).prop("width",window.innerWidth).prop("height",window.innerHeight),b.singlePlay&&this.messenger.send("singlePlay"),b.playOptions&&this.messenger.send("playOptions",b.playOptions),void this.trigger("open")):this.trigger("unsupported")},i.open=function(a,b){this._internalOpen(a,b)},i.openRemote=function(a,b){b=f.extend({query:"",playOptions:null,singlePlay:!1},b),this.release=null,f.getJSON(a,function(a){if(!a.success)return this.trigger("remoteError",a.error);var c=a.data,e=d.test(c.capabilities);return e?this.trigger("unsupported"):(this.release=c,void this._internalOpen(c.url+b.query,b))}.bind(this)).fail(function(){return this.trigger("remoteFailed")}.bind(this))};var j=function(){this.loading=!1,this.loaded=!0,this.main.removeClass("loading"),this.captionsButton.removeClass("disabled"),this.soundButton.removeClass("disabled"),this.sfxButton.removeClass("disabled"),this.voButton.removeClass("disabled"),this.musicButton.removeClass("disabled"),this.pauseButton.removeClass("disabled"),this.captionsMuted=!!a.read(v),this.soundMuted=!!a.read(w),this.musicMuted=!!a.read(x),this.sfxMuted=!!a.read(z),this.voMuted=!!a.read(y),this.setCaptionsStyles(a.read(A)),this.trigger("opened"),this.paused=this._paused},k=function(a){this._gameBlurred=!a.data,n.call(this)},l=function(){this._containerBlurred=this._gameBlurred=!0,n.call(this)},m=function(){this._containerBlurred=!0,n.call(this)},n=function(){this._pauseTimer&&clearTimeout(this._pauseTimer),this._pauseTimer=setTimeout(function(){this._pauseTimer=null,this._isManualPause!==!0&&(this.paused=this._containerBlurred&&this._gameBlurred)}.bind(this),100)},o=function(){this.messenger.destroy(),this.messenger=null,this.reset()},p=function(){this.captionsMuted=!this.captionsMuted};Object.defineProperty(i,"paused",{set:function(a){this._paused=a,this.messenger&&this.messenger.send("pause",a),this.trigger(a?"paused":"resumed"),this.trigger("pause",a),this.pauseButton.removeClass("unpaused paused").addClass(a?"paused":"unpaused")},get:function(){return this._paused}});var q=function(){var a=!this.soundMuted;this.soundMuted=a,this.musicMuted=a,this.voMuted=a,this.sfxMuted=a},r=function(){this.musicMuted=!this.musicMuted,this._checkSoundMute()},s=function(){this.voMuted=!this.voMuted,this._checkSoundMute()},t=function(){this.sfxMuted=!this.sfxMuted,this._checkSoundMute()};i._checkSoundMute=function(){this.soundMuted=this.sfxMuted&&this.voMuted&&this.musicMuted};var u=function(){this.paused=!this.paused,this._isManualPause=this.paused},v="captionsMuted",w="soundMuted",x="musicMuted",y="voMuted",z="sfxMuted",A="captionsStyles",B={size:"md",background:"black-semi",color:"white",edge:"none",font:"arial",align:"top"};i._setMuteProp=function(b,c,d){c.removeClass("unmuted muted").addClass(d?"muted":"unmuted"),a.write(b,d),this.messenger&&this.messenger.send(b,d)},i.setCaptionsStyles=function(b,c){"object"==typeof b?Object.merge(this._captionsStyles,b||{}):"string"==typeof b&&(this._captionsStyles[b]=c),b=this._captionsStyles,a.write(A,b),this.messenger&&this.messenger.send(A,b)},i.getCaptionsStyles=function(a){var b=this._captionsStyles;return a?b[a]:b},i.clearCaptionsStyles=function(){this._captionsStyles=Object.merge({},B),this.setCaptionsStyles()},Object.defineProperty(i,v,{set:function(a){this._captionsMuted=a,this._setMuteProp(v,this.captionsButton,a)},get:function(){return this._captionsMuted}}),Object.defineProperty(i,w,{set:function(a){this._soundMuted=a,this._setMuteProp(w,this.soundButton,a)},get:function(){return this._soundMuted}}),Object.defineProperty(i,y,{set:function(a){this._voMuted=a,this._setMuteProp(y,this.voButton,a)},get:function(){return this._voMuted}}),Object.defineProperty(i,x,{set:function(a){this._musicMuted=a,this._setMuteProp(x,this.musicButton,a)},get:function(){return this._musicMuted}}),Object.defineProperty(i,z,{set:function(a){this._sfxMuted=a,this._setMuteProp(z,this.sfxButton,a)},get:function(){return this._sfxMuted}}),i.reset=function(){C(this.soundButton),C(this.captionsButton),C(this.musicButton),C(this.voButton),C(this.sfxButton),C(this.pauseButton),this.loaded=!1,this.loading=!1,this.paused=!1,this.main.attr("src",""),this.trigger("closed")},i.close=function(){this.loading||this.loaded?(this.trigger("close"),this.messenger.send("close")):this.reset()};var C=function(a){a.removeClass("enabled").addClass("disabled")};i.destroy=function(){this.reset(),this.main=null,this.dom=null,this.soundButton=null,this.pauseButton=null,this.captionsButton=null,this.musicButton=null,this.voButton=null,this.sfxButton=null,this._pageVisibility&&(this._pageVisibility.destroy(),this._pageVisibility=null),this.messenger&&(this.messenger.destroy(),this.messenger=null),h.destroy.call(this)},namespace("springroll").GameContainer=g}(document),function(){var a=(include("springroll.SavedData"),include("springroll.GameContainer")),b=include("jQuery"),c=function(c,d){a.call(this,c,d),this.helpButton=b(d.helpButton).click(j.bind(this)),this.on("open",f.bind(this))},d=a.prototype,e=extend(c,a),f=function(){this.messenger.on({analyticEvent:h.bind(this),learningEvent:i.bind(this),helpEnabled:g.bind(this)})},g=function(a){this.helpEnabled=!!a.data},h=function(a){var b=a.data,c=include("GA_obj",!1);c&&c.analyticEvent(b.category,b.action,b.label,b.value),c=include("ga",!1),c&&c("send",{hitType:"event",eventCategory:b.category,eventAction:b.action,eventLabel:b.label,eventValue:b.value}),this.trigger("analyticEvent",a.data)},i=function(a){this.trigger("learningEvent",a.data)},j=function(){this.paused||this.helpButton.hasClass("disabled")||this.messenger.send("playHelp")};Object.defineProperty(e,"paused",{set:function(a){Object.getOwnPropertyDescriptor(d,"paused").set.call(this,a),a&&!this.helpButton.hasClass("disabled")?(this.helpButton.data("paused",!0),this.helpEnabled=!1):this.helpButton.data("paused")&&(this.helpButton.removeData("paused"),this.helpEnabled=!0)},get:function(){return this._paused}}),Object.defineProperty(e,"helpEnabled",{set:function(a){this._helpEnabled=a,this.helpButton.removeClass("disabled enabled").addClass(a?"enabled":"disabled"),this.trigger("helpEnabled",a)},get:function(){return this._helpEnabled}}),e.reset=function(){d.reset.call(this),this.helpEnabled=!1},e.destroy=function(){this.helpButton=null,d.destroy.call(this)},namespace("springroll").LearningGameContainer=c}(document);}();